{
  if (getMaster) {
    getMaster();
  }
  HRegionInterface server;
  String rsName=regionServer.toString();
  server=this.servers.get(rsName);
  if (server == null) {
    this.connectionLock.putIfAbsent(rsName,rsName);
synchronized (this.connectionLock.get(rsName)) {
      server=this.servers.get(rsName);
      if (server == null) {
        try {
          server=(HRegionInterface)HBaseRPC.waitForProxy(serverInterfaceClass,HRegionInterface.VERSION,regionServer.getInetSocketAddress(),this.conf,this.maxRPCAttempts,this.rpcTimeout,this.rpcTimeout);
          this.servers.put(rsName,server);
        }
 catch (        RemoteException e) {
          LOG.warn("RemoteException connecting to RS",e);
          throw RemoteExceptionHandler.decodeRemoteException(e);
        }
      }
    }
  }
  return server;
}
