{
  ClientProtos.Get getProto=ClientProtos.Get.parseFrom(Base64.decode(PB_GET));
  try {
    ProtobufUtil.toGet(getProto);
    fail("Should not be able to load the filter class");
  }
 catch (  IOException ioe) {
    Assert.assertTrue(ioe.getCause() instanceof ClassNotFoundException);
  }
  Configuration conf=HBaseConfiguration.create();
  String localPath=conf.get("hbase.local.dir") + File.separator + "dynamic"+ File.separator+ "jars"+ File.separator;
  File jarFile=new File(localPath,"MockFilter.jar");
  jarFile.deleteOnExit();
  FileOutputStream fos=new FileOutputStream(jarFile);
  fos.write(Base64.decode(MOCK_FILTER_JAR));
  fos.close();
  Get get=ProtobufUtil.toGet(getProto);
  Assert.assertEquals("test.MockFilter",get.getFilter().getClass().getName());
}
