{
  if (bb.capacity() > this.maxByteBufferSizeToCache)   return;
  boolean success=false;
  int average=0;
  lock.lock();
  try {
    success=this.buffers.offer(bb);
    if (success) {
      this.totalReservoirCapacity+=bb.capacity();
      average=this.totalReservoirCapacity / this.buffers.size();
    }
  }
  finally {
    lock.unlock();
  }
  if (!success) {
    LOG.warn("At capacity: " + this.buffers.size());
  }
 else {
    if (average > this.runningAverage && average < this.maxByteBufferSizeToCache) {
      this.runningAverage=average;
    }
  }
}
