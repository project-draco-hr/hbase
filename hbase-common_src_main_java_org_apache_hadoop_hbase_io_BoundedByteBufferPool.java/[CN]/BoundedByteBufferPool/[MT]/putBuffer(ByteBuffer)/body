{
  if (buffer.capacity() > this.maxByteBufferSizeToCache)   return;
  int futureSize=this.buffers.size() + 1;
  if (futureSize > this.maxToCache) {
    if (LOG.isWarnEnabled())     LOG.warn("At capacity: " + futureSize);
    return;
  }
  this.totalReservoirCapacity+=buffer.capacity();
  int average=this.totalReservoirCapacity / futureSize;
  if (average > this.runningAverage && average < this.maxByteBufferSizeToCache) {
    this.runningAverage=average;
  }
  this.buffers.put(new Key(buffer.capacity()),buffer);
}
