{
  Calendar calendar=new GregorianCalendar();
  int hourOfDay=calendar.get(Calendar.HOUR_OF_DAY);
  LOG.debug("Hour of day = " + hourOfDay);
  int hourPlusOne=((hourOfDay + 1) % 24);
  int hourMinusOne=((hourOfDay - 1 + 24) % 24);
  int hourMinusTwo=((hourOfDay - 2 + 24) % 24);
  Configuration conf=TEST_UTIL.getConfiguration();
  OffPeakCompactions opc=new OffPeakCompactions(conf);
  LOG.debug("Testing without off-peak settings...");
  assertFalse(opc.tryStartOffPeakRequest());
  conf.setLong("hbase.offpeak.start.hour",hourMinusOne);
  conf.setLong("hbase.offpeak.end.hour",hourPlusOne);
  opc=new OffPeakCompactions(conf);
  LOG.debug("Testing compact selection with off-peak settings (" + hourMinusOne + ", "+ hourPlusOne+ ")");
  assertTrue(opc.tryStartOffPeakRequest());
  opc.endOffPeakRequest();
  conf.setLong("hbase.offpeak.start.hour",hourMinusTwo);
  conf.setLong("hbase.offpeak.end.hour",hourMinusOne);
  opc=new OffPeakCompactions(conf);
  assertFalse(opc.tryStartOffPeakRequest());
}
