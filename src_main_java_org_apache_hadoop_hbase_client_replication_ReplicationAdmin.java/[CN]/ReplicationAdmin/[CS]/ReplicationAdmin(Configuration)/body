{
  if (!conf.getBoolean(HConstants.REPLICATION_ENABLE_KEY,false)) {
    throw new RuntimeException("hbase.replication isn't true, please " + "enable it in order to use replication");
  }
  ZooKeeperWatcher zkw=HConnectionManager.getConnection(conf).getZooKeeperWatcher();
  try {
    this.replicationZk=new ReplicationZookeeper(conf,zkw);
  }
 catch (  KeeperException e) {
    throw new IOException("Unable setup the ZooKeeper connection",e);
  }
}
