{
  RuntimeMXBean runtime=ManagementFactory.getRuntimeMXBean();
  LOG.info("vmName=" + runtime.getVmName() + ", vmVendor="+ runtime.getVmVendor()+ ", vmVersion="+ runtime.getVmVersion());
  LOG.info("vmInputArguments=" + runtime.getInputArguments());
  Memcache memcache1=new Memcache();
  long size=0;
  final int count=10000;
  for (int i=0; i < count; i++) {
    size+=memcache1.add(new HStoreKey(Bytes.toBytes(i)),HConstants.EMPTY_BYTE_ARRAY);
  }
  LOG.info("memcache1 estimated size=" + size);
  for (int i=0; i < count; i++) {
    size+=memcache1.add(new HStoreKey(Bytes.toBytes(i)),HConstants.EMPTY_BYTE_ARRAY);
  }
  LOG.info("memcache1 estimated size (2nd loading of same data)=" + size);
  Memcache memcache2=new Memcache();
  for (int i=0; i < count; i++) {
    byte[] b=Bytes.toBytes(i);
    size+=memcache2.add(new HStoreKey(b,b),new byte[i]);
  }
  LOG.info("memcache2 estimated size=" + size);
  final int seconds=30;
  LOG.info("Waiting " + seconds + " seconds while heap dump is taken");
  for (int i=0; i < seconds; i++) {
    Thread.sleep(1000);
  }
  LOG.info("Exiting.");
}
