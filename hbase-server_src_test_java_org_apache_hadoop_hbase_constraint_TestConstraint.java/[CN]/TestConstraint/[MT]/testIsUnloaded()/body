{
  HTableDescriptor desc=new HTableDescriptor(tableName);
  for (  byte[] family : new byte[][]{dummy,test}) {
    desc.addFamily(new HColumnDescriptor(family));
  }
  Constraints.add(desc,RuntimeFailConstraint.class);
  Constraints.add(desc,CheckWasRunConstraint.class);
  CheckWasRunConstraint.wasRun=false;
  util.getHBaseAdmin().createTable(desc);
  HTable table=new HTable(util.getConfiguration(),tableName);
  Put put=new Put(row1);
  put.add(dummy,new byte[0],"pass".getBytes());
  try {
    table.put(put);
    fail("RuntimeFailConstraint wasn't triggered - this put shouldn't work!");
  }
 catch (  Exception e) {
  }
  table.put(put);
  assertFalse(CheckWasRunConstraint.wasRun);
  table.close();
}
