{
  int count=(buffer.remaining() <= NIO_BUFFER_LIMIT) ? channel.write(buffer) : channelIO(null,channel,buffer);
  if (count > 0) {
    metrics.sentBytes(count);
  }
  return count;
}
