{
  LOG.info("Stopping server on " + port);
  running=false;
  if (handlers != null) {
    for (    Handler handler : handlers) {
      if (handler != null) {
        handler.interrupt();
      }
    }
  }
  if (priorityHandlers != null) {
    for (    Handler handler : priorityHandlers) {
      if (handler != null) {
        handler.interrupt();
      }
    }
  }
  listener.interrupt();
  listener.doStop();
  responder.interrupt();
  notifyAll();
  if (this.rpcMetrics != null) {
    this.rpcMetrics.shutdown();
  }
}
