{
  call.timestamp=System.currentTimeMillis();
  responseQueueLen++;
  boolean doRegister=false;
  boolean closed;
  try {
    responseQueuesSizeThrottler.increase(call.response.remaining());
  }
 catch (  InterruptedException ie) {
    throw new InterruptedIOException(ie.getMessage());
  }
synchronized (call.connection.responseQueue) {
    closed=call.connection.closed;
    if (!closed) {
      call.connection.responseQueue.addLast(call);
      if (call.connection.responseQueue.size() == 1) {
        doRegister=!processResponse(call.connection.responseQueue,false);
      }
    }
  }
  if (doRegister) {
    enqueueInSelector(call);
  }
  if (closed) {
    responseQueuesSizeThrottler.decrease(call.response.remaining());
  }
}
