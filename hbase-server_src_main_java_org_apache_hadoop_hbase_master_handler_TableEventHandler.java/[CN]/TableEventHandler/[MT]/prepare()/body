{
  this.tableLock=masterServices.getTableLockManager().writeLock(tableName,eventType.toString());
  this.tableLock.acquire();
  boolean success=false;
  try {
    try {
      this.masterServices.checkTableModifiable(tableName);
    }
 catch (    TableNotDisabledException ex) {
      if (isOnlineSchemaChangeAllowed() && eventType.isOnlineSchemaChangeSupported()) {
        LOG.debug("Ignoring table not disabled exception " + "for supporting online schema changes.");
      }
 else {
        throw ex;
      }
    }
    prepareWithTableLock();
    success=true;
  }
  finally {
    if (!success) {
      releaseTableLock();
    }
  }
  return this;
}
