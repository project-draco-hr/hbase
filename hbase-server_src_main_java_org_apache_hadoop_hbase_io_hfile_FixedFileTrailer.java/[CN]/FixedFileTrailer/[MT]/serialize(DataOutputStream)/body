{
  HFile.checkFormatVersion(majorVersion);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream baosDos=new DataOutputStream(baos);
  BlockType.TRAILER.write(baosDos);
  if (majorVersion > 2 || (majorVersion == 2 && minorVersion >= PBUF_TRAILER_MINOR_VERSION)) {
    serializeAsPB(baosDos);
  }
 else {
    serializeAsWritable(baosDos);
  }
  baosDos.writeInt(materializeVersion(majorVersion,minorVersion));
  outputStream.write(baos.toByteArray());
}
