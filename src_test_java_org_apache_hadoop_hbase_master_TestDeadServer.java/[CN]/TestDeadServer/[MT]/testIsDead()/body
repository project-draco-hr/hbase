{
  DeadServer ds=new DeadServer(2);
  final String hostname123="127.0.0.1,123,3";
  assertFalse(ds.isDeadServer(hostname123,false));
  assertFalse(ds.isDeadServer(hostname123,true));
  ds.add(hostname123);
  assertTrue(ds.isDeadServer(hostname123,false));
  assertFalse(ds.isDeadServer("127.0.0.1:1",true));
  assertFalse(ds.isDeadServer("127.0.0.1:1234",true));
  assertTrue(ds.isDeadServer("127.0.0.1:123",true));
  assertTrue(ds.areDeadServersInProgress());
  ds.finish(hostname123);
  assertFalse(ds.areDeadServersInProgress());
  final String hostname1234="127.0.0.2,1234,4";
  ds.add(hostname1234);
  assertTrue(ds.isDeadServer(hostname123,false));
  assertTrue(ds.isDeadServer(hostname1234,false));
  assertTrue(ds.areDeadServersInProgress());
  ds.finish(hostname1234);
  assertFalse(ds.areDeadServersInProgress());
  final String hostname12345="127.0.0.2,12345,4";
  ds.add(hostname12345);
  assertTrue(ds.isDeadServer(hostname1234,false));
  assertTrue(ds.isDeadServer(hostname12345,false));
  assertTrue(ds.areDeadServersInProgress());
  ds.finish(hostname12345);
  assertFalse(ds.areDeadServersInProgress());
  final String deadServer="127.0.0.1,9090,112321";
  assertFalse(ds.cleanPreviousInstance(deadServer));
  ds.add(deadServer);
  assertTrue(ds.isDeadServer(deadServer));
  final String deadServerHostComingAlive="127.0.0.1,9090,112321";
  assertTrue(ds.cleanPreviousInstance(deadServerHostComingAlive));
  assertFalse(ds.isDeadServer(deadServer));
  assertFalse(ds.cleanPreviousInstance(deadServerHostComingAlive));
}
