{
  if (exception == null || !(exception instanceof Throwable)) {
    return null;
  }
  Throwable cur=(Throwable)exception;
  RegionMovedException res=null;
  while (res == null && cur != null) {
    if (cur instanceof RegionMovedException) {
      res=(RegionMovedException)cur;
    }
 else {
      if (cur instanceof RemoteException) {
        RemoteException re=(RemoteException)cur;
        Exception e=re.unwrapRemoteException(RegionMovedException.class);
        if (e == null) {
          e=re.unwrapRemoteException();
        }
        if (e != re) {
          res=find(e);
        }
      }
      cur=cur.getCause();
    }
  }
  if (res != null && (res.getPort() < 0 || res.getHostname() == null)) {
    return null;
  }
 else {
    return res;
  }
}
