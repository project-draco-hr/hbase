{
  boolean deletedSomething=false;
synchronized (this.cachedRegionLocations) {
    if (!cachedServers.contains(server)) {
      return;
    }
    for (    Map<byte[],HRegionLocation> tableLocations : cachedRegionLocations.values()) {
      for (      Entry<byte[],HRegionLocation> e : tableLocations.entrySet()) {
        if (e.getValue().getHostnamePort().equals(server)) {
          tableLocations.remove(e.getKey());
          deletedSomething=true;
        }
      }
    }
    cachedServers.remove(server);
  }
  if (deletedSomething && LOG.isDebugEnabled()) {
    LOG.debug("Removed all cached region locations that map to " + server);
  }
}
