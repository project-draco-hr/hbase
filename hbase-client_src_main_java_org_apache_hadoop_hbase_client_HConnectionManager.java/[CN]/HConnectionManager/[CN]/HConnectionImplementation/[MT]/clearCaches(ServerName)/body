{
  boolean deletedSomething=false;
synchronized (this.cachedRegionLocations) {
    if (!cachedServers.contains(serverName)) {
      return;
    }
    for (    Map<byte[],HRegionLocation> tableLocations : cachedRegionLocations.values()) {
      for (      Entry<byte[],HRegionLocation> e : tableLocations.entrySet()) {
        HRegionLocation value=e.getValue();
        if (value != null && serverName.equals(value.getServerName())) {
          tableLocations.remove(e.getKey());
          deletedSomething=true;
        }
      }
    }
    cachedServers.remove(serverName);
  }
  if (deletedSomething && LOG.isDebugEnabled()) {
    LOG.debug("Removed all cached region locations that map to " + serverName);
  }
}
