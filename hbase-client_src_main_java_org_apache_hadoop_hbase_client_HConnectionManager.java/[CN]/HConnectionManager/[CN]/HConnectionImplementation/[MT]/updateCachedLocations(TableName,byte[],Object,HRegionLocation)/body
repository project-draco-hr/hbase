{
  if (rowkey == null || tableName == null) {
    LOG.warn("Coding error, see method javadoc. row=" + (rowkey == null ? "null" : rowkey) + ", tableName="+ (tableName == null ? "null" : tableName));
    return;
  }
  final HRegionLocation oldLocation=getCachedLocation(tableName,rowkey);
  if (oldLocation == null) {
    return;
  }
  HRegionInfo regionInfo=oldLocation.getRegionInfo();
  final RegionMovedException rme=RegionMovedException.find(exception);
  if (rme != null) {
    if (LOG.isTraceEnabled()) {
      LOG.trace("Region " + regionInfo.getRegionNameAsString() + " moved to "+ rme.getHostname()+ ":"+ rme.getPort()+ " according to "+ source.getHostnamePort());
    }
    updateCachedLocation(regionInfo,source,rme.getServerName(),rme.getLocationSeqNum());
  }
 else   if (RegionOpeningException.find(exception) != null) {
    if (LOG.isTraceEnabled()) {
      LOG.trace("Region " + regionInfo.getRegionNameAsString() + " is being opened on "+ source.getHostnamePort()+ "; not deleting the cache entry");
    }
  }
 else {
    deleteCachedLocation(regionInfo,source);
  }
}
