{
synchronized (hci.masterAndZKLock) {
    if (hci.canCloseZKW) {
      if (System.currentTimeMillis() > hci.keepZooKeeperWatcherAliveUntil) {
        hci.closeZooKeeperWatcher();
        hci.keepZooKeeperWatcherAliveUntil=Long.MAX_VALUE;
      }
    }
    closeMasterProtocol(hci.masterAdminProtocol);
    closeMasterProtocol(hci.masterMonitorProtocol);
  }
}
