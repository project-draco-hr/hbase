{
  while (true) {
synchronized (finishedTasks) {
      if (!finishedTasks.isEmpty()) {
        MultiAction<R> done=finishedTasks.remove(finishedTasks.size() - 1);
        Iterator<Triple<MultiAction<R>,HRegionLocation,Future<MultiResponse>>> it=inProgress.iterator();
        while (it.hasNext()) {
          Triple<MultiAction<R>,HRegionLocation,Future<MultiResponse>> task=it.next();
          if (task.getFirst() == done) {
            it.remove();
            return task;
          }
        }
        LOG.error("Development error: We didn't see a task in the list. " + done.getRegions());
      }
      finishedTasks.wait(10);
    }
  }
}
