{
  ScannerRecord sr=this.scanners.get(scannerid);
  if (sr == null) {
    doNotFound(response,"No such scanner.");
    return;
  }
  String limitString=request.getParameter(LIMIT);
  int limit=1;
  if (limitString != null && limitString.length() > 0) {
    limit=Integer.valueOf(limitString);
  }
  if (sr.hasNext(limit)) {
switch (ContentType.getContentType(request.getHeader(ACCEPT))) {
case XML:
      outputScannerEntryXML(response,sr,limit);
    break;
case MIME:
  doNotAcceptable(response);
break;
default :
doNotAcceptable(response);
}
}
 else {
this.scanners.remove(scannerid);
doNotFound(response,"Scanner is expended");
}
}
