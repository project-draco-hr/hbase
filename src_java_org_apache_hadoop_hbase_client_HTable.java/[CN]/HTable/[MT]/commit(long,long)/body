{
  updateInProgress(true);
  if (lockid != 1) {
    throw new IllegalArgumentException("Invalid lock id!");
  }
  try {
    batch.get().setTimestamp(timestamp);
    commit(batch.get());
  }
  finally {
    batch.set(null);
  }
}
