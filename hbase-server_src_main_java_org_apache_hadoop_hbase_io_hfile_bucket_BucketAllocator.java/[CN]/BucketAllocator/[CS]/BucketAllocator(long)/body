{
  buckets=new Bucket[(int)(availableSpace / (long)BUCKET_CAPACITY)];
  if (buckets.length < BUCKET_SIZES.length)   throw new BucketAllocatorException("Bucket allocator size too small - must have room for at least " + BUCKET_SIZES.length + " buckets");
  bucketSizeInfos=new BucketSizeInfo[BUCKET_SIZES.length];
  for (int i=0; i < BUCKET_SIZES.length; ++i) {
    bucketSizeInfos[i]=new BucketSizeInfo(i);
  }
  for (int i=0; i < buckets.length; ++i) {
    buckets[i]=new Bucket(BUCKET_CAPACITY * i);
    bucketSizeInfos[i < BUCKET_SIZES.length ? i : BUCKET_SIZES.length - 1].instantiateBucket(buckets[i]);
  }
  this.totalSize=((long)buckets.length) * BUCKET_CAPACITY;
}
