{
  SortedMap<Text,HRegionLocation> tableLocations=cachedRegionLocations.get(tableName);
  if (tableLocations == null) {
    tableLocations=new TreeMap<Text,HRegionLocation>();
    cachedRegionLocations.put(tableName,tableLocations);
  }
  if (!tableLocations.isEmpty()) {
    SortedMap<Text,HRegionLocation> matchingRegions=tableLocations.headMap(row);
    if (!matchingRegions.isEmpty()) {
      HRegionLocation possibleRegion=matchingRegions.get(matchingRegions.lastKey());
      Text endKey=possibleRegion.getRegionInfo().getEndKey();
      if (endKey.compareTo(row) <= 0) {
        tableLocations.remove(matchingRegions.lastKey());
      }
    }
  }
}
