{
  HRegionInterface server;
synchronized (this.servers) {
    server=this.servers.get(regionServer.toString());
    if (server == null) {
      long versionId=0;
      try {
        versionId=serverInterfaceClass.getDeclaredField("versionID").getLong(server);
      }
 catch (      IllegalAccessException e) {
        throw new UnsupportedOperationException("Unable to open a connection to a " + serverInterfaceClass.getName() + " server.",e);
      }
catch (      NoSuchFieldException e) {
        throw new UnsupportedOperationException("Unable to open a connection to a " + serverInterfaceClass.getName() + " server.",e);
      }
      try {
        server=(HRegionInterface)HbaseRPC.waitForProxy(serverInterfaceClass,versionId,regionServer.getInetSocketAddress(),this.conf);
      }
 catch (      RemoteException e) {
        throw RemoteExceptionHandler.decodeRemoteException(e);
      }
      this.servers.put(regionServer.toString(),server);
    }
  }
  return server;
}
