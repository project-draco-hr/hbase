{
  Class<?> implClass=null;
  String[] defaultCPClasses=conf.getStrings(confKey);
  if (defaultCPClasses == null || defaultCPClasses.length == 0)   return;
  int priority=Coprocessor.PRIORITY_SYSTEM;
  List<E> configured=new ArrayList<E>();
  for (  String className : defaultCPClasses) {
    className=className.trim();
    if (findCoprocessor(className) != null) {
      continue;
    }
    ClassLoader cl=this.getClass().getClassLoader();
    Thread.currentThread().setContextClassLoader(cl);
    try {
      implClass=cl.loadClass(className);
      configured.add(loadInstance(implClass,Coprocessor.PRIORITY_SYSTEM,conf));
      LOG.info("System coprocessor " + className + " was loaded "+ "successfully with priority ("+ priority+++ ").");
    }
 catch (    ClassNotFoundException e) {
      LOG.warn("Class " + className + " cannot be found. "+ e.getMessage());
    }
catch (    IOException e) {
      LOG.warn("Load coprocessor " + className + " failed. "+ e.getMessage());
    }
  }
  coprocessors.addAll(configured);
}
