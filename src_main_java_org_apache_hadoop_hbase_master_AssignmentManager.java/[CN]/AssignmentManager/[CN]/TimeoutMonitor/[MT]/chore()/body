{
  if (this.bulkAssign)   return;
  boolean allRSsOffline=this.serverManager.getOnlineServersList().isEmpty();
synchronized (regionsInTransition) {
    long now=System.currentTimeMillis();
    for (    RegionState regionState : regionsInTransition.values()) {
      if (regionState.getStamp() + timeout <= now) {
        actOnTimeOut(regionState);
      }
 else       if (this.allRegionServersOffline && !allRSsOffline) {
        actOnTimeOut(regionState);
      }
    }
  }
  setAllRegionServersOffline(allRSsOffline);
}
