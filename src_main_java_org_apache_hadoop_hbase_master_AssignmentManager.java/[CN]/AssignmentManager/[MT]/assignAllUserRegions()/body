{
  List<HServerInfo> servers=serverManager.getOnlineServersList();
  Map<HRegionInfo,HServerAddress> allRegions=MetaReader.fullScan(catalogTracker,this.zkTable.getDisabledTables(),true);
  if (allRegions == null || allRegions.isEmpty())   return;
  boolean retainAssignment=master.getConfiguration().getBoolean("hbase.master.startup.retainassign",true);
  Map<HServerInfo,List<HRegionInfo>> bulkPlan=null;
  if (retainAssignment) {
    bulkPlan=LoadBalancer.retainAssignment(allRegions,servers);
  }
 else {
    assignUserRegions(allRegions.keySet().toArray(new HRegionInfo[allRegions.size()]),servers);
    return;
  }
  LOG.info("Bulk assigning " + allRegions.size() + " region(s) across "+ servers.size()+ " server(s), retainAssignment="+ retainAssignment);
  BulkAssigner ba=new BulkStartupAssigner(this.master,bulkPlan,this);
  ba.bulkAssign();
  LOG.info("Bulk assigning done");
}
