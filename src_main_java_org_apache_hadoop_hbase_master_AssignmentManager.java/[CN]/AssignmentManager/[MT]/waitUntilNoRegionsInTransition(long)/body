{
  long startTime=System.currentTimeMillis();
  long remaining=timeout;
synchronized (this.regionsInTransition) {
    while (this.regionsInTransition.size() > 0 && !this.master.isStopped() && remaining > 0) {
      this.regionsInTransition.wait(remaining);
      remaining=timeout - (System.currentTimeMillis() - startTime);
    }
  }
}
