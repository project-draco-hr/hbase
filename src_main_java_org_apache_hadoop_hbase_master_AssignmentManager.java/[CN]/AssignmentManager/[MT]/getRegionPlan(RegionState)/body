{
  String encodedName=state.getRegion().getEncodedName();
  RegionPlan newPlan=new RegionPlan(state.getRegion(),null,LoadBalancer.randomAssignment(serverManager.getOnlineServersList()));
  RegionPlan existingPlan=regionPlans.putIfAbsent(encodedName,newPlan);
  RegionPlan plan=null;
  if (existingPlan == null) {
    LOG.debug("No previous transition plan for " + state.getRegion().getRegionNameAsString() + " so generated a random one; "+ newPlan+ "; "+ serverManager.countOfRegionServers()+ " (online="+ serverManager.getOnlineServers().size()+ ") available servers");
    plan=newPlan;
  }
 else {
    LOG.debug("Using preexisting plan=" + existingPlan);
    plan=existingPlan;
  }
  return plan;
}
