{
synchronized (this.regionPlans) {
    for (Iterator<Map.Entry<String,RegionPlan>> i=this.regionPlans.entrySet().iterator(); i.hasNext(); ) {
      Map.Entry<String,RegionPlan> e=i.next();
      if (e.getValue().getDestination().equals(hsi)) {
        i.remove();
      }
    }
  }
  Set<HRegionInfo> deadRegions=null;
synchronized (this.regions) {
    deadRegions=new TreeSet<HRegionInfo>(this.servers.remove(hsi));
    for (    HRegionInfo region : deadRegions) {
      this.regions.remove(region);
    }
  }
  List<HRegionInfo> rits=new ArrayList<HRegionInfo>();
synchronized (regionsInTransition) {
    for (    RegionState region : this.regionsInTransition.values()) {
      if (deadRegions.remove(region.getRegion())) {
        rits.add(region.getRegion());
      }
    }
  }
  return rits;
}
