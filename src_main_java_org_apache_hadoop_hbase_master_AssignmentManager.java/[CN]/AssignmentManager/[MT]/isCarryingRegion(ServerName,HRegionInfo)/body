{
  RegionTransition rt=null;
  try {
    byte[] data=ZKAssign.getData(master.getZooKeeper(),hri.getEncodedName());
    rt=data == null ? null : RegionTransition.parseFrom(data);
  }
 catch (  KeeperException e) {
    master.abort("Exception reading unassigned node for region=" + hri.getEncodedName(),e);
  }
catch (  DeserializationException e) {
    master.abort("Exception parsing unassigned node for region=" + hri.getEncodedName(),e);
  }
  ServerName addressFromZK=rt != null ? rt.getServerName() : null;
  if (addressFromZK != null) {
    boolean matchZK=(addressFromZK != null && addressFromZK.equals(serverName));
    LOG.debug("based on ZK, current region=" + hri.getRegionNameAsString() + " is on server="+ addressFromZK+ " server being checked=: "+ serverName);
    return matchZK;
  }
  ServerName addressFromAM=getRegionServerOfRegion(hri);
  boolean matchAM=(addressFromAM != null && addressFromAM.equals(serverName));
  LOG.debug("based on AM, current region=" + hri.getRegionNameAsString() + " is on server="+ (addressFromAM != null ? addressFromAM : "null")+ " server being checked: "+ serverName);
  return matchAM;
}
