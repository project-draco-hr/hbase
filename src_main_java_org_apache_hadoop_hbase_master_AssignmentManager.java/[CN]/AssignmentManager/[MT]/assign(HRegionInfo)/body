{
  LOG.debug("Starting assignment for region " + region.getRegionNameAsString());
  String encodedName=region.getEncodedName();
  RegionState state;
synchronized (regionsInTransition) {
    state=regionsInTransition.get(encodedName);
    if (state == null) {
      state=new RegionState(region,RegionState.State.OFFLINE);
      regionsInTransition.put(encodedName,state);
    }
  }
synchronized (state) {
    assign(state);
  }
}
