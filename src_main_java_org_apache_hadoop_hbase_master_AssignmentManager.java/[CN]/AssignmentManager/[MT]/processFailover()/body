{
  HServerInfo hsi=this.serverManager.getHServerInfo(this.catalogTracker.getMetaLocation());
  regionOnline(HRegionInfo.FIRST_META_REGIONINFO,hsi);
  hsi=this.serverManager.getHServerInfo(this.catalogTracker.getRootLocation());
  regionOnline(HRegionInfo.ROOT_REGIONINFO,hsi);
  Map<HServerInfo,List<Pair<HRegionInfo,Result>>> deadServers=rebuildUserRegions();
  processDeadServers(deadServers);
  List<String> nodes=ZKUtil.listChildrenAndWatchForNewChildren(watcher,watcher.assignmentZNode);
  if (nodes.isEmpty()) {
    LOG.info("No regions in transition in ZK to process on failover");
    return;
  }
  LOG.info("Failed-over master needs to process " + nodes.size() + " regions in transition");
  for (  String encodedRegionName : nodes) {
    processRegionInTransition(encodedRegionName,null);
  }
}
