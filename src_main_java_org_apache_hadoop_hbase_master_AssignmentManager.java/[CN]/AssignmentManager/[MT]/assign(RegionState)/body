{
  if (!setOfflineInZooKeeper(state))   return;
  RegionPlan plan=getRegionPlan(state);
  try {
    LOG.debug("Assigning region " + state.getRegion().getRegionNameAsString() + " to "+ plan.getDestination().getServerName());
    serverManager.sendRegionOpen(plan.getDestination(),state.getRegion());
    state.update(RegionState.State.PENDING_OPEN);
  }
 catch (  Throwable t) {
    LOG.warn("Failed assignment of " + state.getRegion().getRegionNameAsString() + " to "+ plan.getDestination(),t);
    this.regionPlans.remove(state.getRegion().getEncodedName());
  }
}
