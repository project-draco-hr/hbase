{
  try {
    if (ZKAssign.transitionNodeClosed(server.getZooKeeper(),regionInfo,server.getServerName(),expectedVersion) == FAILED) {
      LOG.warn("Completed the CLOSE of a region but when transitioning from " + " CLOSING to CLOSED got a version mismatch, someone else clashed " + "so now unassigning");
      region.close();
      return;
    }
  }
 catch (  NullPointerException e) {
    LOG.warn("NPE during close -- catching and continuing...",e);
  }
catch (  KeeperException e) {
    LOG.error("Failed transitioning node from CLOSING to CLOSED",e);
    return;
  }
catch (  IOException e) {
    LOG.error("Failed to close region after failing to transition",e);
    return;
  }
}
