{
  MetricsRecordBuilder mrb=metricsCollector.addRecord(metricsName).setContext(metricsContext);
  if (rsWrap != null) {
    mrb.addGauge(Interns.info(REGION_COUNT,REGION_COUNT_DESC),rsWrap.getNumOnlineRegions()).addGauge(Interns.info(STORE_COUNT,STORE_COUNT_DESC),rsWrap.getNumStores()).addGauge(Interns.info(HLOGFILE_COUNT,HLOGFILE_COUNT_DESC),rsWrap.getNumHLogFiles()).addGauge(Interns.info(HLOGFILE_SIZE,HLOGFILE_SIZE_DESC),rsWrap.getHLogFileSize()).addGauge(Interns.info(STOREFILE_COUNT,STOREFILE_COUNT_DESC),rsWrap.getNumStoreFiles()).addGauge(Interns.info(MEMSTORE_SIZE,MEMSTORE_SIZE_DESC),rsWrap.getMemstoreSize()).addGauge(Interns.info(STOREFILE_SIZE,STOREFILE_SIZE_DESC),rsWrap.getStoreFileSize()).addGauge(Interns.info(RS_START_TIME_NAME,RS_START_TIME_DESC),rsWrap.getStartCode()).addCounter(Interns.info(TOTAL_REQUEST_COUNT,TOTAL_REQUEST_COUNT_DESC),rsWrap.getTotalRequestCount()).addCounter(Interns.info(READ_REQUEST_COUNT,READ_REQUEST_COUNT_DESC),rsWrap.getReadRequestsCount()).addCounter(Interns.info(WRITE_REQUEST_COUNT,WRITE_REQUEST_COUNT_DESC),rsWrap.getWriteRequestsCount()).addCounter(Interns.info(CHECK_MUTATE_FAILED_COUNT,CHECK_MUTATE_FAILED_COUNT_DESC),rsWrap.getCheckAndMutateChecksFailed()).addCounter(Interns.info(CHECK_MUTATE_PASSED_COUNT,CHECK_MUTATE_PASSED_COUNT_DESC),rsWrap.getCheckAndMutateChecksPassed()).addGauge(Interns.info(STOREFILE_INDEX_SIZE,STOREFILE_INDEX_SIZE_DESC),rsWrap.getStoreFileIndexSize()).addGauge(Interns.info(STATIC_INDEX_SIZE,STATIC_INDEX_SIZE_DESC),rsWrap.getTotalStaticIndexSize()).addGauge(Interns.info(STATIC_BLOOM_SIZE,STATIC_BLOOM_SIZE_DESC),rsWrap.getTotalStaticBloomSize()).addGauge(Interns.info(NUMBER_OF_MUTATIONS_WITHOUT_WAL,NUMBER_OF_MUTATIONS_WITHOUT_WAL_DESC),rsWrap.getNumMutationsWithoutWAL()).addGauge(Interns.info(DATA_SIZE_WITHOUT_WAL,DATA_SIZE_WITHOUT_WAL_DESC),rsWrap.getDataInMemoryWithoutWAL()).addGauge(Interns.info(PERCENT_FILES_LOCAL,PERCENT_FILES_LOCAL_DESC),rsWrap.getPercentFileLocal()).addGauge(Interns.info(COMPACTION_QUEUE_LENGTH,COMPACTION_QUEUE_LENGTH_DESC),rsWrap.getCompactionQueueSize()).addGauge(Interns.info(FLUSH_QUEUE_LENGTH,FLUSH_QUEUE_LENGTH_DESC),rsWrap.getFlushQueueSize()).addGauge(Interns.info(BLOCK_CACHE_FREE_SIZE,BLOCK_CACHE_FREE_DESC),rsWrap.getBlockCacheFreeSize()).addGauge(Interns.info(BLOCK_CACHE_COUNT,BLOCK_CACHE_COUNT_DESC),rsWrap.getBlockCacheCount()).addGauge(Interns.info(BLOCK_CACHE_SIZE,BLOCK_CACHE_SIZE_DESC),rsWrap.getBlockCacheSize()).addCounter(Interns.info(BLOCK_CACHE_HIT_COUNT,BLOCK_CACHE_HIT_COUNT_DESC),rsWrap.getBlockCacheHitCount()).addCounter(Interns.info(BLOCK_CACHE_MISS_COUNT,BLOCK_COUNT_MISS_COUNT_DESC),rsWrap.getBlockCacheMissCount()).addCounter(Interns.info(BLOCK_CACHE_EVICTION_COUNT,BLOCK_CACHE_EVICTION_COUNT_DESC),rsWrap.getBlockCacheEvictedCount()).addGauge(Interns.info(BLOCK_CACHE_HIT_PERCENT,BLOCK_CACHE_HIT_PERCENT_DESC),rsWrap.getBlockCacheHitPercent()).addGauge(Interns.info(BLOCK_CACHE_EXPRESS_HIT_PERCENT,BLOCK_CACHE_EXPRESS_HIT_PERCENT_DESC),rsWrap.getBlockCacheHitCachingPercent()).addCounter(Interns.info(UPDATES_BLOCKED_TIME,UPDATES_BLOCKED_DESC),rsWrap.getUpdatesBlockedTime()).addCounter(Interns.info(FLUSHED_CELLS,FLUSHED_CELLS_DESC),rsWrap.getFlushedCellsCount()).addCounter(Interns.info(COMPACTED_CELLS,COMPACTED_CELLS_DESC),rsWrap.getCompactedCellsCount()).addCounter(Interns.info(MAJOR_COMPACTED_CELLS,MAJOR_COMPACTED_CELLS_DESC),rsWrap.getMajorCompactedCellsCount()).addCounter(Interns.info(FLUSHED_CELLS_SIZE,FLUSHED_CELLS_SIZE_DESC),rsWrap.getFlushedCellsSize()).addCounter(Interns.info(COMPACTED_CELLS_SIZE,COMPACTED_CELLS_SIZE_DESC),rsWrap.getCompactedCellsSize()).addCounter(Interns.info(MAJOR_COMPACTED_CELLS_SIZE,MAJOR_COMPACTED_CELLS_SIZE_DESC),rsWrap.getMajorCompactedCellsSize()).tag(Interns.info(ZOOKEEPER_QUORUM_NAME,ZOOKEEPER_QUORUM_DESC),rsWrap.getZookeeperQuorum()).tag(Interns.info(SERVER_NAME_NAME,SERVER_NAME_DESC),rsWrap.getServerName()).tag(Interns.info(CLUSTER_ID_NAME,CLUSTER_ID_DESC),rsWrap.getClusterId());
  }
  metricsRegistry.snapshot(mrb,all);
}
