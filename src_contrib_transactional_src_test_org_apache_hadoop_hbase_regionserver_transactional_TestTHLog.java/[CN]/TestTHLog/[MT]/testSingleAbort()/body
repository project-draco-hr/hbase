{
  THLog log=new THLog(fs,dir,this.conf,null);
  THLogRecoveryManager logRecoveryMangaer=new THLogRecoveryManager(fs,regionInfo,conf);
  long transactionId=1;
  log.writeStartToLog(regionInfo,transactionId);
  log.writeUpdateToLog(regionInfo,transactionId,new Put(row1).add(family,column,val1));
  log.writeUpdateToLog(regionInfo,transactionId,new Put(row2).add(family,column,val2));
  log.writeUpdateToLog(regionInfo,transactionId,new Put(row3).add(family,column,val3));
  log.writeAbortToLog(regionInfo,transactionId);
  log.close();
  Path filename=log.computeFilename(log.getFilenum());
  Map<Long,List<KeyValue>> commits=logRecoveryMangaer.getCommitsFromLog(filename,-1,null);
  assertNull(commits);
}
