{
  cacheFlushLock.lock();
  try {
synchronized (updateLock) {
      this.closed=true;
      if (this.isAlive()) {
        this.interrupt();
      }
      if (LOG.isDebugEnabled()) {
        LOG.debug("closing log writer in " + this.dir.toString());
      }
      this.writer.close();
      updateLock.notifyAll();
    }
  }
  finally {
    cacheFlushLock.unlock();
  }
}
