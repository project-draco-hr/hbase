{
  if (!this.closed) {
    long now=System.currentTimeMillis();
synchronized (updateLock) {
      if (((now - this.optionalFlushInterval) > this.lastLogFlushTime) && this.unflushedEntries.get() > 0) {
        try {
          sync();
        }
 catch (        IOException e) {
          LOG.error("Error flushing hlog",e);
        }
      }
    }
    long took=System.currentTimeMillis() - now;
    if (took > 1000) {
      LOG.warn(Thread.currentThread().getName() + " took " + took+ "ms optional sync'ing hlog; editcount="+ this.numEntries.get());
    }
  }
}
