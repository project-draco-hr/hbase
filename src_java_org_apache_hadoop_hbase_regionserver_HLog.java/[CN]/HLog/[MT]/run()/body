{
  while (!this.closed) {
synchronized (updateLock) {
      if (((System.currentTimeMillis() - this.optionalFlushInterval) > this.lastLogFlushTime) && this.unflushedEntries > 0) {
        try {
          sync();
        }
 catch (        IOException e) {
          LOG.error("Error flushing HLog",e);
        }
      }
      try {
        updateLock.wait(this.threadWakeFrequency);
      }
 catch (      InterruptedException e) {
      }
    }
  }
}
