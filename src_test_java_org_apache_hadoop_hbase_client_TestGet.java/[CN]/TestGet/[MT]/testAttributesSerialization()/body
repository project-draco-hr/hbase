{
  Get get=new Get();
  get.setAttribute("attribute1",Bytes.toBytes("value1"));
  get.setAttribute("attribute2",Bytes.toBytes("value2"));
  get.setAttribute("attribute3",Bytes.toBytes("value3"));
  ByteArrayOutputStream byteArrayOutputStream=new ByteArrayOutputStream();
  DataOutput out=new DataOutputStream(byteArrayOutputStream);
  get.write(out);
  Get get2=new Get();
  Assert.assertTrue(get2.getAttributesMap().isEmpty());
  get2.readFields(new DataInputStream(new ByteArrayInputStream(byteArrayOutputStream.toByteArray())));
  Assert.assertNull(get2.getAttribute("absent"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value1"),get2.getAttribute("attribute1")));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value2"),get2.getAttribute("attribute2")));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value3"),get2.getAttribute("attribute3")));
  Assert.assertEquals(3,get2.getAttributesMap().size());
}
