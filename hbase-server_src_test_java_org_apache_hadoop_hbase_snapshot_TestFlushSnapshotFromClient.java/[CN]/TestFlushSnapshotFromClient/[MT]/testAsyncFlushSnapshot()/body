{
  HBaseAdmin admin=UTIL.getHBaseAdmin();
  SnapshotDescription snapshot=SnapshotDescription.newBuilder().setName("asyncSnapshot").setTable(STRING_TABLE_NAME).setType(SnapshotDescription.Type.FLUSH).build();
  admin.takeSnapshotAsync(snapshot);
  HMaster master=UTIL.getMiniHBaseCluster().getMaster();
  SnapshotTestingUtils.waitForSnapshotToComplete(master,snapshot,200);
  LOG.info(" === Async Snapshot Completed ===");
  FSUtils.logFileSystemState(UTIL.getTestFileSystem(),FSUtils.getRootDir(UTIL.getConfiguration()),LOG);
  SnapshotTestingUtils.assertOneSnapshotThatMatches(admin,snapshot);
  admin.deleteSnapshot(snapshot.getName());
  LOG.info(" === Async Snapshot Deleted ===");
  FSUtils.logFileSystemState(UTIL.getTestFileSystem(),FSUtils.getRootDir(UTIL.getConfiguration()),LOG);
  SnapshotTestingUtils.assertNoSnapshots(admin);
  LOG.info(" === Async Snapshot Test Completed ===");
}
