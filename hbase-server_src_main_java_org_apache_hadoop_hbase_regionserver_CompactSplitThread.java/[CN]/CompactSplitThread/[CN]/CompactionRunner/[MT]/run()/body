{
  Preconditions.checkNotNull(server);
  if (server.isStopped() || (region.getTableDesc() != null && !region.getTableDesc().isCompactionEnabled())) {
    return;
  }
  if (this.user == null)   doCompaction();
 else {
    try {
      user.getUGI().doAs(new PrivilegedExceptionAction<Void>(){
        @Override public Void run() throws Exception {
          doCompaction();
          return null;
        }
      }
);
    }
 catch (    InterruptedException ie) {
      Thread.currentThread().interrupt();
    }
catch (    IOException ioe) {
      LOG.error("Encountered exception while compacting",ioe);
    }
  }
}
