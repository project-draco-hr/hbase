{
  List<CompactionRequest> ret;
  if (requests == null) {
    ret=new ArrayList<CompactionRequest>(r.getStores().size());
    for (    Store s : r.getStores().values()) {
      ret.add(requestCompaction(r,s,why,p,null));
    }
  }
 else {
    ret=new ArrayList<CompactionRequest>(requests.size());
    for (    CompactionRequest request : requests) {
      requests.add(requestCompaction(r,request.getStore(),why,p,request));
    }
  }
  return ret;
}
