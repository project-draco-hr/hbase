{
  List<CompactionRequest> ret;
  if (requests == null) {
    ret=new ArrayList<CompactionRequest>(r.getStores().size());
    for (    Store s : r.getStores().values()) {
      ret.add(requestCompaction(r,s,why,p,null));
    }
  }
 else {
    ret=new ArrayList<CompactionRequest>(requests.size());
    for (    Pair<CompactionRequest,Store> pair : requests) {
      ret.add(requestCompaction(r,pair.getSecond(),why,p,pair.getFirst()));
    }
  }
  return ret;
}
