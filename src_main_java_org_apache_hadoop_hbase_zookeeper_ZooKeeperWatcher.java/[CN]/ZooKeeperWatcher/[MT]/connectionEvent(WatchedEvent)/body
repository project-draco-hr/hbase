{
switch (event.getState()) {
case SyncConnected:
    LOG.debug(this.identifier + " connected");
  long finished=System.currentTimeMillis() + this.conf.getLong("hbase.zookeeper.watcher.sync.connected.wait",2000);
while (System.currentTimeMillis() < finished) {
  Threads.sleep(1);
  if (this.zooKeeper != null)   break;
}
if (this.zooKeeper == null) {
LOG.error("ZK is null on connection event -- see stack trace " + "for the stack trace when constructor was called on this zkw",this.constructorCaller);
throw new NullPointerException("ZK is null");
}
this.identifier=this.identifier + "-0x" + Long.toHexString(this.zooKeeper.getSessionId());
break;
case Disconnected:
LOG.info(prefix("Received Disconnected from ZooKeeper, ignoring"));
break;
case Expired:
String msg=prefix(this.identifier + " received expired from " + "ZooKeeper, aborting");
if (this.abortable != null) this.abortable.abort(msg,new KeeperException.SessionExpiredException());
break;
}
}
