{
  RetryCounter retryCounter=retryCounterFactory.create();
  while (true) {
    try {
      return zk.exists(path,watch);
    }
 catch (    KeeperException e) {
switch (e.code()) {
case CONNECTIONLOSS:
case OPERATIONTIMEOUT:
        LOG.warn("Possibly transient ZooKeeper exception: " + e);
      if (!retryCounter.shouldRetry()) {
        LOG.error("ZooKeeper exists failed after " + retryCounter.getMaxRetries() + " retries");
        throw e;
      }
    break;
default :
  throw e;
}
}
LOG.info("The " + retryCounter.getAttemptTimes() + " times to retry "+ "ZooKeeper after sleeping "+ retryIntervalMillis+ " ms");
retryCounter.sleepUntilNextRetry();
retryCounter.useRetry();
}
}
