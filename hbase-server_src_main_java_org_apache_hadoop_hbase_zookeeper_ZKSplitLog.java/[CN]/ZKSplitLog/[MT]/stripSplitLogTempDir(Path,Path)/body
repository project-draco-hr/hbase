{
  int skipDepth=rootdir.depth() + 2;
  List<String> components=new ArrayList<String>(10);
  do {
    components.add(file.getName());
    file=file.getParent();
  }
 while (file.depth() > skipDepth);
  Path ret=rootdir;
  for (int i=components.size() - 1; i >= 0; i--) {
    ret=new Path(ret,components.get(i));
  }
  return ret;
}
