{
  final TableName tableName=TableName.valueOf("testModifyExistingColumnFamily");
  final String cf2="cf2";
  final HColumnDescriptor columnDescriptor=new HColumnDescriptor(cf2);
  int oldBlockSize=columnDescriptor.getBlocksize();
  int newBlockSize=2 * oldBlockSize;
  final ProcedureExecutor<MasterProcedureEnv> procExec=getMasterProcedureExecutor();
  MasterProcedureTestingUtility.createTable(procExec,tableName,null,"f1");
  columnDescriptor.setBlocksize(newBlockSize);
  long procId1=procExec.submitProcedure(new ModifyColumnFamilyProcedure(procExec.getEnvironment(),tableName,columnDescriptor));
  ProcedureTestingUtility.waitProcedure(procExec,procId1);
  ProcedureResult result=procExec.getResult(procId1);
  assertTrue(result.isFailed());
  LOG.debug("Modify failed with exception: " + result.getException());
  assertTrue(result.getException().getCause() instanceof InvalidFamilyOperationException);
}
