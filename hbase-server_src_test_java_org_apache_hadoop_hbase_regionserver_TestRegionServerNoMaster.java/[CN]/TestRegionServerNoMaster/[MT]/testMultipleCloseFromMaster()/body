{
  ZKAssign.createNodeClosing(HTU.getZooKeeperWatcher(),hri,getRS().getServerName());
  for (int i=0; i < 10; i++) {
    AdminProtos.CloseRegionRequest crr=RequestConverter.buildCloseRegionRequest(getRS().getServerName(),regionName,0,null,true);
    try {
      AdminProtos.CloseRegionResponse responseClose=getRS().closeRegion(null,crr);
      Assert.assertEquals("The first request should succeeds",0,i);
      Assert.assertTrue("request " + i + " failed",responseClose.getClosed() || responseClose.hasClosed());
    }
 catch (    ServiceException se) {
      Assert.assertTrue("The next queries should throw an exception.",i > 0);
    }
  }
  checkRegionIsClosed();
  Assert.assertTrue(ZKAssign.deleteClosedNode(HTU.getZooKeeperWatcher(),hri.getEncodedName(),getRS().getServerName()));
  reopenRegion();
}
