{
  Assert.assertTrue(getRS().getRegion(regionName).isAvailable());
  try {
    ServerName sn=getRS().getServerName();
    MetaEditor.updateRegionLocation(getRS().catalogTracker,hri,sn,getRS().getRegion(regionName).getOpenSeqNum());
    getRS().regionsInTransitionInRS.put(hri.getEncodedNameAsBytes(),Boolean.FALSE);
    AdminProtos.OpenRegionRequest orr=RequestConverter.buildOpenRegionRequest(sn,hri,0,null);
    getRS().rpcServices.openRegion(null,orr);
    Assert.fail("The closing region should not be opened");
  }
 catch (  ServiceException se) {
    Assert.assertTrue("The region should be already in transition",se.getCause() instanceof RegionAlreadyInTransitionException);
  }
 finally {
    getRS().regionsInTransitionInRS.remove(hri.getEncodedNameAsBytes());
  }
}
