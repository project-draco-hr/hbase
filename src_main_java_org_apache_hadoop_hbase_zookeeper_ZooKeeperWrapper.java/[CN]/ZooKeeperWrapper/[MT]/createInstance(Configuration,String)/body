{
  if (getInstance(name) != null) {
    return getInstance(name);
  }
  ZooKeeperWrapper.createLock.lock();
  try {
    if (getInstance(name) == null) {
      try {
        ZooKeeperWrapper instance=new ZooKeeperWrapper(conf,name);
        INSTANCES.put(name,instance);
      }
 catch (      Exception e) {
        LOG.error("<" + name + ">"+ "Error creating a ZooKeeperWrapper "+ e);
      }
    }
  }
  finally {
    createLock.unlock();
  }
  return getInstance(name);
}
