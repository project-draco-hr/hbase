{
  String znode=getZNode(getRegionInTransitionZNode(),regionName);
  if (!exists(znode,true)) {
    LOG.error("Cannot update " + znode + " - node does not exist");
    return;
  }
  Stat stat=new Stat();
  byte[] oldData=null;
  try {
    oldData=readZNode(znode,stat);
  }
 catch (  IOException e) {
    LOG.error("Error reading data for " + znode);
  }
  if (oldData == null) {
    LOG.debug("While updating UNASSIGNED region " + regionName + " - node exists with no data");
  }
 else {
    HBaseEventType curState=HBaseEventType.fromByte(oldData[0]);
    HBaseEventType newState=HBaseEventType.fromByte(data[0]);
    if (curState == newState) {
      LOG.debug("No need to update UNASSIGNED region " + regionName + " as it already exists in state = "+ curState);
      return;
    }
    LOG.debug("UNASSIGNED region " + regionName + " is currently in state = "+ curState+ ", updating it to "+ newState);
  }
synchronized (unassignedZNodesWatched) {
    unassignedZNodesWatched.add(znode);
    try {
      writeZNode(znode,data,-1,true);
    }
 catch (    IOException e) {
      LOG.error("Error writing data for " + znode + ", could not update state to "+ (HBaseEventType.fromByte(data[0])));
    }
  }
}
