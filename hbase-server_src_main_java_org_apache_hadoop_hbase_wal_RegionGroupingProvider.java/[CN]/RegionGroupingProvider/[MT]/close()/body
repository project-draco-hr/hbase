{
  IOException failure=null;
synchronized (providers) {
    for (    WALProvider provider : providers) {
      try {
        provider.close();
      }
 catch (      IOException exception) {
        LOG.error("Problem closing provider '" + provider + "': "+ exception.getMessage());
        LOG.debug("Details of problem shutting down provider '" + provider + "'",exception);
        failure=exception;
      }
    }
  }
  if (failure != null) {
    throw failure;
  }
}
