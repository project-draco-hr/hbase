{
  final int numRegions=3;
  final int numReplica=1;
  final TableName table=TableName.valueOf("singleReplicaTable");
  try {
    HTableDescriptor desc=new HTableDescriptor(table);
    desc.setRegionReplication(numReplica);
    desc.addFamily(new HColumnDescriptor("family"));
    admin.createTable(desc,Bytes.toBytes("A"),Bytes.toBytes("Z"),numRegions);
    validateNumberOfRowsInMeta(table,numRegions,admin.getConnection());
    List<HRegionInfo> hris=MetaTableAccessor.getTableRegions(admin.getConnection(),table);
    assert(hris.size() == numRegions * numReplica);
  }
  finally {
    admin.disableTable(table);
    admin.deleteTable(table);
  }
}
