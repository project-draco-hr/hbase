{
  if (!actualBuffer.equals(expectedBuffer)) {
    int prefix=0;
    int minLimit=Math.min(expectedBuffer.limit(),actualBuffer.limit());
    while (prefix < minLimit && expectedBuffer.get(prefix) == actualBuffer.get(prefix)) {
      prefix++;
    }
    fail(String.format("Content mismath for compression %s, encoding %s, " + "pread %s, commonPrefix %d, expected %s, got %s",compression,encoding,pread,prefix,nextBytesToStr(expectedBuffer,prefix),nextBytesToStr(actualBuffer,prefix)));
  }
}
