{
  long period=Long.MAX_VALUE;
  Path snapshotDir=SnapshotDescriptionUtils.getSnapshotsDir(rootDir);
  SnapshotFileCache cache=new SnapshotFileCache(fs,rootDir,period,10000000,"test-snapshot-file-cache-refresh",new SnapshotFiles());
  Path snapshot=new Path(snapshotDir,"snapshot");
  Path region=new Path(snapshot,"7e91021");
  Path family=new Path(region,"fam");
  Path file1=new Path(family,"file1");
  fs.create(file1);
  SnapshotDescription desc=SnapshotDescription.newBuilder().setName("working").build();
  snapshot=SnapshotDescriptionUtils.getWorkingSnapshotDir(desc,rootDir);
  region=new Path(snapshot,"7e91021");
  family=new Path(region,"fam");
  Path file2=new Path(family,"file2");
  fs.create(file2);
  FSUtils.logFileSystemState(fs,rootDir,LOG);
  assertTrue("Cache didn't find:" + file1,cache.contains(file1.getName()));
  assertTrue("Cache didn't find:" + file2,cache.contains(file2.getName()));
}
