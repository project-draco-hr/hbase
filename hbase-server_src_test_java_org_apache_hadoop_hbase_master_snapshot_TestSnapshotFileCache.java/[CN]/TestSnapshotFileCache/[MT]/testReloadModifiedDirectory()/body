{
  long period=Long.MAX_VALUE;
  Path snapshotDir=SnapshotDescriptionUtils.getSnapshotsDir(rootDir);
  SnapshotFileCache cache=new SnapshotFileCache(fs,rootDir,period,10000000,"test-snapshot-file-cache-refresh",null);
  Path snapshot=new Path(snapshotDir,"snapshot");
  Path region=new Path(snapshot,"region1");
  Path family=new Path(region,"fam");
  Path file1=new Path(family,"file1");
  Path file2=new Path(family,"file2");
  fs.create(file1);
  fs.create(file2);
  FSUtils.logFileSystemState(fs,rootDir,LOG);
  assertTrue("Cache didn't find " + file1,cache.contains(file1.getName()));
  fs.delete(snapshot,true);
  Path file3=new Path(family,"new_file");
  fs.create(file3);
  FSUtils.logFileSystemState(fs,rootDir,LOG);
  assertTrue("Cache didn't find new file:" + file3,cache.contains(file3.getName()));
}
