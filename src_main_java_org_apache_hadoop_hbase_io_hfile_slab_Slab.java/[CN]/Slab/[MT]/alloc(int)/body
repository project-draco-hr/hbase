{
  int newCapacity=Preconditions.checkPositionIndex(bufferSize,blockSize);
  ByteBuffer returnedBuffer=buffers.poll();
  while (returnedBuffer == null) {
    returnedBuffer=buffers.poll();
  }
  returnedBuffer.clear().limit(newCapacity);
  return returnedBuffer;
}
