{
  BatchUpdate bu=new BatchUpdate(getName());
  bu.put(getName(),getName().getBytes());
  byte[] b=Writables.getBytes(bu);
  BatchUpdate bubu=(BatchUpdate)Writables.getWritable(b,new BatchUpdate());
  assertTrue(Bytes.equals(bu.getRow(),bubu.getRow()));
  int firstCount=0;
  for (  BatchOperation bo : bubu) {
    firstCount++;
  }
  BatchUpdate bububu=(BatchUpdate)Writables.getWritable(b,bubu);
  assertTrue(Bytes.equals(bu.getRow(),bububu.getRow()));
  int secondCount=0;
  for (  BatchOperation bo : bububu) {
    secondCount++;
  }
  assertEquals(firstCount,secondCount);
}
