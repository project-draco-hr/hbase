{
  final Text testName=new Text(getName());
  BatchUpdate bu=new BatchUpdate(testName);
  bu.put(testName,testName.getBytes());
  byte[] b=Writables.getBytes(bu);
  BatchUpdate bubu=(BatchUpdate)Writables.getWritable(b,new BatchUpdate());
  assertTrue(bu.getRow().equals(bubu.getRow()));
  int firstCount=0;
  for (  BatchOperation bo : bubu) {
    firstCount++;
  }
  BatchUpdate bububu=(BatchUpdate)Writables.getWritable(b,bubu);
  assertTrue(bu.getRow().equals(bububu.getRow()));
  int secondCount=0;
  for (  BatchOperation bo : bububu) {
    secondCount++;
  }
  assertEquals(firstCount,secondCount);
}
