{
  Map<ServerName,List<HRegionInfo>> serverMap=createServerMap(numNodes,numRegions,numRegionsPerServer,numTables);
  List<ServerAndLoad> list=convertToList(serverMap);
  LOG.info("Mock Cluster : " + printMock(list) + " "+ printStats(list));
  List<RegionPlan> plans=loadBalancer.balanceCluster(serverMap);
  assertNotNull(plans);
  if (assertFullyBalanced) {
    List<ServerAndLoad> balancedCluster=reconcile(list,plans,serverMap);
    LOG.info("Mock Balance : " + printMock(balancedCluster));
    assertClusterAsBalanced(balancedCluster);
    List<RegionPlan> secondPlans=loadBalancer.balanceCluster(serverMap);
    assertNull(secondPlans);
  }
}
