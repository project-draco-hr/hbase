{
  Procedure proc=new TestMultiStepProcedure();
  long procId=ProcedureTestingUtility.submitAndWait(procExecutor,proc);
  assertFalse(procExecutor.isRunning());
  restart();
  waitProcedure(procId);
  ProcedureTestingUtility.assertProcNotYetCompleted(procExecutor,procId);
  assertFalse(procExecutor.isRunning());
  restart();
  waitProcedure(procId);
  ProcedureTestingUtility.assertProcNotYetCompleted(procExecutor,procId);
  assertFalse(procExecutor.isRunning());
  procSleepInterval=2500;
  restart();
  assertTrue(procExecutor.abort(procId));
  waitProcedure(procId);
  assertFalse(procExecutor.isRunning());
  restart();
  waitProcedure(procId);
  ProcedureTestingUtility.assertProcNotYetCompleted(procExecutor,procId);
  assertFalse(procExecutor.isRunning());
  restart();
  waitProcedure(procId);
  ProcedureTestingUtility.assertProcNotYetCompleted(procExecutor,procId);
  assertFalse(procExecutor.isRunning());
  restart();
  waitProcedure(procId);
  ProcedureInfo result=procExecutor.getResult(procId);
  ProcedureTestingUtility.assertIsAbortException(result);
}
