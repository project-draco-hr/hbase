{
  ByteBuffer bb1=ByteBuffer.allocateDirect(10);
  ByteBuffer bb2=ByteBuffer.allocateDirect(10);
  MultiByteBuffer multi=new MultiByteBuffer(bb1,bb2);
  long l1=1234L, l2=100L;
  multi.putLong(l1);
  multi.putLong(l2);
  multi.rewind();
  ByteBuffer sub=multi.asSubBuffer(Bytes.SIZEOF_LONG);
  assertTrue(bb1 == sub);
  assertEquals(l1,ByteBufferUtils.toLong(sub,sub.position()));
  multi.skip(Bytes.SIZEOF_LONG);
  sub=multi.asSubBuffer(Bytes.SIZEOF_LONG);
  assertFalse(bb1 == sub);
  assertFalse(bb2 == sub);
  assertEquals(l2,ByteBufferUtils.toLong(sub,sub.position()));
  multi.rewind();
  Pair<ByteBuffer,Integer> p=multi.asSubBuffer(8,Bytes.SIZEOF_LONG);
  assertFalse(bb1 == p.getFirst());
  assertFalse(bb2 == p.getFirst());
  assertEquals(0,p.getSecond().intValue());
  assertEquals(l2,ByteBufferUtils.toLong(sub,p.getSecond()));
}
