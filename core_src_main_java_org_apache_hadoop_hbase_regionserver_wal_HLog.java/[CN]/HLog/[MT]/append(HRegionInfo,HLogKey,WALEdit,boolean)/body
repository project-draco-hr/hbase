{
  if (this.closed) {
    throw new IOException("Cannot append; log is closed");
  }
  byte[] regionName=regionInfo.getRegionName();
synchronized (updateLock) {
    long seqNum=obtainSeqNum();
    logKey.setLogSeqNum(seqNum);
    this.lastSeqWritten.putIfAbsent(regionName,Long.valueOf(seqNum));
    doWrite(regionInfo,logKey,logEdit);
    this.unflushedEntries.incrementAndGet();
    this.numEntries.incrementAndGet();
  }
  this.sync(isMetaRegion);
}
