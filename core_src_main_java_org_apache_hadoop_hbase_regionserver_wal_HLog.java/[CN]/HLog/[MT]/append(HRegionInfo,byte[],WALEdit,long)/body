{
  byte[] regionName=info.getRegionName();
  if (this.closed) {
    throw new IOException("Cannot append; log is closed");
  }
  long seqNum=obtainSeqNum();
synchronized (this.updateLock) {
    this.lastSeqWritten.putIfAbsent(regionName,seqNum);
    int counter=0;
    HLogKey logKey=makeKey(regionName,tableName,seqNum,now);
    doWrite(info,logKey,edits);
    this.numEntries.incrementAndGet();
    this.unflushedEntries.incrementAndGet();
  }
  this.sync(info.isMetaRegion());
  if (this.editsSize.get() > this.logrollsize) {
    requestLogRoll();
  }
}
