{
  if (unflushedEntries.get() == 0) {
    return;
  }
  lock.lock();
  try {
    if (syncerShuttingDown) {
      LOG.warn(getName() + " was shut down while waiting for sync");
      return;
    }
    if (syncerShuttingDown) {
      LOG.warn(getName() + " was shut down while waiting for sync");
      return;
    }
    if (force) {
      forceSync=true;
    }
    queueEmpty.signal();
    syncDone.await();
  }
 catch (  InterruptedException e) {
    LOG.debug(getName() + " was interrupted while waiting for sync",e);
  }
 finally {
    lock.unlock();
  }
}
