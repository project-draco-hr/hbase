{
  byte[] ROW=Bytes.toBytes("testRow");
  byte[] TABLE=Bytes.toBytes(getClass().getName());
  byte[] A=Bytes.toBytes("A");
  byte[][] FAMILIES=new byte[][]{A};
  Configuration conf=HBaseConfiguration.create();
  HRegion region=initHRegion(TABLE,getClass().getName(),conf,FAMILIES);
  RegionCoprocessorHost h=region.getCoprocessorHost();
  h.load(NoDataFromFlush.class,Coprocessor.PRIORITY_HIGHEST,conf);
  h.load(EmptyRegionObsever.class,Coprocessor.PRIORITY_USER,conf);
  Put put=new Put(ROW);
  put.add(A,A,A);
  region.put(put);
  region.flushcache();
  Get get=new Get(ROW);
  Result r=region.get(get);
  assertNull("Got an unexpected number of rows - no data should be returned with the NoDataFromScan coprocessor. Found: " + r,r.list());
}
