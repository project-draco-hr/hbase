{
  AccessTestAction putWithReservedTag=new AccessTestAction(){
    @Override public Object run() throws Exception {
      HTable t=new HTable(conf,TEST_TABLE.getTableName());
      try {
        KeyValue kv=new KeyValue(TEST_ROW,TEST_FAMILY,TEST_QUALIFIER,HConstants.LATEST_TIMESTAMP,HConstants.EMPTY_BYTE_ARRAY,new Tag[]{new Tag(AccessControlLists.ACL_TAG_TYPE,ProtobufUtil.toUsersAndPermissions(USER_OWNER.getShortName(),new Permission(Permission.Action.READ)).toByteArray())});
        t.put(new Put(TEST_ROW).add(kv));
      }
  finally {
        t.close();
      }
      return null;
    }
  }
;
  verifyAllowed(putWithReservedTag,User.getCurrent());
  verifyDenied(putWithReservedTag,USER_OWNER,USER_ADMIN,USER_CREATE,USER_RW,USER_RO);
}
