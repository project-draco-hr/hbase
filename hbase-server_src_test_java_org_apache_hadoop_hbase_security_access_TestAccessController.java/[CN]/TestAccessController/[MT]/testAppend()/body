{
  PrivilegedExceptionAction appendAction=new PrivilegedExceptionAction(){
    public Object run() throws Exception {
      byte[] row=Bytes.toBytes("random_row");
      byte[] qualifier=Bytes.toBytes("q");
      Put put=new Put(row);
      put.add(TEST_FAMILY,qualifier,Bytes.toBytes(1));
      Append append=new Append(row);
      append.add(TEST_FAMILY,qualifier,Bytes.toBytes(2));
      HTable t=new HTable(conf,TEST_TABLE);
      try {
        t.put(put);
        t.append(append);
      }
  finally {
        t.close();
      }
      return null;
    }
  }
;
  verifyAllowed(appendAction,SUPERUSER,USER_ADMIN,USER_OWNER,USER_RW);
  verifyDenied(appendAction,USER_CREATE,USER_RO,USER_NONE);
}
