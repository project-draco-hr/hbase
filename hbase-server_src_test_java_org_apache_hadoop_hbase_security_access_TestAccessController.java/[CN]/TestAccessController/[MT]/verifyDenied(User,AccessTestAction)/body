{
  for (  AccessTestAction action : actions) {
    try {
      Object obj=user.runAs(action);
      if (obj != null && obj instanceof List<?>) {
        List<?> results=(List<?>)obj;
        if (results != null && !results.isEmpty()) {
          fail("Expected no results for user '" + user.getShortName() + "'");
        }
      }
    }
 catch (    Exception e) {
      boolean isAccessDeniedException=false;
      if (e instanceof RetriesExhaustedWithDetailsException) {
        for (        Throwable ex : ((RetriesExhaustedWithDetailsException)e).getCauses()) {
          if (ex instanceof AccessDeniedException) {
            isAccessDeniedException=true;
            break;
          }
        }
      }
 else {
        Throwable ex=e;
        do {
          if (ex instanceof AccessDeniedException) {
            isAccessDeniedException=true;
            break;
          }
        }
 while ((ex=ex.getCause()) != null);
      }
      if (!isAccessDeniedException) {
        fail("Not receiving AccessDeniedException for user '" + user.getShortName() + "'");
      }
    }
  }
}
