{
  try {
    while (true) {
      try {
        hbaseCluster=new LocalHBaseCluster(conf,nRegionNodes,MiniHBaseCluster.MiniHBaseClusterMaster.class,MiniHBaseCluster.MiniHBaseClusterRegionServer.class);
        hbaseCluster.startup();
      }
 catch (      BindException e) {
        int port=conf.getInt(MASTER_PORT,DEFAULT_MASTER_PORT);
        LOG.info("Failed binding Master to port: " + port,e);
        port++;
        conf.setInt(MASTER_PORT,port);
        continue;
      }
      break;
    }
  }
 catch (  IOException e) {
    shutdown();
    throw e;
  }
}
