{
  DataOutputBuffer dob=new DataOutputBuffer();
  dob.writeUTF(methodName);
  dob.writeInt(1);
  Scan scan=new Scan();
  HbaseObjectWritable.writeObject(dob,scan,Scan.class,new Configuration());
  dob.writeUTF("org.apache.hadoop.hbase.client.Scan");
  Bytes.writeByteArray(dob,new byte[]{'a'});
  dob.writeUTF(protocolName);
  DataInputBuffer dib=new DataInputBuffer();
  dib.reset(dob.getData(),dob.getLength());
  Exec after=new Exec();
  after.setConf(HBaseConfiguration.create());
  after.readFields(dib);
  assertEquals(after.getProtocolName(),protocolName);
  assertEquals(after.getMethodName(),methodName);
}
