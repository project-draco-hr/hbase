{
  Configuration c=HBaseConfiguration.create(conf);
  User user=HBaseTestingUtility.getDifferentUser(c,".hfs." + index++);
  JVMClusterUtil.MasterThread t=null;
  try {
    t=hbaseCluster.addMaster(c,hbaseCluster.getMasters().size(),user);
    t.start();
    t.waitForServerOnline();
  }
 catch (  InterruptedException ie) {
    throw new IOException("Interrupted executing UserGroupInformation.doAs()",ie);
  }
  return t;
}
