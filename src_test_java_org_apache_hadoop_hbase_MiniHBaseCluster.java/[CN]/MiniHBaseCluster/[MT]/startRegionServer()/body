{
  User rsUser=HBaseTestingUtility.getDifferentUser(conf,".hfs." + index++);
  JVMClusterUtil.RegionServerThread t=null;
  try {
    t=rsUser.runAs(new PrivilegedExceptionAction<JVMClusterUtil.RegionServerThread>(){
      public JVMClusterUtil.RegionServerThread run() throws Exception {
        return hbaseCluster.addRegionServer();
      }
    }
);
    t.start();
    t.waitForServerOnline();
  }
 catch (  InterruptedException ie) {
    throw new IOException("Interrupted executing UserGroupInformation.doAs()",ie);
  }
  return t;
}
