{
  while (isRunning()) {
    Procedure proc=waitingTimeout.poll();
    if (proc == null)     continue;
    if (proc.getTimeRemaining() > 100) {
      waitingTimeout.add(proc);
      continue;
    }
    if (proc instanceof ProcedureInMemoryChore) {
      if (proc.isRunnable()) {
        try {
          ((ProcedureInMemoryChore)proc).periodicExecute(getEnvironment());
        }
 catch (        Throwable e) {
          LOG.error("Ignoring CompletedProcedureCleaner exception: " + e.getMessage(),e);
        }
        proc.setStartTime(EnvironmentEdgeManager.currentTime());
        if (proc.isRunnable())         waitingTimeout.add(proc);
      }
      continue;
    }
    if (proc.setTimeoutFailure()) {
      long rootProcId=Procedure.getRootProcedureId(procedures,proc);
      RootProcedureState procStack=rollbackStack.get(rootProcId);
      procStack.abort();
      store.update(proc);
      runnables.addFront(proc);
      continue;
    }
  }
}
