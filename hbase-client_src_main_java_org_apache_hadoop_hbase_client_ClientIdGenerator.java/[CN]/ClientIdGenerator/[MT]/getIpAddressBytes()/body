{
  try {
    Enumeration<NetworkInterface> interfaces=NetworkInterface.getNetworkInterfaces();
    while (interfaces.hasMoreElements()) {
      NetworkInterface current=interfaces.nextElement();
      if (!current.isUp() || current.isLoopback() || current.isVirtual())       continue;
      Enumeration<InetAddress> addresses=current.getInetAddresses();
      while (addresses.hasMoreElements()) {
        InetAddress addr=addresses.nextElement();
        if (addr.isLoopbackAddress())         continue;
        if (addr instanceof Inet4Address || addr instanceof Inet6Address) {
          return addr.getAddress();
        }
      }
    }
  }
 catch (  IOException ex) {
    LOG.warn("Failed to get IP address bytes",ex);
  }
  return new byte[0];
}
