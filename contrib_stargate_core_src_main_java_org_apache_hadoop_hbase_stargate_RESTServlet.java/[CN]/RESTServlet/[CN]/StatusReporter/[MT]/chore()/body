{
  if (wrapper != null)   try {
    StatusModel model=new StatusModel();
    model.requests=(long)metrics.getRequests();
    for (    Pair<String,Integer> e : connectors) {
      model.addConnector(e.getFirst(),e.getSecond());
    }
    ByteArrayOutputStream os=new ByteArrayOutputStream();
    marshaller.marshallToJSON(model,os);
    ensureExists(znode,CreateMode.EPHEMERAL,os.toByteArray());
  }
 catch (  Exception e) {
    LOG.error(StringUtils.stringifyException(e));
  }
}
