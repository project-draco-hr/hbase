{
  HRegionInfo[] newRegions=ModifyRegionUtils.createHRegionInfos(RSGROUP_TABLE_DESC,null);
  ProcedurePrepareLatch latch=ProcedurePrepareLatch.createLatch();
  masterServices.getMasterProcedureExecutor().submitProcedure(new CreateTableProcedure(masterServices.getMasterProcedureExecutor().getEnvironment(),RSGROUP_TABLE_DESC,newRegions,latch),HConstants.NO_NONCE,HConstants.NO_NONCE);
  latch.await();
  int tries=600;
  while (masterServices.getAssignmentManager().getRegionStates().getRegionServerOfRegion(newRegions[0]) == null && tries > 0) {
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException e) {
      throw new IOException("Wait interrupted",e);
    }
    tries--;
  }
  if (tries <= 0) {
    throw new IOException("Failed to create group table.");
  }
}
