{
  Set<TableName> allTables=new HashSet<TableName>();
  List<String> children=ZKUtil.listChildrenNoWatch(watcher,watcher.tableZNode);
  if (children == null)   return allTables;
  for (  String child : children) {
    TableName tableName=TableName.valueOf(child);
    ZooKeeperProtos.Table.State state;
    try {
      state=getTableState(watcher,tableName);
    }
 catch (    InterruptedException e) {
      throw new InterruptedIOException();
    }
    for (    ZooKeeperProtos.Table.State expectedState : states) {
      if (state == expectedState) {
        allTables.add(tableName);
        break;
      }
    }
  }
  return allTables;
}
