{
  stateManager.start();
  long startTime=EnvironmentEdgeManager.currentTime();
  int timeout=masterServices.getConfiguration().getInt(NS_AUDITOR_INIT_TIMEOUT,DEFAULT_NS_AUDITOR_INIT_TIMEOUT);
  try {
    while (!stateManager.isInitialized()) {
      if (EnvironmentEdgeManager.currentTime() - startTime + 1000 > timeout) {
        throw new HBaseIOException("Timed out waiting for namespace auditor to be initialized.");
      }
      Thread.sleep(1000);
    }
  }
 catch (  InterruptedException e) {
    throw (InterruptedIOException)new InterruptedIOException().initCause(e);
  }
  LOG.info("NamespaceAuditor started.");
}
