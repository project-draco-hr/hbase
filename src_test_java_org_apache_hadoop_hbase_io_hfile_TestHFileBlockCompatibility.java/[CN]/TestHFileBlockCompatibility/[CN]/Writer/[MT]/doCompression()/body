{
  if (compressAlgo != NONE) {
    compressedByteStream.reset();
    compressedByteStream.write(DUMMY_HEADER);
    compressionStream.resetState();
    compressionStream.write(uncompressedBytesWithHeader,HEADER_SIZE,uncompressedBytesWithHeader.length - HEADER_SIZE);
    compressionStream.flush();
    compressionStream.finish();
    onDiskBytesWithHeader=compressedByteStream.toByteArray();
    putHeader(onDiskBytesWithHeader,0,onDiskBytesWithHeader.length,uncompressedBytesWithHeader.length);
  }
 else {
    onDiskBytesWithHeader=uncompressedBytesWithHeader;
  }
}
