{
  realUser.doAs(new PrivilegedAction<Object>(){
    @Override public Object run(){
      try {
        setupServer();
        tserver.serve();
      }
 catch (      Exception e) {
        LOG.fatal("Cannot run ThriftServer",e);
        System.exit(-1);
      }
      return null;
    }
  }
);
}
