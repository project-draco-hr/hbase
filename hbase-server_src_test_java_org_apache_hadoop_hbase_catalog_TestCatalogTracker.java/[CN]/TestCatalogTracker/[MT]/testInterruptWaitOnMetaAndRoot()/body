{
  final ClientProtocol client=Mockito.mock(ClientProtocol.class);
  HConnection connection=mockConnection(null,client);
  try {
    Mockito.when(client.get((RpcController)Mockito.any(),(GetRequest)Mockito.any())).thenReturn(GetResponse.newBuilder().build());
    final CatalogTracker ct=constructAndStartCatalogTracker(connection);
    ServerName hsa=ct.getRootLocation();
    Assert.assertNull(hsa);
    ServerName meta=ct.getMetaLocation();
    Assert.assertNull(meta);
    Thread t=new Thread(){
      @Override public void run(){
        try {
          ct.waitForMeta();
        }
 catch (        InterruptedException e) {
          throw new RuntimeException("Interrupted",e);
        }
      }
    }
;
    t.start();
    while (!t.isAlive())     Threads.sleep(1);
    Threads.sleep(1);
    assertTrue(t.isAlive());
    ct.stop();
    t.join();
  }
  finally {
    HConnectionManager.deleteConnection(UTIL.getConfiguration());
  }
}
