{
  final ClientProtocol implementation=Mockito.mock(ClientProtocol.class);
  HConnection connection=mockConnection(null,implementation);
  try {
    Mockito.when(implementation.get((RpcController)Mockito.any(),(GetRequest)Mockito.any())).thenThrow(new ServiceException(ex));
    final CatalogTracker ct=constructAndStartCatalogTracker(connection);
    try {
      RootRegionTracker.setRootLocation(this.watcher,SN);
      long timeout=UTIL.getConfiguration().getLong("hbase.catalog.verification.timeout",1000);
      Assert.assertFalse(ct.verifyMetaRegionLocation(timeout));
    }
  finally {
      RootRegionTracker.deleteRootLocation(this.watcher);
    }
  }
  finally {
    HConnectionManager.deleteConnection(UTIL.getConfiguration(),true);
  }
}
