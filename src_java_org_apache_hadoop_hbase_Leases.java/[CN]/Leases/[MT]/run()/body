{
  while (!stopRequested || (stopRequested && leaseQueue.size() > 0)) {
    Lease lease=null;
    try {
      lease=leaseQueue.poll(leaseCheckFrequency,TimeUnit.MILLISECONDS);
    }
 catch (    InterruptedException e) {
      continue;
    }
catch (    ConcurrentModificationException e) {
      continue;
    }
    if (lease == null) {
      continue;
    }
    LeaseListener listener=null;
synchronized (leaseQueue) {
      String leaseName=lease.getLeaseName();
      leases.remove(leaseName);
      listener=listeners.remove(leaseName);
      if (listener == null) {
        LOG.error("lease listener is null for lease " + leaseName);
        continue;
      }
    }
    listener.leaseExpired();
  }
  close();
}
