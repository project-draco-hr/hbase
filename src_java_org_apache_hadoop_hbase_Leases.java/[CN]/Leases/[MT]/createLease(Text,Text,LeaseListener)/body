{
synchronized (leases) {
synchronized (sortedLeases) {
      Lease lease=new Lease(holderId,resourceId,listener);
      Text leaseId=lease.getLeaseId();
      if (leases.get(leaseId) != null) {
        throw new IOException("Impossible state for createLease(): Lease " + getLeaseName(holderId,resourceId) + " is still held.");
      }
      leases.put(leaseId,lease);
      sortedLeases.add(lease);
    }
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("Created lease " + getLeaseName(holderId,resourceId));
  }
}
