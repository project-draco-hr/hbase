{
  useCoordinationForAssignment=server == null ? true : ConfigUtil.useZKForAssignment(server.getConfiguration());
  if (rmd == null) {
    rmd=server != null && server.getCoordinatedStateManager() != null ? ((BaseCoordinatedStateManager)server.getCoordinatedStateManager()).getRegionMergeCoordination().getDefaultDetails() : null;
  }
  if (rsCoprocessorHost == null) {
    rsCoprocessorHost=server != null ? ((HRegionServer)server).getRegionServerCoprocessorHost() : null;
  }
  HRegion mergedRegion=createMergedRegion(server,services);
  if (rsCoprocessorHost != null) {
    rsCoprocessorHost.postMergeCommit(this.region_a,this.region_b,mergedRegion);
  }
  return stepsAfterPONR(server,services,mergedRegion);
}
