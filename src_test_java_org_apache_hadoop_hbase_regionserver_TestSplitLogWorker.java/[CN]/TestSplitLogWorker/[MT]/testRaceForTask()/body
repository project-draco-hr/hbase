{
  LOG.info("testRaceForTask");
  ZKSplitLog.Counters.resetCounters();
  zkw.getZooKeeper().create(ZKSplitLog.getEncodedNodeName(zkw,"trft"),TaskState.TASK_UNASSIGNED.get("manager"),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  SplitLogWorker slw1=new SplitLogWorker(zkw,TEST_UTIL.getConfiguration(),"svr1",neverEndingTask);
  SplitLogWorker slw2=new SplitLogWorker(zkw,TEST_UTIL.getConfiguration(),"svr2",neverEndingTask);
  slw1.start();
  slw2.start();
  try {
    waitForCounter(tot_wkr_task_acquired,0,1,1000);
    assertTrue(waitForCounterBoolean(tot_wkr_failed_to_grab_task_owned,0,1,1000) || tot_wkr_failed_to_grab_task_lost_race.get() == 1);
    assertTrue(TaskState.TASK_OWNED.equals(ZKUtil.getData(zkw,ZKSplitLog.getEncodedNodeName(zkw,"trft")),"svr1") || TaskState.TASK_OWNED.equals(ZKUtil.getData(zkw,ZKSplitLog.getEncodedNodeName(zkw,"trft")),"svr2"));
  }
  finally {
    stopSplitLogWorker(slw1);
    stopSplitLogWorker(slw2);
  }
}
