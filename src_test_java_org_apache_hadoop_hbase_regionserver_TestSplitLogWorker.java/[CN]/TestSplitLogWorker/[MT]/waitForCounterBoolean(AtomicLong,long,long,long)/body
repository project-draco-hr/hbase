{
  long curt=System.currentTimeMillis();
  long endt=curt + timems;
  while (curt < endt) {
    if (ctr.get() == oldval) {
      try {
        Thread.sleep(10);
      }
 catch (      InterruptedException e) {
      }
      curt=System.currentTimeMillis();
    }
 else {
      assertEquals(newval,ctr.get());
      return true;
    }
  }
  return false;
}
