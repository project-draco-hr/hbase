{
  LOG.info("testMultipleTasks");
  slw=new SplitLogWorker(zkw,TEST_UTIL.getConfiguration(),"tmt_svr",neverEndingTask);
  slw.start();
  Thread.yield();
  Thread.sleep(100);
  zkw.getZooKeeper().create(ZKSplitLog.getEncodedNodeName(zkw,"tmt_task"),TaskState.TASK_UNASSIGNED.get("manager"),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  waitForCounter(tot_wkr_task_acquired,0,1,1000);
  zkw.getZooKeeper().create(ZKSplitLog.getEncodedNodeName(zkw,"tmt_task_2"),TaskState.TASK_UNASSIGNED.get("manager"),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  ZKUtil.setData(zkw,ZKSplitLog.getEncodedNodeName(zkw,"tmt_task"),TaskState.TASK_OWNED.get("another-worker"));
  waitForCounter(tot_wkr_preempt_task,0,1,1000);
  waitForCounter(tot_wkr_task_acquired,1,2,1000);
  assertEquals(2,slw.taskReadySeq);
  assertTrue(TaskState.TASK_OWNED.equals(ZKUtil.getData(zkw,ZKSplitLog.getEncodedNodeName(zkw,"tmt_task_2")),"tmt_svr"));
}
