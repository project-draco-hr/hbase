{
  InjectAbortOnLoadListener abortListener=new InjectAbortOnLoadListener(procExec);
  abortListener.addProcId(procId);
  procExec.registerListener(abortListener);
  try {
    ProcedureTestingUtility.setKillAndToggleBeforeStoreUpdate(procExec,false);
    ProcedureTestingUtility.restart(procExec);
    ProcedureTestingUtility.waitProcedure(procExec,procId);
  }
  finally {
    assertTrue(procExec.unregisterListener(abortListener));
  }
}
