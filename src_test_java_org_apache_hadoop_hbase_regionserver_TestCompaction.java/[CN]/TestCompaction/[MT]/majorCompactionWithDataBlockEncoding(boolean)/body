{
  Map<Store,HFileDataBlockEncoder> replaceBlockCache=new HashMap<Store,HFileDataBlockEncoder>();
  for (  Entry<byte[],Store> pair : r.getStores().entrySet()) {
    Store store=pair.getValue();
    HFileDataBlockEncoder blockEncoder=store.getDataBlockEncoder();
    replaceBlockCache.put(pair.getValue(),blockEncoder);
    store.setDataBlockEncoderInTest(new HFileDataBlockEncoderImpl(null,Algorithm.PREFIX,encodedSeek));
  }
  majorCompaction();
  for (  Entry<Store,HFileDataBlockEncoder> entry : replaceBlockCache.entrySet()) {
    entry.getKey().setDataBlockEncoderInTest(entry.getValue());
  }
}
