{
  int numRS=ht.getCurrentNrHRS();
  Map<HRegionInfo,HServerAddress> regions=ht.getRegionsInfo();
  Map<HServerAddress,List<HRegionInfo>> server2Regions=new HashMap<HServerAddress,List<HRegionInfo>>();
  for (  Map.Entry<HRegionInfo,HServerAddress> entry : regions.entrySet()) {
    HServerAddress server=entry.getValue();
    List<HRegionInfo> regs=server2Regions.get(server);
    if (regs == null) {
      regs=new ArrayList<HRegionInfo>();
      server2Regions.put(server,regs);
    }
    regs.add(entry.getKey());
  }
  float average=(float)expectedRegions / numRS;
  int min=(int)Math.floor(average);
  int max=(int)Math.ceil(average);
  for (  List<HRegionInfo> regionList : server2Regions.values()) {
    assertTrue(regionList.size() == min || regionList.size() == max);
  }
}
