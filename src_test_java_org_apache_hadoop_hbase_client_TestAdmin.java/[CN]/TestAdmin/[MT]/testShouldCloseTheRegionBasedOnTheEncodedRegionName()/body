{
  byte[] TABLENAME=Bytes.toBytes("TestHBACloseRegion");
  HBaseAdmin admin=createTable(TABLENAME);
  HRegionInfo info=null;
  HRegionServer rs=TEST_UTIL.getRSForFirstRegionInTable(TABLENAME);
  List<HRegionInfo> onlineRegions=rs.getOnlineRegions();
  for (  HRegionInfo regionInfo : onlineRegions) {
    if (!regionInfo.isMetaRegion() && !regionInfo.isRootRegion()) {
      info=regionInfo;
      admin.closeRegionWithEncodedRegionName(regionInfo.getEncodedName(),rs.getServerName().getServerName());
    }
  }
  Thread.sleep(1000);
  onlineRegions=rs.getOnlineRegions();
  assertFalse("The region should not be present in online regions list.",onlineRegions.contains(info));
}
