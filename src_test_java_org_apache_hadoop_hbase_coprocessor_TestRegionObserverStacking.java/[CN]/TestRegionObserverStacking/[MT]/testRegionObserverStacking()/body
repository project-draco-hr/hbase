{
  byte[] ROW=Bytes.toBytes("testRow");
  byte[] TABLE=Bytes.toBytes(getClass().getName());
  byte[] A=Bytes.toBytes("A");
  byte[][] FAMILIES=new byte[][]{A};
  HRegion region=initHRegion(TABLE,getClass().getName(),HBaseConfiguration.create(),FAMILIES);
  CoprocessorHost h=region.getCoprocessorHost();
  h.load(ObserverA.class,Priority.HIGHEST);
  h.load(ObserverB.class,Priority.USER);
  h.load(ObserverC.class,Priority.LOWEST);
  Put put=new Put(ROW);
  put.add(A,A,A);
  int lockid=region.obtainRowLock(ROW);
  region.put(put,lockid);
  region.releaseRowLock(lockid);
  Coprocessor c=h.findCoprocessor(ObserverA.class.getName());
  long idA=((ObserverA)c).id;
  c=h.findCoprocessor(ObserverB.class.getName());
  long idB=((ObserverB)c).id;
  c=h.findCoprocessor(ObserverC.class.getName());
  long idC=((ObserverC)c).id;
  assertTrue(idA < idB);
  assertTrue(idB < idC);
}
