{
  String namespace=prefix + "_dummy";
  NamespaceDescriptor nspDesc=NamespaceDescriptor.create(namespace).addConfiguration(TableNamespaceManager.KEY_MAX_REGIONS,"100").addConfiguration(TableNamespaceManager.KEY_MAX_TABLES,"3").build();
  admin.createNamespace(nspDesc);
  assertNotNull("Namespace descriptor found null.",admin.getNamespaceDescriptor(namespace));
  NamespaceTableAndRegionInfo stateInfo=getNamespaceState(nspDesc.getName());
  assertNotNull("Namespace state found null for " + namespace,stateInfo);
  HTableDescriptor tableDescOne=new HTableDescriptor(TableName.valueOf(namespace + TableName.NAMESPACE_DELIM + "table1"));
  HTableDescriptor tableDescTwo=new HTableDescriptor(TableName.valueOf(namespace + TableName.NAMESPACE_DELIM + "table2"));
  admin.createTable(tableDescOne);
  admin.createTable(tableDescTwo,Bytes.toBytes("AAA"),Bytes.toBytes("ZZZ"),5);
  stateInfo=getNamespaceState(nspDesc.getName());
  assertNotNull("Namespace state found to be null.",stateInfo);
  assertEquals(2,stateInfo.getTables().size());
  assertEquals(5,stateInfo.getRegionCountOfTable(tableDescTwo.getTableName()));
  assertEquals(6,stateInfo.getRegionCount());
  admin.disableTable(tableDescOne.getTableName());
  admin.deleteTable(tableDescOne.getTableName());
  stateInfo=getNamespaceState(nspDesc.getName());
  assertNotNull("Namespace state found to be null.",stateInfo);
  assertEquals(5,stateInfo.getRegionCount());
  assertEquals(1,stateInfo.getTables().size());
  admin.disableTable(tableDescTwo.getTableName());
  admin.deleteTable(tableDescTwo.getTableName());
  admin.deleteNamespace(namespace);
  stateInfo=getNamespaceState(namespace);
  assertNull("Namespace state not found to be null.",stateInfo);
}
