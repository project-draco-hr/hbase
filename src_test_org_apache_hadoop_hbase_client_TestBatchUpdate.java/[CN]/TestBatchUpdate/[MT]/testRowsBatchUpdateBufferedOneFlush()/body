{
  table.setAutoFlush(false);
  ArrayList<BatchUpdate> rowsUpdate=new ArrayList<BatchUpdate>();
  for (int i=0; i < NB_BATCH_ROWS * 10; i++) {
    BatchUpdate batchUpdate=new BatchUpdate("row" + i);
    batchUpdate.put(CONTENTS,value);
    rowsUpdate.add(batchUpdate);
  }
  try {
    table.commit(rowsUpdate);
    byte[][] columns={CONTENTS};
    Scanner scanner=table.getScanner(columns,HConstants.EMPTY_START_ROW);
    int nbRows=0;
    for (    RowResult row : scanner)     nbRows++;
    assertEquals(0,nbRows);
    scanner.close();
    table.flushCommits();
    scanner=table.getScanner(columns,HConstants.EMPTY_START_ROW);
    nbRows=0;
    for (    RowResult row : scanner)     nbRows++;
    assertEquals(NB_BATCH_ROWS * 10,nbRows);
  }
 catch (  IOException e) {
    fail("This is unexpected : " + e);
  }
}
