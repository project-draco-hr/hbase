{
  HRegionInfo newRegions[]=new HRegionInfo[]{new HRegionInfo(HTableDescriptor.NAMESPACE_TABLEDESC.getTableName(),null,null)};
  masterServices.getExecutorService().submit(new CreateTableHandler(masterServices,masterServices.getMasterFileSystem(),HTableDescriptor.NAMESPACE_TABLEDESC,masterServices.getConfiguration(),newRegions,masterServices).prepare());
  int tries=conf.getInt("hbase.master.namespace.init.timeout",600);
  while (masterServices.getAssignmentManager().getRegionStates().getRegionServerOfRegion(newRegions[0]) == null && tries > 0) {
    Thread.sleep(100);
    tries--;
  }
  if (tries <= 0) {
    throw new IOException("Failed to create namespace table.");
  }
}
