{
  validateTableAndRegionCount(ns);
  Put p=new Put(Bytes.toBytes(ns.getName()));
  p.addImmutable(HTableDescriptor.NAMESPACE_FAMILY_INFO_BYTES,HTableDescriptor.NAMESPACE_COL_DESC_BYTES,ProtobufUtil.toProtoNamespaceDescriptor(ns).toByteArray());
  table.put(p);
  try {
    zkNamespaceManager.update(ns);
  }
 catch (  IOException ex) {
    String msg="Failed to update namespace information in ZK. Aborting.";
    LOG.fatal(msg,ex);
    masterServices.abort(msg,ex);
  }
}
