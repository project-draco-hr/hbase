{
  Options options=new Options();
  options.addOption("p","port",true,"service port");
  options.addOption("m","multiuser",false,"enable multiuser mode");
  CommandLineParser parser=new PosixParser();
  CommandLine cmd=parser.parse(options,args);
  int port=8080;
  if (cmd.hasOption("p")) {
    port=Integer.valueOf(cmd.getOptionValue("p"));
  }
  ServletHolder sh=new ServletHolder(ServletContainer.class);
  sh.setInitParameter("com.sun.jersey.config.property.resourceConfigClass",ResourceConfig.class.getCanonicalName());
  sh.setInitParameter("com.sun.jersey.config.property.packages","jetty");
  Server server=new Server(port);
  server.setSendServerVersion(false);
  server.setSendDateHeader(false);
  server.setStopAtShutdown(true);
  Context context=new Context(server,"/",Context.SESSIONS);
  context.addServlet(sh,"/*");
  RESTServlet servlet=RESTServlet.getInstance();
  servlet.setMultiUser(cmd.hasOption("m"));
  for (  Connector conn : server.getConnectors()) {
    servlet.addConnectorAddress(conn.getHost(),conn.getLocalPort());
  }
  server.start();
  server.join();
}
