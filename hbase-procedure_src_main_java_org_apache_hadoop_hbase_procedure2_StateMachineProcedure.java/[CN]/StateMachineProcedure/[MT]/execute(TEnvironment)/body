{
  updateTimestamp();
  try {
    TState state=stateCount > 0 ? getState(states[stateCount - 1]) : getInitialState();
    if (stateCount == 0) {
      setNextState(getStateId(state));
    }
    if (executeFromState(env,state) == Flow.NO_MORE_STATE) {
      return null;
    }
    return (isWaiting() || isFailed()) ? null : new Procedure[]{this};
  }
  finally {
    updateTimestamp();
  }
}
