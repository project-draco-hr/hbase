{
  ConcurrentMap<byte[],RegionLocations> tableLocations=getTableLocations(tableName);
  RegionLocations regionLocations=getCachedLocation(tableName,row);
  if (regionLocations != null) {
    RegionLocations updatedLocations=regionLocations.removeByServer(serverName);
    if (updatedLocations != regionLocations) {
      byte[] startKey=regionLocations.getRegionLocation().getRegionInfo().getStartKey();
      if (updatedLocations.isEmpty()) {
        tableLocations.remove(startKey,regionLocations);
      }
 else {
        tableLocations.replace(startKey,regionLocations,updatedLocations);
      }
    }
  }
}
