{
  ConcurrentMap<byte[],RegionLocations> tableLocations=getTableLocations(hri.getTable());
  RegionLocations regionLocations=tableLocations.get(hri.getStartKey());
  if (regionLocations != null) {
    HRegionLocation oldLocation=regionLocations.getRegionLocation(hri.getReplicaId());
    RegionLocations updatedLocations=regionLocations.remove(oldLocation);
    if (updatedLocations != regionLocations) {
      if (updatedLocations.isEmpty()) {
        tableLocations.remove(hri.getStartKey(),regionLocations);
      }
 else {
        tableLocations.replace(hri.getStartKey(),regionLocations,updatedLocations);
      }
    }
  }
}
