{
  byte[] startKey=location.getRegionLocation().getRegionInfo().getStartKey();
  ConcurrentMap<byte[],RegionLocations> tableLocations=getTableLocations(tableName);
  RegionLocations oldLocation=tableLocations.putIfAbsent(startKey,location);
  boolean isNewCacheEntry=(oldLocation == null);
  if (isNewCacheEntry) {
    addToCachedServers(location);
    return;
  }
  RegionLocations mergedLocation=oldLocation.mergeLocations(location);
  tableLocations.replace(startKey,oldLocation,mergedLocation);
  addToCachedServers(location);
}
