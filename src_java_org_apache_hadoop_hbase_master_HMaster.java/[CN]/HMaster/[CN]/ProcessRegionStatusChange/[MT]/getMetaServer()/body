{
  if (this.isMetaTable) {
    this.metaRegionName=HRegionInfo.rootRegionInfo.getRegionName();
  }
 else {
    if (this.metaRegion == null) {
synchronized (onlineMetaRegions) {
        metaRegion=onlineMetaRegions.size() == 1 ? onlineMetaRegions.get(onlineMetaRegions.firstKey()) : onlineMetaRegions.containsKey(regionInfo.getRegionName()) ? onlineMetaRegions.get(regionInfo.getRegionName()) : onlineMetaRegions.get(onlineMetaRegions.headMap(regionInfo.getRegionName()).lastKey());
      }
      this.metaRegionName=metaRegion.getRegionName();
    }
  }
  HServerAddress server=null;
  if (isMetaTable) {
    server=rootRegionLocation.get();
  }
 else {
    server=metaRegion.getServer();
  }
  return connection.getHRegionConnection(server);
}
