{
  HTableDescriptor htd=new HTableDescriptor(tableName);
  htd.setRegionReplication(regionReplication);
  for (  byte[] family : families) {
    HColumnDescriptor hcd=new HColumnDescriptor(family);
    htd.addFamily(hcd);
  }
  byte[][] splitKeys=getSplitKeys();
  util.getHBaseAdmin().createTable(htd,splitKeys);
  waitForTableToBeOnline(util,tableName);
  assertEquals((splitKeys.length + 1) * regionReplication,util.getHBaseAdmin().getTableRegions(tableName).size());
}
