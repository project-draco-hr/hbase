{
  final List<HRegionInfo> regions=new ArrayList<HRegionInfo>();
  MetaScannerVisitor visitor=new DefaultMetaScannerVisitor(){
    @Override public boolean processRowInternal(    Result result) throws IOException {
      if (result == null || result.isEmpty()) {
        return true;
      }
      HRegionInfo regionInfo=getHRegionInfo(result);
      if (regionInfo == null) {
        LOG.warn("Null REGIONINFO_QUALIFIER: " + result);
        return true;
      }
      if (regionInfo.isOffline() && !offlined)       return true;
      regions.add(regionInfo);
      return true;
    }
  }
;
  metaScan(conf,visitor);
  return regions;
}
