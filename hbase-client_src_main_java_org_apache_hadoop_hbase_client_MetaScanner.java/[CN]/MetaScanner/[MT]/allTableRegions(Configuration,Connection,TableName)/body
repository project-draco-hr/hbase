{
  final NavigableMap<HRegionInfo,ServerName> regions=new TreeMap<HRegionInfo,ServerName>();
  MetaScannerVisitor visitor=new TableMetaScannerVisitor(tableName){
    @Override public boolean processRowInternal(    Result result) throws IOException {
      RegionLocations locations=MetaTableAccessor.getRegionLocations(result);
      if (locations == null)       return true;
      for (      HRegionLocation loc : locations.getRegionLocations()) {
        if (loc != null) {
          HRegionInfo regionInfo=loc.getRegionInfo();
          regions.put(new UnmodifyableHRegionInfo(regionInfo),loc.getServerName());
        }
      }
      return true;
    }
  }
;
  metaScan(conf,connection,visitor,tableName);
  return regions;
}
