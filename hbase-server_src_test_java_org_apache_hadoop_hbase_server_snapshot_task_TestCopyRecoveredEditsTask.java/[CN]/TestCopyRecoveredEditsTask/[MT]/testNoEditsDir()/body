{
  SnapshotDescription snapshot=SnapshotDescription.newBuilder().setName("snapshot").build();
  ForeignExceptionDispatcher monitor=Mockito.mock(ForeignExceptionDispatcher.class);
  FileSystem fs=UTIL.getTestFileSystem();
  Path root=UTIL.getDataTestDir();
  String regionName="regionA";
  Path regionDir=new Path(root,regionName);
  Path workingDir=SnapshotDescriptionUtils.getWorkingSnapshotDir(snapshot,root);
  try {
    Path snapshotRegionDir=new Path(workingDir,regionName);
    fs.mkdirs(snapshotRegionDir);
    Path regionEdits=HLogUtil.getRegionDirRecoveredEditsDir(regionDir);
    assertFalse("Edits dir exists already - it shouldn't",fs.exists(regionEdits));
    CopyRecoveredEditsTask task=new CopyRecoveredEditsTask(snapshot,monitor,fs,regionDir,snapshotRegionDir);
    task.call();
  }
  finally {
    FSUtils.delete(fs,regionDir,true);
    FSUtils.delete(fs,workingDir,true);
  }
}
