{
  LOG.info("No file system version found. Checking to see if hbase in " + "Filesystem is at revision 0.1");
  boolean newRootRegion=checkNewRootRegionDirExists();
  if (this.readOnly && !newRootRegion) {
    this.migrationNeeded=true;
    return;
  }
  checkForUnrecoveredLogFiles(rootFiles);
  extraFiles(rootFiles);
  if (!newRootRegion) {
    String rootRegion=OLD_PREFIX + HRegionInfo.ROOT_REGIONINFO.getEncodedName();
    if (!fs.exists(new Path(FSUtils.getRootDir(this.conf),rootRegion))) {
      throw new IOException("Cannot find root region " + rootRegion);
    }
 else     if (readOnly) {
      migrationNeeded=true;
    }
 else {
      migrateRegionDir(HConstants.ROOT_TABLE_NAME,rootRegion);
      scanRootRegion();
      extraRegions();
    }
  }
}
