{
  if (this.readOnly && this.migrationNeeded) {
    return;
  }
  final MetaUtils utils=new MetaUtils(this.conf);
  try {
    updateVersions(utils.getRootRegion().getRegionInfo());
    utils.scanRootRegion(new MetaUtils.ScannerListener(){
      public boolean processRow(      HRegionInfo info) throws IOException {
        if (readOnly && !migrationNeeded) {
          migrationNeeded=true;
          return false;
        }
        updateVersions(utils.getRootRegion(),info);
        return true;
      }
    }
);
  }
  finally {
    utils.shutdown();
  }
}
