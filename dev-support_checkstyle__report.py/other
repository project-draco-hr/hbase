import os
import sys
import xml.etree.ElementTree as etree
from collections import defaultdict
if (len(sys.argv) != 3):
    print ('usage: %s checkstyle-result-master.xml checkstyle-result-patch.xml' % sys.argv[0])
    exit(1)
master = etree.parse(sys.argv[1])
patch = etree.parse(sys.argv[2])
master_dict = defaultdict(int)
for child in master.getroot().getchildren():
    if (child.tag != 'file'):
        continue
    child_errors = len(child.getchildren())
    if (child_errors == 0):
        continue
    master_dict[path_key(child)] = child_errors
for child in patch.getroot().getchildren():
    if (child.tag != 'file'):
        continue
    child_errors = len(child.getchildren())
    if (child_errors == 0):
        continue
    k = path_key(child)
    if (child_errors > master_dict[k]):
        print_row(k, master_dict[k], child_errors)
