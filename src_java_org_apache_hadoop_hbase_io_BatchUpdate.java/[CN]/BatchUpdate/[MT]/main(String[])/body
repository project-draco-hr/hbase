{
  RuntimeMXBean runtime=ManagementFactory.getRuntimeMXBean();
  LOG.info("vmName=" + runtime.getVmName() + ", vmVendor="+ runtime.getVmVendor()+ ", vmVersion="+ runtime.getVmVersion());
  LOG.info("vmInputArguments=" + runtime.getInputArguments());
  final int count=10000;
  BatchUpdate[] batch1=new BatchUpdate[count];
  long size=0;
  for (int i=0; i < count; i++) {
    BatchUpdate bu=new BatchUpdate(HConstants.EMPTY_BYTE_ARRAY);
    bu.put(HConstants.EMPTY_BYTE_ARRAY,HConstants.EMPTY_BYTE_ARRAY);
    batch1[i]=bu;
    size+=bu.heapSize();
  }
  LOG.info("batch1 estimated size=" + size);
  size=0;
  BatchUpdate[] batch2=new BatchUpdate[count];
  for (int i=0; i < count; i++) {
    BatchUpdate bu=new BatchUpdate(Bytes.toBytes(i));
    bu.put(Bytes.toBytes(i),new byte[i]);
    batch2[i]=bu;
    size+=bu.heapSize();
  }
  LOG.info("batch2 estimated size=" + size);
  final int seconds=30;
  LOG.info("Waiting " + seconds + " seconds while heap dump is taken");
  for (int i=0; i < seconds; i++) {
    Thread.sleep(1000);
  }
  LOG.info("Exiting.");
}
