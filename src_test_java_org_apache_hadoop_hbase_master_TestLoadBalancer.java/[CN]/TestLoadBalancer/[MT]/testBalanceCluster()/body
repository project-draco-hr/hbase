{
  for (  int[] mockCluster : clusterStateMocks) {
    Map<HServerInfo,List<HRegionInfo>> servers=mockClusterServers(mockCluster);
    LOG.info("Mock Cluster : " + printMock(servers) + " "+ printStats(servers));
    List<RegionPlan> plans=loadBalancer.balanceCluster(servers);
    List<HServerInfo> balancedCluster=reconcile(servers,plans);
    LOG.info("Mock Balance : " + printMock(balancedCluster));
    assertClusterAsBalanced(balancedCluster);
    for (    Map.Entry<HServerInfo,List<HRegionInfo>> entry : servers.entrySet()) {
      returnRegions(entry.getValue());
      returnServer(entry.getKey());
    }
  }
}
