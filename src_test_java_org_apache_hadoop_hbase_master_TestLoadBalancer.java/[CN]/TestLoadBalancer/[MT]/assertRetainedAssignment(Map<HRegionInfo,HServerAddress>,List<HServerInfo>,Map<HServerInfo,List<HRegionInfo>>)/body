{
  Set<HServerInfo> onlineServerSet=new TreeSet<HServerInfo>(servers);
  Set<HRegionInfo> assignedRegions=new TreeSet<HRegionInfo>();
  for (  Map.Entry<HServerInfo,List<HRegionInfo>> a : assignment.entrySet()) {
    assertTrue("Region assigned to server that was not listed as online",onlineServerSet.contains(a.getKey()));
    for (    HRegionInfo r : a.getValue())     assignedRegions.add(r);
  }
  assertEquals(existing.size(),assignedRegions.size());
  Set<HServerAddress> onlineAddresses=new TreeSet<HServerAddress>();
  for (  HServerInfo s : servers)   onlineAddresses.add(s.getServerAddress());
  for (  Map.Entry<HServerInfo,List<HRegionInfo>> a : assignment.entrySet()) {
    for (    HRegionInfo r : a.getValue()) {
      HServerAddress address=existing.get(r);
      if (address != null && onlineAddresses.contains(address)) {
        assertTrue(a.getKey().getServerAddress().equals(address));
      }
    }
  }
}
