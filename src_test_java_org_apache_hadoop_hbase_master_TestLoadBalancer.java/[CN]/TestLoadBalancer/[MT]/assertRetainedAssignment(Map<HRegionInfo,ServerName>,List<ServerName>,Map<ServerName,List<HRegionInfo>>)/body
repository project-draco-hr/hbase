{
  Set<ServerName> onlineServerSet=new TreeSet<ServerName>(servers);
  Set<HRegionInfo> assignedRegions=new TreeSet<HRegionInfo>();
  for (  Map.Entry<ServerName,List<HRegionInfo>> a : assignment.entrySet()) {
    assertTrue("Region assigned to server that was not listed as online",onlineServerSet.contains(a.getKey()));
    for (    HRegionInfo r : a.getValue())     assignedRegions.add(r);
  }
  assertEquals(existing.size(),assignedRegions.size());
  Set<ServerName> onlineAddresses=new TreeSet<ServerName>();
  for (  ServerName s : servers)   onlineAddresses.add(s);
  for (  Map.Entry<ServerName,List<HRegionInfo>> a : assignment.entrySet()) {
    for (    HRegionInfo r : a.getValue()) {
      ServerName address=existing.get(r);
      if (address != null && onlineAddresses.contains(address)) {
        assertTrue(a.getKey().equals(address));
      }
    }
  }
}
