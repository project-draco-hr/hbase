{
  if (isTraceEnabled()) {
    LOG.trace(this + " rollback state=" + state);
  }
  try {
switch (state) {
case ENABLE_TABLE_POST_OPERATION:
      break;
case ENABLE_TABLE_SET_ENABLED_TABLE_STATE:
    DisableTableProcedure.setTableStateToDisabling(env,tableName);
  break;
case ENABLE_TABLE_MARK_REGIONS_ONLINE:
markRegionsOfflineDuringRecovery(env);
break;
case ENABLE_TABLE_SET_ENABLING_TABLE_STATE:
DisableTableProcedure.setTableStateToDisabled(env,tableName);
break;
case ENABLE_TABLE_PRE_OPERATION:
break;
case ENABLE_TABLE_PREPARE:
ProcedurePrepareLatch.releaseLatch(syncLatch,this);
break;
default :
throw new UnsupportedOperationException("unhandled state=" + state);
}
}
 catch (IOException e) {
LOG.warn("Failed enable table rollback attempt step=" + state + " table="+ tableName,e);
throw e;
}
}
