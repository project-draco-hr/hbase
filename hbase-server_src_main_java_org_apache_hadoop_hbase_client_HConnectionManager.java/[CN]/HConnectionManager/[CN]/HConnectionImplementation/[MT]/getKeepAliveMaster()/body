{
synchronized (masterAndZKLock) {
    if (!isKeepAliveMasterConnectedAndRunning()) {
      if (keepAliveMaster != null) {
        HBaseRPC.stopProxy(keepAliveMaster);
      }
      keepAliveMaster=null;
      keepAliveMaster=createMasterWithRetries();
    }
    keepAliveMasterUserCount++;
    keepMasterAliveUntil=Long.MAX_VALUE;
    return (MasterKeepAliveConnection)Proxy.newProxyInstance(MasterKeepAliveConnection.class.getClassLoader(),new Class[]{MasterKeepAliveConnection.class},new MasterHandler(this,keepAliveMaster));
  }
}
