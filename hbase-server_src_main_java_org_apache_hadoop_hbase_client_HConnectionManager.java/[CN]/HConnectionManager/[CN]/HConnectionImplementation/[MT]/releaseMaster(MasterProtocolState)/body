{
  if (protocolState.protocol == null) {
    return;
  }
synchronized (masterAndZKLock) {
    --protocolState.userCount;
    if (protocolState.userCount <= 0) {
      protocolState.keepAliveUntil=System.currentTimeMillis() + keepAlive;
    }
  }
}
