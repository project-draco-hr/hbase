{
  boolean isStaleDelete=false;
  HRegionLocation oldLocation=null;
synchronized (this.cachedRegionLocations) {
    Map<byte[],HRegionLocation> tableLocations=getTableLocations(hri.getTableName());
    oldLocation=tableLocations.get(hri.getStartKey());
    if (oldLocation != null) {
      isStaleDelete=(source != null) && !oldLocation.equals(source);
      if (!isStaleDelete) {
        tableLocations.remove(hri.getStartKey());
      }
    }
  }
  if (isStaleDelete) {
    LOG.debug("Received an error from " + source.getHostnamePort() + " for region "+ hri.getRegionNameAsString()+ "; not removing "+ oldLocation.getHostnamePort()+ " from cache.");
  }
}
