{
  try {
    this.parentdir=new Path(conf.get(HBASE_DIR,DEFAULT_HBASE_DIR));
    fs.mkdirs(parentdir);
    this.masterThread=startMaster(this.conf);
    this.regionThreads.addAll(startRegionServers(this.conf,nRegionNodes));
  }
 catch (  IOException e) {
    shutdown();
    throw e;
  }
}
