{
  try {
    while (true) {
      try {
        hbaseCluster=new LocalHBaseCluster(conf,nRegionNodes);
        hbaseCluster.startup();
      }
 catch (      BindException e) {
        int port=conf.getInt("hbase.master.port",DEFAULT_MASTER_PORT);
        LOG.info("Failed binding Master to port: " + port,e);
        port++;
        conf.setInt("hbase.master.port",port);
        continue;
      }
      break;
    }
  }
 catch (  IOException e) {
    shutdown();
    throw e;
  }
}
