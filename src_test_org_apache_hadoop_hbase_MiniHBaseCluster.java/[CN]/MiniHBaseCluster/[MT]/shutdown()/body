{
  LOG.info("Shutting down the HBase Cluster");
  for (int i=0; i < regionServers.length; i++) {
    if (regionServers[i] != null) {
      regionServers[i].stop();
    }
  }
  master.shutdown();
  for (int i=0; i < regionServers.length; i++) {
    try {
      if (regionThreads[i] != null) {
        regionThreads[i].join();
      }
    }
 catch (    InterruptedException e) {
    }
  }
  try {
    masterThread.join();
  }
 catch (  InterruptedException e) {
  }
  LOG.info("HBase Cluster shutdown complete");
  if (cluster != null) {
    LOG.info("Shutting down Mini DFS cluster");
    cluster.shutdown();
  }
  deleteFile(new File(System.getProperty(StaticTestEnvironment.TEST_DIRECTORY_KEY),"dfs"));
}
