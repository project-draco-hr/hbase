{
  LOG.info("Shutting down the HBase Cluster");
  for (int i=0; i < regionServers.length; i++) {
    try {
      regionServers[i].stop();
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
  }
  try {
    master.shutdown();
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  for (int i=0; i < regionServers.length; i++) {
    try {
      regionThreads[i].join();
    }
 catch (    InterruptedException e) {
    }
  }
  try {
    masterThread.join();
  }
 catch (  InterruptedException e) {
  }
  LOG.info("HBase Cluster shutdown complete");
  if (cluster != null) {
    LOG.info("Shutting down Mini DFS cluster");
    cluster.shutdown();
  }
  deleteFile(new File(System.getProperty(StaticTestEnvironment.TEST_DIRECTORY_KEY),"dfs"));
}
