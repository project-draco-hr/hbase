{
  ZKSplitLog.Counters.resetCounters();
  LOG.info("Starting cluster");
  conf=HBaseConfiguration.create();
  conf.getLong("hbase.splitlog.max.resubmit",0);
  TEST_UTIL=new HBaseTestingUtility(conf);
  TEST_UTIL.startMiniCluster(NUM_MASTERS,num_rs);
  cluster=TEST_UTIL.getHBaseCluster();
  LOG.info("Waiting for active/ready master");
  cluster.waitForActiveAndReadyMaster();
  master=cluster.getMaster();
  while (cluster.getLiveRegionServerThreads().size() < num_rs) {
    Threads.sleep(1);
  }
}
