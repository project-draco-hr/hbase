{
  this.table=table;
  this.connection=table.getConnection();
  try {
    this.regionLocator=table.getRegionLocator();
    this.admin=this.connection.getAdmin();
  }
 catch (  NeedUnmanagedConnectionException exception) {
    LOG.warn("You are using an HTable instance that relies on an HBase-managed Connection. " + "This is usually due to directly creating an HTable, which is deprecated. Instead, you " + "should create a Connection object and then request a Table instance from it. If you "+ "don't need the Table instance for your own use, you should instead use the "+ "TableInputFormatBase.initalizeTable method directly.");
    LOG.info("Creating an additional unmanaged connection because user provided one can't be " + "used for administrative actions. We'll close it when we close out the table.");
    LOG.debug("Details about our failure to request an administrative interface.",exception);
    this.connection=ConnectionFactory.createConnection(this.connection.getConfiguration());
    this.regionLocator=this.connection.getRegionLocator(table.getName());
    this.admin=this.connection.getAdmin();
  }
}
