{
  ZkSplitTransactionDetails zstd=(ZkSplitTransactionDetails)std;
  if (coordinationManager.getServer() != null) {
    try {
      zstd.setZnodeVersion(transitionSplittingNode(parent.getRegionInfo(),a.getRegionInfo(),b.getRegionInfo(),coordinationManager.getServer().getServerName(),zstd,RS_ZK_REGION_SPLITTING,RS_ZK_REGION_SPLIT));
      int spins=0;
      do {
        if (spins % 10 == 0) {
          LOG.debug("Still waiting on the master to process the split for " + parent.getRegionInfo().getEncodedName());
        }
        Thread.sleep(100);
        zstd.setZnodeVersion(transitionSplittingNode(parent.getRegionInfo(),a.getRegionInfo(),b.getRegionInfo(),coordinationManager.getServer().getServerName(),zstd,RS_ZK_REGION_SPLIT,RS_ZK_REGION_SPLIT));
        spins++;
      }
 while (zstd.getZnodeVersion() != -1 && !coordinationManager.getServer().isStopped() && !services.isStopping());
    }
 catch (    Exception e) {
      if (e instanceof InterruptedException) {
        Thread.currentThread().interrupt();
      }
      throw new IOException("Failed telling master about split",e);
    }
  }
}
