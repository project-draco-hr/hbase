{
  checkOpen();
  LOG.info("Post open deploy tasks for region=" + r.getRegionNameAsString());
  for (  Store s : r.getStores().values()) {
    if (s.hasReferences() || s.needsCompaction()) {
      this.compactSplitThread.requestSystemCompaction(r,s,"Opening Region");
    }
  }
  long openSeqNum=r.getOpenSeqNum();
  if (openSeqNum == HConstants.NO_SEQNUM) {
    LOG.error("No sequence number found when opening " + r.getRegionNameAsString());
    openSeqNum=0;
  }
  updateRecoveringRegionLastFlushedSequenceId(r);
  if (r.getRegionInfo().isMetaRegion()) {
    MetaRegionTracker.setMetaLocation(getZooKeeper(),this.serverNameFromMasterPOV);
  }
 else {
    MetaEditor.updateRegionLocation(ct,r.getRegionInfo(),this.serverNameFromMasterPOV,openSeqNum);
  }
  LOG.info("Done with post open deploy task for region=" + r.getRegionNameAsString());
}
