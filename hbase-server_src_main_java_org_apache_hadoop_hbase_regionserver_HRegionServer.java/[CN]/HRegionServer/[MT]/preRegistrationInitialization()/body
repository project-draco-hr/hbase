{
  try {
    initializeZooKeeper();
    initializeThreads();
    int nbBlocks=conf.getInt("hbase.regionserver.nbreservationblocks",4);
    for (int i=0; i < nbBlocks; i++) {
      reservedSpace.add(new byte[HConstants.DEFAULT_SIZE_RESERVATION_BLOCK]);
    }
  }
 catch (  Throwable t) {
    this.rpcServer.stop();
    abort("Initialization of RS failed.  Hence aborting RS.",t);
  }
}
