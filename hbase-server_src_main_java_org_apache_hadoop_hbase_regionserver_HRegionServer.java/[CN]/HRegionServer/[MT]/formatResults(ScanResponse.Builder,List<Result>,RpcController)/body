{
  if (results == null || results.isEmpty())   return;
  RpcCallContext context=RpcServer.getCurrentCall();
  if (context != null && context.isClientCellBlockSupport()) {
    List<CellScannable> cellScannables=new ArrayList<CellScannable>(results.size());
    for (    Result res : results) {
      cellScannables.add(res);
      builder.addCellsPerResult(res.size());
    }
    ((PayloadCarryingRpcController)controller).setCellScanner(CellUtil.createCellScanner(cellScannables));
  }
 else {
    for (    Result res : results) {
      ClientProtos.Result pbr=ProtobufUtil.toResult(res);
      builder.addResults(pbr);
    }
  }
}
