{
  HRegion region=this.onlineRegions.get(encodedRegionName);
  if (region == null) {
    MovedRegionInfo moveInfo=getMovedRegion(encodedRegionName);
    if (moveInfo != null) {
      throw new RegionMovedException(moveInfo.getServerName(),moveInfo.getSeqNum());
    }
    Boolean isOpening=this.regionsInTransitionInRS.get(Bytes.toBytes(encodedRegionName));
    String regionNameStr=regionName == null ? encodedRegionName : Bytes.toStringBinary(regionName);
    if (isOpening != null && isOpening.booleanValue()) {
      throw new RegionOpeningException("Region " + regionNameStr + " is opening");
    }
    throw new NotServingRegionException("Region " + regionNameStr + " is not online");
  }
  return region;
}
