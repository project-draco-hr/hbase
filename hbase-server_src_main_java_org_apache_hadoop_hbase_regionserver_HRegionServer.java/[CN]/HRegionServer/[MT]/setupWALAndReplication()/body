{
  final Path oldLogDir=new Path(rootDir,HConstants.HREGION_OLDLOGDIR_NAME);
  final String logName=HLogUtil.getHLogDirectoryName(this.serverNameFromMasterPOV.toString());
  Path logdir=new Path(rootDir,logName);
  if (LOG.isDebugEnabled())   LOG.debug("logdir=" + logdir);
  if (this.fs.exists(logdir)) {
    throw new RegionServerRunningException("Region server has already " + "created directory at " + this.serverNameFromMasterPOV.toString());
  }
  createNewReplicationInstance(conf,this,this.fs,logdir,oldLogDir);
  return instantiateHLog(rootDir,logName);
}
