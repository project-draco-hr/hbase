{
  String n=Thread.currentThread().getName();
  UncaughtExceptionHandler handler=new UncaughtExceptionHandler(){
    public void uncaughtException(    Thread t,    Throwable e){
      abort("Uncaught exception in service thread " + t.getName(),e);
    }
  }
;
  this.service=new ExecutorService(getServerName().toString());
  this.service.startExecutorService(ExecutorType.RS_OPEN_REGION,conf.getInt("hbase.regionserver.executor.openregion.threads",3));
  this.service.startExecutorService(ExecutorType.RS_OPEN_ROOT,conf.getInt("hbase.regionserver.executor.openroot.threads",1));
  this.service.startExecutorService(ExecutorType.RS_OPEN_META,conf.getInt("hbase.regionserver.executor.openmeta.threads",1));
  this.service.startExecutorService(ExecutorType.RS_CLOSE_REGION,conf.getInt("hbase.regionserver.executor.closeregion.threads",3));
  this.service.startExecutorService(ExecutorType.RS_CLOSE_ROOT,conf.getInt("hbase.regionserver.executor.closeroot.threads",1));
  this.service.startExecutorService(ExecutorType.RS_CLOSE_META,conf.getInt("hbase.regionserver.executor.closemeta.threads",1));
  Threads.setDaemonThreadRunning(this.hlogRoller.getThread(),n + ".logRoller",handler);
  Threads.setDaemonThreadRunning(this.cacheFlusher.getThread(),n + ".cacheFlusher",handler);
  Threads.setDaemonThreadRunning(this.compactionChecker.getThread(),n + ".compactionChecker",handler);
  if (this.healthCheckChore != null) {
    Threads.setDaemonThreadRunning(this.healthCheckChore.getThread(),n + ".healthChecker",handler);
  }
  this.leases.setName(n + ".leaseChecker");
  this.leases.start();
  this.webuiport=putUpWebUI();
  if (this.replicationSourceHandler == this.replicationSinkHandler && this.replicationSourceHandler != null) {
    this.replicationSourceHandler.startReplicationService();
  }
 else   if (this.replicationSourceHandler != null) {
    this.replicationSourceHandler.startReplicationService();
  }
 else   if (this.replicationSinkHandler != null) {
    this.replicationSinkHandler.startReplicationService();
  }
  this.rpcServer.start();
  this.splitLogWorker=new SplitLogWorker(this.zooKeeper,this.getConfiguration(),this.getServerName(),this);
  splitLogWorker.start();
}
