{
  try {
    checkOpen();
    requestCount.incrementAndGet();
    HRegion region=getRegion(request.getRegion());
    LOG.info("Compacting " + region.getRegionNameAsString());
    boolean major=false;
    if (request.hasMajor()) {
      major=request.getMajor();
    }
    if (major) {
      region.triggerMajorCompaction();
    }
    LOG.trace("User-triggered compaction requested for region " + region.getRegionNameAsString());
    compactSplitThread.requestCompaction(region,"User-triggered " + (major ? "major " : "") + "compaction",HStore.PRIORITY_USER);
    return CompactRegionResponse.newBuilder().build();
  }
 catch (  IOException ie) {
    throw new ServiceException(ie);
  }
}
