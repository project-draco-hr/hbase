{
  long before=EnvironmentEdgeManager.currentTimeMillis();
  Append append=ProtobufUtil.toAppend(m,cellScanner);
  Result r=null;
  if (region.getCoprocessorHost() != null) {
    r=region.getCoprocessorHost().preAppend(append);
  }
  if (r == null) {
    long nonce=startNonceOperation(m,nonceGroup);
    boolean success=false;
    try {
      r=region.append(append,nonceGroup,nonce);
      success=true;
    }
  finally {
      endNonceOperation(m,nonceGroup,success);
    }
    if (region.getCoprocessorHost() != null) {
      region.getCoprocessorHost().postAppend(append,r);
    }
  }
  metricsRegionServer.updateAppend(EnvironmentEdgeManager.currentTimeMillis() - before);
  return r;
}
