{
  if (majorCompaction) {
    triggerMajorCompaction();
  }
  for (  Store s : getStores()) {
    CompactionContext compaction=s.requestCompaction();
    if (compaction != null) {
      CompactionThroughputController controller=null;
      if (rsServices != null) {
        controller=CompactionThroughputControllerFactory.create(rsServices,conf);
      }
      if (controller == null) {
        controller=NoLimitCompactionThroughputController.INSTANCE;
      }
      compact(compaction,s,controller,null);
    }
  }
}
