{
  long capacityNeeded=curBuf.position() + (long)extra;
  if (capacityNeeded > curBuf.limit()) {
    allocateNewBuffer();
  }
}
