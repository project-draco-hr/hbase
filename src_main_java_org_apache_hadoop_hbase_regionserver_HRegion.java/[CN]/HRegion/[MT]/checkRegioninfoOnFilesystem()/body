{
  Path regioninfoPath=new Path(this.regiondir,REGIONINFO_FILE);
  if (this.fs.exists(regioninfoPath) && this.fs.getFileStatus(regioninfoPath).getLen() > 0) {
    return;
  }
  FsPermission perms=FSUtils.getFilePermissions(fs,conf,HConstants.DATA_FILE_UMASK_KEY);
  Path tmpPath=new Path(getTmpDir(),REGIONINFO_FILE);
  if (FSUtils.isExists(fs,tmpPath)) {
    FSUtils.delete(fs,tmpPath,true);
  }
  FSDataOutputStream out=FSUtils.create(fs,tmpPath,perms);
  try {
    this.regionInfo.write(out);
    out.write('\n');
    out.write('\n');
    out.write(Bytes.toBytes(this.regionInfo.toString()));
  }
  finally {
    out.close();
  }
  if (!fs.rename(tmpPath,regioninfoPath)) {
    throw new IOException("Unable to rename " + tmpPath + " to "+ regioninfoPath);
  }
}
