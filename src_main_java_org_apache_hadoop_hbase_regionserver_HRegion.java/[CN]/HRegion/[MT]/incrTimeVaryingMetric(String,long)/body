{
  Pair<AtomicLong,AtomicInteger> oldVal=timeVaryingMetrics.get(key);
  if (oldVal == null) {
    oldVal=timeVaryingMetrics.putIfAbsent(key,new Pair<AtomicLong,AtomicInteger>(new AtomicLong(amount),new AtomicInteger(1)));
    if (oldVal == null)     return;
  }
  oldVal.getFirst().addAndGet(amount);
  oldVal.getSecond().incrementAndGet();
}
