{
  meta.checkResources();
  byte[] row=r.getRegionName();
  Integer lid=meta.obtainRowLock(row);
  try {
    final List<KeyValue> edits=new ArrayList<KeyValue>(1);
    edits.add(new KeyValue(row,HConstants.CATALOG_FAMILY,HConstants.REGIONINFO_QUALIFIER,EnvironmentEdgeManager.currentTimeMillis(),Writables.getBytes(r.getRegionInfo())));
    edits.add(new KeyValue(row,HConstants.CATALOG_FAMILY,org.apache.hadoop.hbase.catalog.MetaMigrationRemovingHTD.META_MIGRATION_QUALIFIER,EnvironmentEdgeManager.currentTimeMillis(),Bytes.toBytes(true)));
    meta.put(HConstants.CATALOG_FAMILY,edits);
  }
  finally {
    meta.releaseRowLock(lid);
  }
}
