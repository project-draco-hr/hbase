{
  super(server,EventType.C_M_SNAPSHOT_TABLE);
  this.masterServices=masterServices;
  this.tableName=snapshot.getTable();
  this.snapshot=snapshot;
  this.monitor=new SnapshotExceptionSnare(snapshot);
  this.conf=this.masterServices.getConfiguration();
  this.fs=this.masterServices.getMasterFileSystem().getFileSystem();
  this.rootDir=FSUtils.getRootDir(this.conf);
  this.workingDir=SnapshotDescriptionUtils.getWorkingSnapshotDir(snapshot,rootDir);
  this.verify=new MasterSnapshotVerifier(masterServices,snapshot,rootDir);
  timer=TakeSnapshotUtils.getMasterTimerAndBindToMonitor(snapshot,conf,monitor);
}
