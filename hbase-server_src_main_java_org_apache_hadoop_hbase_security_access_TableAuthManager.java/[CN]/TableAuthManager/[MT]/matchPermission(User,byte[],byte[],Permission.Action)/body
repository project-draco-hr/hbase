{
  List<TablePermission> userPerms=getUserPermissions(user.getShortName(),table);
  if (userPerms != null) {
    for (    TablePermission p : userPerms) {
      if (p.matchesFamily(table,family,action)) {
        return true;
      }
    }
  }
  String[] groups=user.getGroupNames();
  if (groups != null) {
    for (    String group : groups) {
      List<TablePermission> groupPerms=getGroupPermissions(group,table);
      if (groupPerms != null) {
        for (        TablePermission p : groupPerms) {
          if (p.matchesFamily(table,family,action)) {
            return true;
          }
        }
      }
    }
  }
  return false;
}
