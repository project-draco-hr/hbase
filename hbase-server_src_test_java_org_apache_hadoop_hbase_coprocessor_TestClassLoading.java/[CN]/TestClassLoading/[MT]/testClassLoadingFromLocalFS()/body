{
  File jarFile=buildCoprocessorJar(cpName3);
  HTableDescriptor htd=new HTableDescriptor(cpName3);
  htd.addFamily(new HColumnDescriptor("test"));
  htd.setValue("COPROCESSOR$1",jarFile.toString() + "|" + cpName3+ "|"+ Coprocessor.PRIORITY_USER);
  HBaseAdmin admin=TEST_UTIL.getHBaseAdmin();
  admin.createTable(htd);
  waitForTable(htd.getName());
  boolean found=false;
  MiniHBaseCluster hbase=TEST_UTIL.getHBaseCluster();
  for (  HRegion region : hbase.getRegionServer(0).getOnlineRegionsLocalContext()) {
    if (region.getRegionNameAsString().startsWith(cpName3)) {
      found=(region.getCoprocessorHost().findCoprocessor(cpName3) != null);
    }
  }
  assertTrue("Class " + cpName3 + " was missing on a region",found);
}
