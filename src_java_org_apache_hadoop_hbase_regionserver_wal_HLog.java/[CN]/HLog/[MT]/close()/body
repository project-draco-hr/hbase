{
  try {
    logSyncerThread.interrupt();
    logSyncerThread.join(this.optionalFlushInterval * 2);
  }
 catch (  InterruptedException e) {
    LOG.error("Exception while waiting for syncer thread to die",e);
  }
  cacheFlushLock.lock();
  try {
synchronized (updateLock) {
      this.closed=true;
      if (LOG.isDebugEnabled()) {
        LOG.debug("closing hlog writer in " + this.dir.toString());
      }
      this.writer.close();
    }
  }
  finally {
    cacheFlushLock.unlock();
  }
}
