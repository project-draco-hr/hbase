{
synchronized (this.updateLock) {
    if (this.closed) {
      return;
    }
    if (this.forceSync || this.unflushedEntries.get() >= this.flushlogentries) {
      try {
        LOG.info("hflush remove");
        this.writer.sync();
        if (this.writer_out != null) {
          this.writer_out.sync();
        }
        this.forceSync=false;
        this.unflushedEntries.set(0);
      }
 catch (      IOException e) {
        LOG.fatal("Could not append. Requesting close of hlog",e);
        requestLogRoll();
        throw e;
      }
    }
  }
}
