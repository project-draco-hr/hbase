{
  LOG.info("testSimplePutDelete");
  utility1.startMiniCluster();
  utility2.startMiniCluster();
  ReplicationAdmin admin1=new ReplicationAdmin(conf1);
  ReplicationAdmin admin2=new ReplicationAdmin(conf2);
  new HBaseAdmin(conf1).createTable(table);
  new HBaseAdmin(conf2).createTable(table);
  HTable htable1=new HTable(conf1,tableName);
  htable1.setWriteBufferSize(1024);
  HTable htable2=new HTable(conf2,tableName);
  htable2.setWriteBufferSize(1024);
  admin1.addPeer("1",utility2.getClusterKey());
  admin2.addPeer("1",utility1.getClusterKey());
  putAndWait(row,famName,htable1,htable2);
  putAndWait(row1,famName,htable2,htable1);
  assertEquals("Puts were replicated back ",2,getCount(htable1,put));
  deleteAndWait(row,htable1,htable2);
  assertEquals("Puts were replicated back ",2,getCount(htable2,put));
  deleteAndWait(row1,htable2,htable1);
  assertEquals("Deletes were replicated back ",2,getCount(htable1,delete));
  utility2.shutdownMiniCluster();
  utility1.shutdownMiniCluster();
}
