{
  String conf=generateConfig(rsPort);
  String dir=serverWorkingDir(serverName,rsPort);
  executeCommand("mkdir -p " + dir);
  writeStringToFile(conf,dir + "/" + "hbase-site.xml");
  Map<String,String> envOverrides=new HashMap<String,String>();
  envOverrides.put("HBASE_LOG_DIR",dir);
  envOverrides.put("HBASE_PID_DIR",dir);
  try {
    FileUtils.copyFile(new File(hbaseHome,"conf/log4j.properties"),new File(dir,"log4j.properties"));
  }
 catch (  IOException ex) {
    LOG.error("Could not install log4j.properties into " + dir);
  }
  executeCommand(hbaseDaemonScript + " --config " + dir+ " start "+ serverName,envOverrides);
  daemonPidFiles.add(pidFilePath(serverName,rsPort));
}
