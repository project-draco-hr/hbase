{
  int size=0;
  Text[] cols=new Text[]{HConstants.COLUMN_FAMILY};
  HScannerInterface s=t.obtainScanner(cols,HConstants.EMPTY_START_ROW,System.currentTimeMillis(),null);
  try {
    HStoreKey curKey=new HStoreKey();
    TreeMap<Text,byte[]> curVals=new TreeMap<Text,byte[]>();
    while (s.next(curKey,curVals)) {
      HRegionInfo hri=Writables.getHRegionInfoOrNull(curVals.get(HConstants.COL_REGIONINFO));
      if (hri.getTableDesc().getName().toString().equals(tableName)) {
        size++;
      }
    }
    return size;
  }
  finally {
    if (s != null) {
      s.close();
    }
  }
}
