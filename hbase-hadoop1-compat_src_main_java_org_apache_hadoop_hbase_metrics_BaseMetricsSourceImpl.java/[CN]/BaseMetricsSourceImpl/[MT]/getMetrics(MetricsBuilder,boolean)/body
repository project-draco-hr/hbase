{
  MetricsRecordBuilder rb=metricsBuilder.addRecord(metricsName).setContext(metricsContext);
  for (  Map.Entry<String,MetricMutableCounterLong> entry : counters.entrySet()) {
    entry.getValue().snapshot(rb,all);
  }
  for (  Map.Entry<String,MetricMutableGaugeLong> entry : gauges.entrySet()) {
    entry.getValue().snapshot(rb,all);
  }
}
