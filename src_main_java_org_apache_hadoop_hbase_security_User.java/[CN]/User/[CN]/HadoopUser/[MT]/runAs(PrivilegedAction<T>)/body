{
  UserGroupInformation previous=(UserGroupInformation)callStatic("getCurrentUGI");
  if (ugi != null) {
    callStatic("setCurrentUser",new Class[]{UserGroupInformation.class},new Object[]{ugi});
  }
  T result=action.run();
  callStatic("setCurrentUser",new Class[]{UserGroupInformation.class},new Object[]{previous});
  return result;
}
