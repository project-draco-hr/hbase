{
  this.lock.obtainWriteLock();
  try {
    for (Iterator<HRegion> it=regions.values().iterator(); it.hasNext(); ) {
      HRegion region=it.next();
      if (LOG.isDebugEnabled()) {
        LOG.debug("closing region " + region.getRegionName());
      }
      try {
        region.close();
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
    regions.clear();
  }
  finally {
    this.lock.releaseWriteLock();
  }
}
