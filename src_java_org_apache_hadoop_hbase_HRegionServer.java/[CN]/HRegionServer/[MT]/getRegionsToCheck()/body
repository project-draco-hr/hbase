{
  ArrayList<HRegion> regionsToCheck=new ArrayList<HRegion>();
  lock.readLock().lock();
  try {
    regionsToCheck.addAll(this.onlineRegions.values());
  }
  finally {
    lock.readLock().unlock();
  }
  for (final ListIterator<HRegion> i=regionsToCheck.listIterator(); i.hasNext(); ) {
    HRegion r=i.next();
    if (r.isClosed()) {
      i.remove();
    }
  }
  return regionsToCheck;
}
