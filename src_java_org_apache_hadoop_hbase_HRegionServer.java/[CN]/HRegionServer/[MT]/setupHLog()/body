{
  String rootDir=this.conf.get(HConstants.HBASE_DIR);
  LOG.info("Root dir: " + rootDir);
  Path logdir=new Path(new Path(rootDir),"log" + "_" + getThisIP() + "_"+ this.serverInfo.getStartCode()+ "_"+ this.serverInfo.getServerAddress().getPort());
  if (LOG.isDebugEnabled()) {
    LOG.debug("Log dir " + logdir);
  }
  FileSystem fs=FileSystem.get(this.conf);
  if (fs.exists(logdir)) {
    throw new RegionServerRunningException("region server already " + "running at " + this.serverInfo.getServerAddress().toString() + " because logdir "+ logdir.toString()+ " exists");
  }
  return new HLog(fs,logdir,conf);
}
