{
  LinkedList<CachedBlock> blocks=new LinkedList<CachedBlock>();
  while (!queue.isEmpty()) {
    blocks.addFirst(queue.poll());
  }
  return blocks.toArray(new CachedBlock[blocks.size()]);
}
