{
  try {
    notifyChangedReadersObservers();
    LOG.debug("Removing store files after compaction...");
    boolean evictOnClose=cacheConf != null ? cacheConf.shouldEvictOnClose() : true;
    for (    StoreFile compactedFile : compactedFiles) {
      compactedFile.closeReader(evictOnClose);
    }
    if (removeFiles) {
      this.fs.removeStoreFiles(this.getColumnFamilyName(),compactedFiles);
    }
  }
 catch (  IOException e) {
    e=e instanceof RemoteException ? ((RemoteException)e).unwrapRemoteException() : e;
    LOG.error("Failed removing compacted files in " + this + ". Files we were trying to remove are "+ compactedFiles.toString()+ "; some of them may have been already removed",e);
  }
  this.storeSize=0L;
  this.totalUncompressedBytes=0L;
  for (  StoreFile hsf : this.storeEngine.getStoreFileManager().getStorefiles()) {
    StoreFile.Reader r=hsf.getReader();
    if (r == null) {
      LOG.warn("StoreFile " + hsf + " has a null Reader");
      continue;
    }
    this.storeSize+=r.length();
    this.totalUncompressedBytes+=r.getTotalUncompressedBytes();
  }
}
