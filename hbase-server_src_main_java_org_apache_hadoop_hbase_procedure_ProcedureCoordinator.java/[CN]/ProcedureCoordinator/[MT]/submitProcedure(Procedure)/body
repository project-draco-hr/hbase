{
  if (proc == null) {
    return false;
  }
  String procName=proc.getName();
synchronized (procedures) {
    Procedure oldProc=procedures.get(procName);
    if (oldProc != null) {
      if (oldProc.completedLatch.getCount() != 0) {
        LOG.warn("Procedure " + procName + " currently running.  Rejecting new request");
        return false;
      }
      LOG.debug("Procedure " + procName + " was in running list but was completed.  Accepting new attempt.");
      procedures.remove(procName);
    }
  }
  Future<Void> f=null;
  try {
synchronized (procedures) {
      f=this.pool.submit(proc);
      this.procedures.put(procName,proc);
    }
    return true;
  }
 catch (  RejectedExecutionException e) {
    LOG.warn("Procedure " + procName + " rejected by execution pool.  Propagating error and "+ "cancelling operation.",e);
    proc.receive(new ForeignException(procName,e));
    if (f != null) {
      f.cancel(true);
    }
  }
  return false;
}
