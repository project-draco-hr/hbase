{
  LOG.debug("Starting to archive files:" + toArchive);
  long start=EnvironmentEdgeManager.currentTimeMillis();
  List<File> failures=resolveAndArchive(fs,baseArchiveDir,toArchive,start);
  if (failures.size() > 0) {
    try {
      LOG.error("Failed to complete archive, deleting extra store files.");
      deleteFilesWithoutArchiving(failures);
    }
 catch (    IOException e) {
      LOG.warn("Failed to delete store file(s) when archiving failed",e);
    }
    return false;
  }
  return true;
}
