{
  long startWait=System.currentTimeMillis();
  waitTableAvailable(admin,table,timeoutMillis);
  long remainder=System.currentTimeMillis() - startWait;
  while (!admin.isTableEnabled(table)) {
    assertTrue("Timed out waiting for table to become available and enabled " + Bytes.toStringBinary(table),System.currentTimeMillis() - remainder < timeoutMillis);
    Thread.sleep(200);
  }
  try {
    Canary.sniff(admin,Bytes.toString(table));
  }
 catch (  Exception e) {
    throw new IOException(e);
  }
}
