{
  while (!stopRequested.get()) {
    while (!rollLog && !stopRequested.get()) {
      long now=System.currentTimeMillis();
      if (this.lastLogRollTime + this.optionalLogRollInterval <= now) {
        rollLog=true;
        this.lastLogRollTime=now;
      }
 else {
synchronized (rollLock) {
          try {
            rollLock.wait(threadWakeFrequency);
          }
 catch (          InterruptedException e) {
            continue;
          }
        }
      }
    }
    if (!rollLog) {
      continue;
    }
synchronized (logRollerLock) {
      try {
        LOG.info("Rolling hlog. Number of entries: " + log.getNumEntries());
        log.rollWriter();
      }
 catch (      IOException ex) {
        LOG.error("Log rolling failed",RemoteExceptionHandler.checkIOException(ex));
        checkFileSystem();
      }
catch (      Exception ex) {
        LOG.error("Log rolling failed",ex);
        checkFileSystem();
      }
 finally {
        rollLog=false;
      }
    }
  }
}
