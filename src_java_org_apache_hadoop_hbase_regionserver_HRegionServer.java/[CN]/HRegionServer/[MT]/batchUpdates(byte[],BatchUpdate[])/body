{
  int i=0;
  checkOpen();
  try {
    HRegion region=getRegion(regionName);
    this.cacheFlusher.reclaimMemcacheMemory();
    for (    BatchUpdate batchUpdate : b) {
      this.requestCount.incrementAndGet();
      validateValuesLength(batchUpdate,region);
    }
    i+=b.length - 1;
    region.batchUpdate(b);
  }
 catch (  OutOfMemoryError error) {
    abort();
    LOG.fatal("Ran out of memory",error);
  }
catch (  WrongRegionException ex) {
    return i;
  }
catch (  NotServingRegionException ex) {
    return i;
  }
catch (  IOException e) {
    checkFileSystem();
    throw e;
  }
  return i;
}
