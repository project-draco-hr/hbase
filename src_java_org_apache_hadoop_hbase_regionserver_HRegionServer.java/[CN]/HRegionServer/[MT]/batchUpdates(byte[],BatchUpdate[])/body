{
  int i=0;
  checkOpen();
  try {
    HRegion region=getRegion(regionName);
    this.cacheFlusher.reclaimMemcacheMemory();
    Integer[] locks=new Integer[b.length];
    for (i=0; i < b.length; i++) {
      this.requestCount.incrementAndGet();
      validateValuesLength(b[i],region);
      locks[i]=getLockFromId(b[i].getRowLock());
      region.batchUpdate(b[i],locks[i]);
    }
  }
 catch (  WrongRegionException ex) {
    return i;
  }
catch (  NotServingRegionException ex) {
    return i;
  }
catch (  Throwable t) {
    throw convertThrowableToIOE(cleanup(t));
  }
  return -1;
}
