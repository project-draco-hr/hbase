{
  String n=Thread.currentThread().getName();
  UncaughtExceptionHandler handler=new UncaughtExceptionHandler(){
    public void uncaughtException(    Thread t,    Throwable e){
      abort();
      LOG.fatal("Set stop flag in " + t.getName(),e);
    }
  }
;
  Threads.setDaemonThreadRunning(this.logRoller,n + ".logRoller",handler);
  Threads.setDaemonThreadRunning(this.logFlusher,n + ".logFlusher",handler);
  Threads.setDaemonThreadRunning(this.cacheFlusher,n + ".cacheFlusher",handler);
  Threads.setDaemonThreadRunning(this.compactSplitThread,n + ".compactor",handler);
  Threads.setDaemonThreadRunning(this.workerThread,n + ".worker",handler);
  Threads.setDaemonThreadRunning(this.majorCompactionChecker,n + ".majorCompactionChecker",handler);
  this.leases.setName(n + ".leaseChecker");
  this.leases.start();
  int port=this.conf.getInt("hbase.regionserver.info.port",60030);
  if (port >= 0) {
    String a=this.conf.get("hbase.master.info.bindAddress","0.0.0.0");
    this.infoServer=new InfoServer("regionserver",a,port,false);
    this.infoServer.setAttribute("regionserver",this);
    this.infoServer.start();
  }
  this.server.start();
  LOG.info("HRegionServer started at: " + serverInfo.getServerAddress().toString());
}
