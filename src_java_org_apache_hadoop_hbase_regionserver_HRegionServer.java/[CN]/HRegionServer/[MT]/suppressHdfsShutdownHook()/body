{
  try {
    Field field=FileSystem.class.getDeclaredField("clientFinalizer");
    field.setAccessible(true);
    Thread hdfsClientFinalizer=(Thread)field.get(null);
    if (hdfsClientFinalizer == null) {
      throw new RuntimeException("client finalizer is null, can't suppress!");
    }
    Runtime.getRuntime().removeShutdownHook(hdfsClientFinalizer);
    return hdfsClientFinalizer;
  }
 catch (  NoSuchFieldException nsfe) {
    LOG.fatal("Couldn't find field 'clientFinalizer' in FileSystem!",nsfe);
    throw new RuntimeException("Failed to suppress HDFS shutdown hook");
  }
catch (  IllegalAccessException iae) {
    LOG.fatal("Couldn't access field 'clientFinalizer' in FileSystem!",iae);
    throw new RuntimeException("Failed to suppress HDFS shutdown hook");
  }
}
