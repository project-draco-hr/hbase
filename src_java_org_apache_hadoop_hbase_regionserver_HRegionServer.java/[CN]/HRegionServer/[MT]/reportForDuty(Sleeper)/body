{
  if (LOG.isDebugEnabled()) {
    LOG.debug("Telling master at " + conf.get(MASTER_ADDRESS) + " that we are up");
  }
  this.hbaseMaster=(HMasterRegionInterface)HbaseRPC.waitForProxy(HMasterRegionInterface.class,HMasterRegionInterface.versionID,new HServerAddress(conf.get(MASTER_ADDRESS)).getInetSocketAddress(),this.conf);
  HbaseMapWritable result=null;
  long lastMsg=0;
  while (!stopRequested.get()) {
    try {
      this.requestCount.set(0);
      this.serverInfo.setLoad(new HServerLoad(0,onlineRegions.size()));
      lastMsg=System.currentTimeMillis();
      result=this.hbaseMaster.regionServerStartup(serverInfo);
      if (LOG.isDebugEnabled()) {
        LOG.debug("Done telling master we are up");
      }
      break;
    }
 catch (    IOException e) {
      LOG.warn("error telling master we are up",e);
      sleeper.sleep(lastMsg);
      continue;
    }
  }
  return result;
}
