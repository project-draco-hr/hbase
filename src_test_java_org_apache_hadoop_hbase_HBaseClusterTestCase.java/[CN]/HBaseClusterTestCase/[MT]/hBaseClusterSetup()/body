{
  File testDir=new File(getUnitTestdir(getName()).toString());
  if (testDir.exists())   testDir.delete();
  this.zooKeeperCluster=new MiniZooKeeperCluster();
  int clientPort=this.zooKeeperCluster.startup(testDir);
  conf.set("hbase.zookeeper.property.clientPort",Integer.toString(clientPort));
  Configuration c=new Configuration(this.conf);
  this.cluster=new MiniHBaseCluster(c,regionServers);
  if (openMetaTable) {
    new HTable(c,HConstants.META_TABLE_NAME);
  }
}
