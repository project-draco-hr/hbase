{
  FSHLog log=(FSHLog)HLogFactory.createHLog(fs,hbaseDir,"testFailedToCreateHLogIfParentRenamed",conf);
  long filenum=System.currentTimeMillis();
  Path path=log.computeFilename(filenum);
  HLogFactory.createWALWriter(fs,path,conf);
  Path parent=path.getParent();
  path=log.computeFilename(filenum + 1);
  Path newPath=new Path(parent.getParent(),parent.getName() + "-splitting");
  fs.rename(parent,newPath);
  HLogFactory.createWALWriter(fs,path,conf);
  fail("It should fail to create the new WAL");
}
