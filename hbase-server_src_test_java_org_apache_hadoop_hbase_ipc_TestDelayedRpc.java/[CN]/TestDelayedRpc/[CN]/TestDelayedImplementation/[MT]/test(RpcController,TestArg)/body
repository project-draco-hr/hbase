{
  boolean delay=testArg.getDelay();
  TestResponse.Builder responseBuilder=TestResponse.newBuilder();
  if (!delay) {
    responseBuilder.setResponse(UNDELAYED);
    return responseBuilder.build();
  }
  final Delayable call=RpcServer.getCurrentCall();
  call.startDelay(delayReturnValue);
  new Thread(){
    public void run(){
      try {
        Thread.sleep(500);
        TestResponse.Builder responseBuilder=TestResponse.newBuilder();
        call.endDelay(delayReturnValue ? responseBuilder.setResponse(DELAYED).build() : null);
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
.start();
  responseBuilder.setResponse(0xDEADBEEF);
  return responseBuilder.build();
}
