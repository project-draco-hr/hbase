{
  MetricsRegionServerWrapperStub wrapper=new MetricsRegionServerWrapperStub();
  MetricsRegionServerSource source=CompatibilityFactory.getInstance(MetricsRegionServerSourceFactory.class).createServer(wrapper);
  MetricsRegionServer rsm=new MetricsRegionServer(wrapper,source);
  MetricsRegionServerSource serverSource=rsm.getMetricsSource();
  HELPER.assertTag("serverName","test",serverSource);
  HELPER.assertTag("clusterId","tClusterId",serverSource);
  HELPER.assertTag("zookeeperQuorum","zk",serverSource);
  HELPER.assertGauge("regionServerStartTime",100,serverSource);
  HELPER.assertGauge("regionCount",101,serverSource);
  HELPER.assertGauge("storeCount",2,serverSource);
  HELPER.assertGauge("storeFileCount",300,serverSource);
  HELPER.assertGauge("memstoreSize",1025,serverSource);
  HELPER.assertGauge("storeFileSize",1900,serverSource);
  HELPER.assertCounter("totalRequestCount",899,serverSource);
  HELPER.assertCounter("readRequestCount",997,serverSource);
  HELPER.assertCounter("writeRequestCount",707,serverSource);
  HELPER.assertCounter("checkMutateFailedCount",401,serverSource);
  HELPER.assertCounter("checkMutatePassedCount",405,serverSource);
  HELPER.assertGauge("storeFileIndexSize",406,serverSource);
  HELPER.assertGauge("staticIndexSize",407,serverSource);
  HELPER.assertGauge("staticBloomSize",408,serverSource);
  HELPER.assertGauge("putsWithoutWALCount",409,serverSource);
  HELPER.assertGauge("putsWithoutWALSize",410,serverSource);
  HELPER.assertGauge("percentFilesLocal",99,serverSource);
  HELPER.assertGauge("compactionQueueLength",411,serverSource);
  HELPER.assertGauge("flushQueueLength",412,serverSource);
  HELPER.assertGauge("blockCacheFreeSize",413,serverSource);
  HELPER.assertGauge("blockCacheCount",414,serverSource);
  HELPER.assertGauge("blockCacheSize",415,serverSource);
  HELPER.assertCounter("blockCacheHitCount",416,serverSource);
  HELPER.assertCounter("blockCacheMissCount",417,serverSource);
  HELPER.assertCounter("blockCacheEvictionCount",418,serverSource);
  HELPER.assertGauge("blockCountHitPercent",98,serverSource);
  HELPER.assertGauge("blockCacheExpressHitPercent",97,serverSource);
  HELPER.assertCounter("updatesBlockedTime",419,serverSource);
}
