{
  in.rewind();
  ByteBufferUtils.putInt(writeHere,in.limit());
  int prevOffset=-1;
  int offset=0;
  int keyLength=0;
  while (in.hasRemaining()) {
    offset=in.position();
    keyLength=addKv(prevOffset,writeHere,in,keyLength);
    afterEncodingKeyValue(in,writeHere,includesMemstoreTS);
    prevOffset=offset;
  }
}
