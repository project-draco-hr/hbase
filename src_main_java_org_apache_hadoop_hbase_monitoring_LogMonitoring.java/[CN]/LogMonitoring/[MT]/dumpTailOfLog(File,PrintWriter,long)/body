{
  FileInputStream fis=new FileInputStream(f);
  try {
    FileChannel channel=fis.getChannel();
    channel.position(Math.max(0,channel.size() - tailKb * 1024));
    BufferedReader r=new BufferedReader(new InputStreamReader(fis));
    r.readLine();
    String line;
    while ((line=r.readLine()) != null) {
      out.println(line);
    }
  }
  finally {
    IOUtils.closeStream(fis);
  }
}
