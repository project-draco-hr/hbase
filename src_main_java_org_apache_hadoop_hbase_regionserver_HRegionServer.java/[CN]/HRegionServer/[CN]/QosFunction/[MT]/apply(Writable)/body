{
  if (from instanceof HBaseRPC.Invocation) {
    HBaseRPC.Invocation inv=(HBaseRPC.Invocation)from;
    String methodName=inv.getMethodName();
    if (methodName.equals("next") || methodName.equals("close")) {
      Long scannerId;
      try {
        scannerId=(Long)inv.getParameters()[0];
      }
 catch (      ClassCastException ignored) {
        return NORMAL_QOS;
      }
      String scannerIdString=Long.toString(scannerId);
      InternalScanner scanner=scanners.get(scannerIdString);
      if (scanner instanceof HRegion.RegionScanner) {
        HRegion.RegionScanner rs=(HRegion.RegionScanner)scanner;
        HRegionInfo regionName=rs.getRegionName();
        if (regionName.isMetaRegion()) {
          return HIGH_QOS;
        }
      }
    }
 else     if (methodName.equals("getHServerInfo") || methodName.equals("getRegionsAssignment") || methodName.equals("unlockRow")|| methodName.equals("getProtocolVersion")|| methodName.equals("getClosestRowBefore")) {
      return HIGH_QOS;
    }
 else     if (inv.getParameterClasses()[0] == byte[].class) {
      if (isMetaRegion((byte[])inv.getParameters()[0])) {
        return HIGH_QOS;
      }
    }
 else     if (inv.getParameterClasses()[0] == MultiAction.class) {
      MultiAction ma=(MultiAction)inv.getParameters()[0];
      Set<byte[]> regions=ma.getRegions();
      for (      byte[] region : regions) {
        if (isMetaRegion(region)) {
          return HIGH_QOS;
        }
      }
    }
  }
  return NORMAL_QOS;
}
