{
  if (!(from instanceof Invocation))   return NORMAL_QOS;
  Invocation inv=(Invocation)from;
  String methodName=inv.getMethodName();
  Integer priorityByAnnotation=annotatedQos.get(methodName);
  if (priorityByAnnotation != null) {
    return priorityByAnnotation;
  }
  if (methodName.equals("next") || methodName.equals("close")) {
    Long scannerId;
    try {
      scannerId=(Long)inv.getParameters()[0];
    }
 catch (    ClassCastException ignored) {
      return NORMAL_QOS;
    }
    String scannerIdString=Long.toString(scannerId);
    RegionScanner scanner=scanners.get(scannerIdString);
    if (scanner != null && scanner.getRegionInfo().isMetaRegion()) {
      return HIGH_QOS;
    }
  }
 else   if (inv.getParameterClasses().length == 0) {
  }
 else   if (inv.getParameterClasses()[0] == byte[].class) {
    if (isMetaRegion((byte[])inv.getParameters()[0])) {
      return HIGH_QOS;
    }
  }
 else   if (inv.getParameterClasses()[0] == MultiAction.class) {
    MultiAction<?> ma=(MultiAction<?>)inv.getParameters()[0];
    Set<byte[]> regions=ma.getRegions();
    for (    byte[] region : regions) {
      if (isMetaRegion(region)) {
        return HIGH_QOS;
      }
    }
  }
  return NORMAL_QOS;
}
