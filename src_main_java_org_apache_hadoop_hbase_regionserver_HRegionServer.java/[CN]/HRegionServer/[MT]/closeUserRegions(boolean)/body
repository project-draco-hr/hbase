{
  this.lock.writeLock().lock();
  try {
synchronized (this.onlineRegions) {
      for (      Map.Entry<String,HRegion> e : this.onlineRegions.entrySet()) {
        HRegion r=e.getValue();
        if (!r.getRegionInfo().isMetaRegion()) {
          closeRegion(r.getRegionInfo(),abort,false);
        }
      }
    }
  }
  finally {
    this.lock.writeLock().unlock();
  }
}
