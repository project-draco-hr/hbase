{
  Collection<HRegion> regions=getOnlineRegionsLocalContext();
  TreeMap<byte[],HServerLoad.RegionLoad> regionLoads=new TreeMap<byte[],HServerLoad.RegionLoad>(Bytes.BYTES_COMPARATOR);
  for (  HRegion region : regions) {
    regionLoads.put(region.getRegionName(),createRegionLoad(region));
  }
  MemoryUsage memory=ManagementFactory.getMemoryMXBean().getHeapMemoryUsage();
  return new HServerLoad(requestCount.get(),(int)metrics.getRequests(),(int)(memory.getUsed() / 1024 / 1024),(int)(memory.getMax() / 1024 / 1024),regionLoads,this.hlog.getCoprocessorHost().getCoprocessors());
}
