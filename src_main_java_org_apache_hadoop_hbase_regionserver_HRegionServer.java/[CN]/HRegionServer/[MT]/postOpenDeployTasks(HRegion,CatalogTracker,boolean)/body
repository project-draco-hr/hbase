{
  if (r.hasReferences() || r.hasTooManyStoreFiles()) {
    getCompactionRequester().requestCompaction(r,r.hasReferences() ? "Region has references on open" : "Region has too many store files");
  }
  addToOnlineRegions(r);
  if (r.getRegionInfo().isRootRegion()) {
    RootLocationEditor.setRootLocation(getZooKeeper(),this.serverNameFromMasterPOV);
  }
 else   if (r.getRegionInfo().isMetaRegion()) {
    MetaEditor.updateMetaLocation(ct,r.getRegionInfo(),this.serverNameFromMasterPOV);
  }
 else {
    if (daughter) {
      MetaEditor.addDaughter(ct,r.getRegionInfo(),this.serverNameFromMasterPOV);
    }
 else {
      MetaEditor.updateRegionLocation(ct,r.getRegionInfo(),this.serverNameFromMasterPOV);
    }
  }
}
