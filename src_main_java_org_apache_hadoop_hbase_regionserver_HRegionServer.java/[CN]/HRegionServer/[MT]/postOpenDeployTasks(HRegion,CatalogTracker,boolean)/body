{
  if (r.hasReferences() || r.hasTooManyStoreFiles()) {
    getCompactionRequester().requestCompaction(r,r.hasReferences() ? "Region has references on open" : "Region has too many store files");
  }
  if (r.getRegionInfo().isRootRegion()) {
    RootLocationEditor.setRootLocation(getZooKeeper(),getServerInfo().getServerAddress());
  }
 else   if (r.getRegionInfo().isMetaRegion()) {
    MetaEditor.updateMetaLocation(ct,r.getRegionInfo(),getServerInfo());
  }
 else {
    if (daughter) {
      MetaEditor.addDaughter(ct,r.getRegionInfo(),getServerInfo());
    }
 else {
      MetaEditor.updateRegionLocation(ct,r.getRegionInfo(),getServerInfo());
    }
  }
  addToOnlineRegions(r);
}
