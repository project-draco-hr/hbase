{
  if (proc.isFailed()) {
    state=State.FAILED;
  }
  if (subprocedures == null) {
    subprocedures=new ArrayList<Procedure>();
  }
  proc.addStackIndex(subprocedures.size());
  subprocedures.add(proc);
}
