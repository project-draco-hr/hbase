{
  if (info.offLine || killedRegions.contains(info.regionName) || regionsToDelete.contains(info.regionName)) {
    unassignedRegions.remove(info.regionName);
    assignAttempts.remove(info.regionName);
    if (LOG.isDebugEnabled()) {
      LOG.debug("not assigning region: " + info.regionName);
    }
    return;
  }
  HServerInfo storedInfo=null;
  if (serverName != null) {
    TreeMap<Text,HRegionInfo> regionsToKill=killList.get(serverName);
    if (regionsToKill != null && regionsToKill.containsKey(info.regionName)) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("not assigning region (on kill list): " + info.regionName);
      }
      return;
    }
    storedInfo=serversToServerInfo.get(serverName);
  }
  if (!(unassignedRegions.containsKey(info.regionName) || pendingRegions.contains(info.regionName)) && (storedInfo == null || storedInfo.getStartCode() != startCode)) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("region unassigned: " + info.regionName + " serverName: "+ serverName+ (storedInfo == null ? " storedInfo == null" : (" startCode=" + startCode + ", storedStartCode="+ storedInfo.getStartCode())));
    }
    unassignedRegions.put(info.regionName,info);
    assignAttempts.put(info.regionName,0L);
  }
}
