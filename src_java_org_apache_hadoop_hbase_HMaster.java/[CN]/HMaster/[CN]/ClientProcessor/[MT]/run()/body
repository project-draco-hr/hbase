{
  while (!closed) {
    PendingOperation op=null;
synchronized (msgQueue) {
      while (msgQueue.size() == 0) {
        try {
          msgQueue.wait();
        }
 catch (        InterruptedException iex) {
        }
      }
      op=msgQueue.elementAt(msgQueue.size() - 1);
      msgQueue.removeElementAt(msgQueue.size() - 1);
    }
    try {
      op.process();
    }
 catch (    Exception ex) {
synchronized (msgQueue) {
        msgQueue.insertElementAt(op,0);
      }
    }
  }
}
