{
  ByteArrayOutputStream byteValue=new ByteArrayOutputStream();
  DataOutputStream s=new DataOutputStream(byteValue);
  i.write(s);
  long lockid=-1L;
  long clientId=rand.nextLong();
  try {
    lockid=server.startUpdate(regionName,clientId,i.regionName);
    server.put(regionName,clientId,lockid,COL_REGIONINFO,byteValue.toByteArray());
    server.commit(regionName,clientId,lockid,System.currentTimeMillis());
    lockid=-1L;
    if (LOG.isDebugEnabled()) {
      LOG.debug("updated columns in row: " + i.regionName);
    }
  }
 catch (  Exception e) {
    if (e instanceof RemoteException) {
      e=RemoteExceptionHandler.decodeRemoteException((RemoteException)e);
    }
    LOG.error("column update failed in row: " + i.regionName);
    LOG.error(e);
  }
 finally {
    if (lockid != -1L) {
      try {
        server.abort(regionName,clientId,lockid);
      }
 catch (      IOException iex) {
        if (iex instanceof RemoteException) {
          iex=RemoteExceptionHandler.decodeRemoteException((RemoteException)iex);
        }
        LOG.error(iex);
      }
    }
  }
}
