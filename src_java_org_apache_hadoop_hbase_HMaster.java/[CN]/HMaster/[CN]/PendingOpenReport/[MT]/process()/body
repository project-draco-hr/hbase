{
  while (!allMetaRegionsScanned) {
    try {
      allMetaRegionsScanned.wait();
    }
 catch (    InterruptedException e) {
    }
  }
  Text metaRegionName;
  HRegionInterface server;
  if (rootRegion) {
    metaRegionName=rootRegionInfo.regionName;
    server=client.getHRegionConnection(rootRegionLocation);
  }
 else {
    Text metaStartRow=knownMetaRegions.headMap(regionName).lastKey();
    MetaRegion r=knownMetaRegions.get(metaStartRow);
    metaRegionName=r.regionName;
    server=client.getHRegionConnection(r.server);
  }
  long lockid=server.startUpdate(metaRegionName,clientId,regionName);
  server.put(metaRegionName,clientId,lockid,META_COL_SERVER,serverAddress);
  server.put(metaRegionName,clientId,lockid,META_COL_STARTCODE,startCode);
  server.commit(metaRegionName,clientId,lockid);
}
