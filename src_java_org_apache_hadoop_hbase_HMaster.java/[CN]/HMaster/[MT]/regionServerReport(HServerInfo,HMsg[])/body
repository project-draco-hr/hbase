{
  String server=serverInfo.getServerAddress().toString();
  HServerInfo storedInfo=serversToServerInfo.get(server);
  if (storedInfo == null) {
    LOG.debug("received server report from unknown server: " + server);
    HMsg returnMsgs[]=new HMsg[1];
    returnMsgs[0]=new HMsg(HMsg.MSG_CALL_SERVER_STARTUP);
    return returnMsgs;
  }
 else   if (storedInfo.getStartCode() != serverInfo.getStartCode()) {
    LOG.debug("region server race condition detected: " + server);
    HMsg returnMsgs[]=new HMsg[1];
    returnMsgs[0]=new HMsg(HMsg.MSG_REGIONSERVER_ALREADY_RUNNING);
    return returnMsgs;
  }
 else {
    Text serverLabel=new Text(server);
    serverLeases.renewLease(serverLabel,serverLabel);
    serversToServerInfo.put(server,serverInfo);
    return processMsgs(serverInfo,msgs);
  }
}
