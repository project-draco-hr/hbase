{
  if (remoteId.getAddress().isUnresolved()) {
    throw new UnknownHostException("unknown host: " + remoteId.getAddress().getHostName());
  }
  this.remoteId=remoteId;
  User ticket=remoteId.getTicket();
  Class<? extends VersionedProtocol> protocol=remoteId.getProtocol();
  ConnectionHeader.Builder builder=ConnectionHeader.newBuilder();
  builder.setProtocol(protocol == null ? "" : protocol.getName());
  this.header=builder.build();
  this.setName("IPC Client (" + socketFactory.hashCode() + ") connection to "+ remoteId.getAddress().toString()+ ((ticket == null) ? " from an unknown user" : (" from " + ticket.getName())));
  this.setDaemon(true);
}
