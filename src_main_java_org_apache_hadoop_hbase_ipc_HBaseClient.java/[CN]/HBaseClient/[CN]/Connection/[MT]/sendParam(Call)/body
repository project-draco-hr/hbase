{
  if (shouldCloseConnection.get()) {
    return;
  }
  final DataOutputBuffer d=new DataOutputBuffer();
  try {
    if (LOG.isDebugEnabled())     LOG.debug(getName() + " sending #" + call.id);
    d.writeInt(0xdeadbeef);
    d.writeInt(call.id);
    call.param.write(d);
    byte[] data=d.getData();
    int dataLength=d.getLength();
    Bytes.putInt(data,0,dataLength - 4);
synchronized (this.out) {
      out.write(data,0,dataLength);
      out.flush();
    }
  }
 catch (  IOException e) {
    markClosed(e);
  }
 finally {
    IOUtils.closeStream(d);
  }
}
