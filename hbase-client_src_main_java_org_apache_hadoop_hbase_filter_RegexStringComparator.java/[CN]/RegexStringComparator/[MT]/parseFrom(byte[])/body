{
  ComparatorProtos.RegexStringComparator proto;
  try {
    proto=ComparatorProtos.RegexStringComparator.parseFrom(pbBytes);
  }
 catch (  InvalidProtocolBufferException e) {
    throw new DeserializationException(e);
  }
  RegexStringComparator comparator=new RegexStringComparator(proto.getPattern(),proto.getPatternFlags());
  final String charset=proto.getCharset();
  if (charset.length() > 0) {
    try {
      comparator.setCharset(Charset.forName(charset));
    }
 catch (    IllegalCharsetNameException e) {
      LOG.error("invalid charset",e);
    }
  }
  return comparator;
}
