{
  LOG.debug("testFailoverDeadServerCversionChange");
  conf.setBoolean(HConstants.ZOOKEEPER_USEMULTI,true);
  final Server s0=new DummyServer("cversion-change0.example.org");
  ReplicationQueues repQueues=ReplicationFactory.getReplicationQueues(s0.getZooKeeper(),conf,s0);
  repQueues.init(s0.getServerName().toString());
  files.add("log1");
  files.add("log2");
  for (  String file : files) {
    repQueues.addLog("1",file);
  }
  Server s1=new DummyServer("cversion-change1.example.org");
  ReplicationQueues rq1=ReplicationFactory.getReplicationQueues(s1.getZooKeeper(),s1.getConfiguration(),s1);
  rq1.init(s1.getServerName().toString());
  ReplicationQueuesClient client=ReplicationFactory.getReplicationQueuesClient(s1.getZooKeeper(),s1.getConfiguration(),s1);
  int v0=client.getQueuesZNodeCversion();
  rq1.claimQueues(s0.getServerName().getServerName());
  int v1=client.getQueuesZNodeCversion();
  assertEquals(v0 + 1,v1);
  s0.abort("",null);
}
