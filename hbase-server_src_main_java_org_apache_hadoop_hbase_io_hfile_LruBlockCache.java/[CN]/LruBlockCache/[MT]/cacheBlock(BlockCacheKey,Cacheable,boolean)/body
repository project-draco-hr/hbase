{
  CachedBlock cb=map.get(cacheKey);
  if (cb != null) {
    throw new RuntimeException("Cached an already cached block");
  }
  cb=new CachedBlock(cacheKey,buf,count.incrementAndGet(),inMemory);
  long newSize=updateSizeMetrics(cb,false);
  map.put(cacheKey,cb);
  elements.incrementAndGet();
  if (newSize > acceptableSize() && !evictionInProgress) {
    runEviction();
  }
}
