{
  int priorityByAnnotation=getAnnotatedPriority(header);
  if (priorityByAnnotation >= 0) {
    return priorityByAnnotation;
  }
  try {
    if (Superusers.isSuperUser(user)) {
      return HConstants.ADMIN_QOS;
    }
  }
 catch (  IllegalStateException ex) {
    if (LOG.isTraceEnabled())     LOG.trace("Marking normal priority after getting exception=" + ex);
    return HConstants.NORMAL_QOS;
  }
  return getBasePriority(header,param);
}
