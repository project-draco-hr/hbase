{
  ExecutorService executor=startupMasterExecutor("testShutdownHandler");
  CatalogTracker ct=Mockito.mock(CatalogTracker.class);
  AssignmentManagerWithExtrasForTesting am=setUpMockedAssignmentManager(this.server,this.serverManager);
  try {
    processServerShutdownHandler(ct,am,false);
  }
  finally {
    executor.shutdown();
    am.shutdown();
    ZKAssign.deleteAllNodes(this.watcher);
  }
}
