{
  ProcedureStoreTracker tracker=new ProcedureStoreTracker();
  assertTrue(tracker.isEmpty());
  Procedure[] procs=new TestProcedure[]{new TestProcedure(1),new TestProcedure(2),new TestProcedure(3),new TestProcedure(4),new TestProcedure(5),new TestProcedure(6)};
  tracker.insert(procs[0],null);
  tracker.insert(procs[1],new Procedure[]{procs[2],procs[3],procs[4]});
  assertFalse(tracker.isEmpty());
  assertTrue(tracker.isUpdated());
  tracker.resetUpdates();
  assertFalse(tracker.isUpdated());
  for (int i=0; i < 4; ++i) {
    tracker.update(procs[i]);
    assertFalse(tracker.isEmpty());
    assertFalse(tracker.isUpdated());
  }
  tracker.update(procs[4]);
  assertFalse(tracker.isEmpty());
  assertTrue(tracker.isUpdated());
  tracker.update(procs[5]);
  assertFalse(tracker.isEmpty());
  assertTrue(tracker.isUpdated());
  for (int i=0; i < 5; ++i) {
    tracker.delete(procs[i].getProcId());
    assertFalse(tracker.isEmpty());
    assertTrue(tracker.isUpdated());
  }
  tracker.delete(procs[5].getProcId());
  assertTrue(tracker.isEmpty());
}
