{
  if (closed) {
    throw new IOException("Stream closed");
  }
  if (pos < fileLength) {
    if (pos > blockEnd) {
      blockSeekTo(pos);
    }
    int realLen=Math.min(len,(int)(blockEnd - pos + 1));
    int result=blockStream.read(buf,off,realLen);
    if (result >= 0) {
      pos+=result;
    }
    return result;
  }
  return -1;
}
