{
  if (queueRecovered) {
    SortedSet<String> wals=walsByIdRecoveredQueues.get(id);
    if (wals != null && !wals.first().equals(key)) {
      cleanOldLogs(wals,key,id);
    }
  }
 else {
synchronized (this.walsById) {
      SortedSet<String> wals=walsById.get(id);
      if (!wals.first().equals(key)) {
        cleanOldLogs(wals,key,id);
      }
    }
  }
}
