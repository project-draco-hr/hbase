{
  argumentParsing(args);
  if (args.length != 0) {
    if (args[0].equals("--help") || args[0].equals("-h")) {
      System.out.println("Usage: ./bin/hbase shell [--master:master_address:port] [--html]\n");
      System.exit(1);
    }
  }
  HBaseConfiguration conf=new HBaseConfiguration();
  ConsoleReader reader=new ConsoleReader();
  System.setSecurityManager(new HQLSecurityManager());
  reader.setBellEnabled(conf.getBoolean("hbaseshell.jline.bell.enabled",DEFAULT_BELL_ENABLED));
  Writer out=new OutputStreamWriter(System.out,"UTF-8");
  TableFormatter tableFormatter=new TableFormatterFactory(out,conf).get();
  if (HTML_OPTION != null) {
    tableFormatter=new HtmlTableFormatter(out);
  }
  HelpCommand help=new HelpCommand(out,tableFormatter);
  if (args.length == 0 || !args[0].equals(String.valueOf(Constants.FLAG_RELAUNCH))) {
    help.printVersion();
  }
  StringBuilder queryStr=new StringBuilder();
  String extendedLine;
  HQLClient hql=new HQLClient(conf,IP,PORT,out,tableFormatter);
  while ((extendedLine=reader.readLine(getPrompt(queryStr))) != null) {
    if (isEndOfCommand(extendedLine)) {
      queryStr.append(" " + extendedLine);
      long start=System.currentTimeMillis();
      ReturnMsg rs=hql.executeQuery(queryStr.toString());
      long end=System.currentTimeMillis();
      if (rs != null) {
        if (rs != null && rs.getType() > Constants.ERROR_CODE)         System.out.println(rs.getMsg() + executeTime((rs.getType() == 1),start,end));
 else         if (rs.getType() == Constants.ERROR_CODE)         System.out.println(rs.getMsg());
      }
      queryStr=new StringBuilder();
    }
 else {
      queryStr.append(" " + extendedLine);
    }
  }
  System.out.println();
}
