{
  long ts=1;
  byte[] value=Bytes.toBytes("a real value");
  byte[] evalue=new byte[0];
  KeyValue kv1=new KeyValue(rowA,family,qualA,ts,value);
  KeyValue kv1ko=kv1.clone();
  assertTrue(kv1.equals(kv1ko));
  kv1ko.convertToKeyOnly();
  assertTrue(kv1.equals(kv1ko));
  assertTrue(kv1.getValue().length != 0);
  assertTrue(kv1ko.getValue().length == 0);
  KeyValue kv2=new KeyValue(rowA,family,qualA,ts,evalue);
  KeyValue kv2ko=kv2.clone();
  assertTrue(kv2.equals(kv2ko));
  kv2ko.convertToKeyOnly();
  assertTrue(kv2.equals(kv2ko));
  assertFalse(kv2.getBuffer() == kv2ko.getBuffer());
  assertTrue(kv2.getValue().length == 0);
  assertTrue(kv2ko.getValue().length == 0);
}
