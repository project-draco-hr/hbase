{
  if (preferDirect) {
    return ctx.alloc().directBuffer(msg.readableBytes());
  }
 else {
    return ctx.alloc().buffer(msg.readableBytes());
  }
}
