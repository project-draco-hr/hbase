{
  Class<?> saslDataTransferClientClass=null;
  try {
    saslDataTransferClientClass=Class.forName("org.apache.hadoop.hdfs.protocol.datatransfer.sasl.SaslDataTransferClient");
  }
 catch (  ClassNotFoundException e) {
    LOG.warn("No SaslDataTransferClient class found, should be hadoop 2.5-");
  }
  try {
    return saslDataTransferClientClass != null ? createSaslAdaptor27(saslDataTransferClientClass) : createSaslAdaptor25();
  }
 catch (  NoSuchFieldException|NoSuchMethodException e) {
    throw new Error(e);
  }
}
