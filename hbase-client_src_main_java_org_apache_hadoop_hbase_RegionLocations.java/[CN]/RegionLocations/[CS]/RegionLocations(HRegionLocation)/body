{
  int numNonNullElements=0;
  int maxReplicaId=-1;
  for (  HRegionLocation loc : locations) {
    if (loc != null) {
      numNonNullElements++;
      if (loc.getRegionInfo().getReplicaId() > maxReplicaId) {
        maxReplicaId=loc.getRegionInfo().getReplicaId();
      }
    }
  }
  this.numNonNullElements=numNonNullElements;
  if (maxReplicaId + 1 == locations.length) {
    this.locations=locations;
  }
 else {
    this.locations=new HRegionLocation[maxReplicaId + 1];
    for (    HRegionLocation loc : locations) {
      if (loc != null) {
        this.locations[loc.getRegionInfo().getReplicaId()]=loc;
      }
    }
  }
}
