{
  CachedBlock[] blocks=queue.get();
  long freedBytes=0;
  for (int i=0; i < blocks.length; i++) {
    freedBytes+=evictBlock(blocks[i]);
    if (freedBytes >= toFree) {
      return freedBytes;
    }
  }
  return freedBytes;
}
