{
  Connection c;
  ServerSocketChannel server=(ServerSocketChannel)key.channel();
  SocketChannel channel;
  while ((channel=server.accept()) != null) {
    try {
      channel.configureBlocking(false);
      channel.socket().setTcpNoDelay(tcpNoDelay);
      channel.socket().setKeepAlive(tcpKeepAlive);
    }
 catch (    IOException ioe) {
      channel.close();
      throw ioe;
    }
    Reader reader=getReader();
    try {
      reader.startAdd();
      SelectionKey readKey=reader.registerChannel(channel);
      c=getConnection(channel,System.currentTimeMillis());
      readKey.attach(c);
synchronized (connectionList) {
        connectionList.add(numConnections,c);
        numConnections++;
      }
      if (LOG.isDebugEnabled())       LOG.debug(getName() + ": connection from " + c.toString()+ "; # active connections: "+ numConnections);
    }
  finally {
      reader.finishAdd();
    }
  }
}
