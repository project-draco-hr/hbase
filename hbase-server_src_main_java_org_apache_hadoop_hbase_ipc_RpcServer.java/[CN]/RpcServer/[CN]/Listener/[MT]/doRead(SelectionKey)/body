{
  int count;
  Connection c=(Connection)key.attachment();
  if (c == null) {
    return;
  }
  c.setLastContact(System.currentTimeMillis());
  try {
    count=c.readAndProcess();
    if (count > 0) {
      c.setLastContact(System.currentTimeMillis());
    }
  }
 catch (  InterruptedException ieo) {
    throw ieo;
  }
catch (  Exception e) {
    if (LOG.isDebugEnabled()) {
      LOG.debug(getName() + ": Caught exception while reading:",e);
    }
    count=-1;
  }
  if (count < 0) {
    if (LOG.isDebugEnabled()) {
      LOG.debug(getName() + ": DISCONNECTING client " + c.toString()+ " because read count="+ count+ ". Number of active connections: "+ numConnections);
    }
    closeConnection(c);
  }
}
