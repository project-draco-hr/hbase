import re
import requests
import sys
if (__name__ == '__main__'):
    if (len(sys.argv) != 2):
        print 'ERROR : Provide the jenkins job console URL as the only argument.'
        sys.exit(1)
    print 'Fetching {}'.format(sys.argv[1])
    [all_tests, hanging_tests, failed_tests] = get_hanging_tests(sys.argv[1])
    print 'Found {} hanging tests:'.format(len(hanging_tests))
    for test in hanging_tests:
        print test
    print '\n'
    print 'Found {} failed tests:'.format(len(failed_tests))
    for test in failed_tests:
        print test
