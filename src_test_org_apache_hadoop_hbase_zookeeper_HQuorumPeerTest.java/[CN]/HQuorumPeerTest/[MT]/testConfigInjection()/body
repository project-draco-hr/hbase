{
  String s="tickTime=2000\n" + "initLimit=10\n" + "syncLimit=5\n"+ "dataDir=${hbase.tmp.dir}/zookeeper\n"+ "clientPort=2181\n"+ "server.0=${hbase.master.hostname}:2888:3888\n";
  InputStream is=new ByteArrayInputStream(s.getBytes());
  HQuorumPeer.parseConfig(is);
  int tickTime=QuorumPeerConfig.getTickTime();
  assertEquals(2000,tickTime);
  int initLimit=QuorumPeerConfig.getInitLimit();
  assertEquals(10,initLimit);
  int syncLimit=QuorumPeerConfig.getSyncLimit();
  assertEquals(5,syncLimit);
  String userName=System.getProperty("user.name");
  String dataDir="/tmp/hbase-" + userName + "/zookeeper";
  assertEquals(dataDir,ServerConfig.getDataDir());
  assertEquals(2181,ServerConfig.getClientPort());
  Map<Long,QuorumServer> servers=QuorumPeerConfig.getServers();
  assertEquals(1,servers.size());
  assertTrue(servers.containsKey(Long.valueOf(0)));
  QuorumServer server=servers.get(Long.valueOf(0));
  assertEquals("localhost",server.addr.getHostName());
}
