{
  byte[] tableName=Bytes.toBytes("testtable");
  byte[] fam=Bytes.toBytes("info");
  byte[][] families={fam};
  String method=this.getName();
  HBaseConfiguration conf=new HBaseConfiguration();
  conf.setInt("hbase.hregion.keyvalue.timestamp.slop.millisecs",1000);
  this.region=initHRegion(tableName,method,conf,families);
  boolean caughtExcep=false;
  try {
    try {
      region.put(new Put(row).add(fam,Bytes.toBytes("qual"),Bytes.toBytes("value")),false);
      region.put(new Put(row).add(fam,Bytes.toBytes("qual"),System.currentTimeMillis() + 2000,Bytes.toBytes("value")),false);
      fail("Expected IOE for TS out of configured timerange");
    }
 catch (    FailedSanityCheckException ioe) {
      LOG.debug("Received expected exception",ioe);
      caughtExcep=true;
    }
    assertTrue("Should catch FailedSanityCheckException",caughtExcep);
  }
  finally {
    HRegion.closeHRegion(this.region);
    this.region=null;
  }
}
