{
  byte[] tableName=Bytes.toBytes("testDeleteRowWithBloomFilter");
  byte[] familyName=Bytes.toBytes("familyName");
  HColumnDescriptor hcd=new HColumnDescriptor(familyName).setMaxVersions(Integer.MAX_VALUE).setBloomFilterType(BloomType.ROWCOL);
  HTableDescriptor htd=new HTableDescriptor(TableName.valueOf(tableName));
  htd.addFamily(hcd);
  HRegionInfo info=new HRegionInfo(htd.getTableName(),null,null,false);
  Path path=new Path(DIR + "TestDeleteRowWithBloomFilter");
  this.region=HRegion.createHRegion(info,path,conf,htd);
  try {
    byte row[]=Bytes.toBytes("row1");
    byte col[]=Bytes.toBytes("col1");
    Put put=new Put(row);
    put.add(familyName,col,1,Bytes.toBytes("SomeRandomValue"));
    region.put(put);
    region.flushcache();
    Delete del=new Delete(row);
    region.delete(del);
    region.flushcache();
    Get get=new Get(row);
    get.addColumn(familyName,col);
    Cell[] keyValues=region.get(get).rawCells();
    assertTrue(keyValues.length == 0);
  }
  finally {
    HRegion.closeHRegion(this.region);
    this.region=null;
  }
}
