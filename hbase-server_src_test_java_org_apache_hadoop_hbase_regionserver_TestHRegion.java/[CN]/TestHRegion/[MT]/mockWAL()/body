{
  WAL wal=mock(WAL.class);
  Mockito.when(wal.append((HTableDescriptor)Mockito.any(),(HRegionInfo)Mockito.any(),(WALKey)Mockito.any(),(WALEdit)Mockito.any(),Mockito.anyBoolean())).thenAnswer(new Answer<Long>(){
    @Override public Long answer(    InvocationOnMock invocation) throws Throwable {
      WALKey key=invocation.getArgumentAt(2,WALKey.class);
      MultiVersionConcurrencyControl.WriteEntry we=key.getMvcc().begin();
      key.setWriteEntry(we);
      return 1L;
    }
  }
);
  return wal;
}
