{
  this.conf=HBaseConfiguration.create(c);
  this.connection=HConnectionManager.getConnection(this.conf);
  this.pause=this.conf.getLong("hbase.client.pause",1000);
  this.numRetries=this.conf.getInt("hbase.client.retries.number",10);
  this.retryLongerMultiplier=this.conf.getInt("hbase.client.retries.longer.multiplier",10);
  int tries=0;
  while (true) {
    try {
      this.connection.getMaster();
      return;
    }
 catch (    MasterNotRunningException mnre) {
      HConnectionManager.deleteStaleConnection(this.connection);
      this.connection=HConnectionManager.getConnection(this.conf);
    }
catch (    UndeclaredThrowableException ute) {
      HConnectionManager.deleteStaleConnection(this.connection);
      this.connection=HConnectionManager.getConnection(this.conf);
    }
    tries++;
    if (tries >= numRetries) {
      HConnectionManager.deleteStaleConnection(this.connection);
      throw new MasterNotRunningException("Retried " + numRetries + " times");
    }
    try {
      Thread.sleep(getPauseTime(tries));
    }
 catch (    InterruptedException e) {
      Thread.currentThread().interrupt();
      HConnectionManager.deleteStaleConnection(this.connection);
      throw new MasterNotRunningException("Interrupted after " + tries + " tries");
    }
  }
}
