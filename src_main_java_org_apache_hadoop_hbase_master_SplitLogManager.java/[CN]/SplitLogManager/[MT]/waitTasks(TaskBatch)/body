{
synchronized (batch) {
    while ((batch.done + batch.error) != batch.installed) {
      try {
        batch.wait(100);
        if (stopper.isStopped()) {
          LOG.warn("Stopped while waiting for log splits to be completed");
          return;
        }
      }
 catch (      InterruptedException e) {
        LOG.warn("Interrupted while waiting for log splits to be completed");
        Thread.currentThread().interrupt();
        return;
      }
    }
  }
}
