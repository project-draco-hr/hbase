{
  Task oldtask;
  oldtask=tasks.putIfAbsent(path,new Task(batch));
  if (oldtask != null) {
    batch.installed--;
synchronized (oldtask) {
      if (oldtask.isOrphan()) {
        if (oldtask.deleted) {
          return (null);
        }
        oldtask.setBatch(batch);
      }
    }
    LOG.info("Previously orphan task " + path + " is now being waited upon");
    return (null);
  }
  return oldtask;
}
