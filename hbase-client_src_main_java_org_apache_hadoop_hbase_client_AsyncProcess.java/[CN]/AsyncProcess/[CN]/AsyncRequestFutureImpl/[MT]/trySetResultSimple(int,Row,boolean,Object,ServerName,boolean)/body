{
  Object resObj=null;
  if (!isReplicaGet(row)) {
    if (isFromReplica) {
      throw new AssertionError("Unexpected stale result for " + row);
    }
    results[index]=result;
  }
 else {
synchronized (replicaResultLock) {
      if ((resObj=results[index]) == null) {
        if (isFromReplica) {
          throw new AssertionError("Unexpected stale result for " + row);
        }
        results[index]=result;
      }
    }
  }
  ReplicaResultState rrs=(resObj instanceof ReplicaResultState) ? (ReplicaResultState)resObj : null;
  if (rrs == null && isError) {
    errors.add((Throwable)result,row,server);
  }
  if (resObj == null) {
    decActionCounter(index);
    return null;
  }
  return rrs;
}
