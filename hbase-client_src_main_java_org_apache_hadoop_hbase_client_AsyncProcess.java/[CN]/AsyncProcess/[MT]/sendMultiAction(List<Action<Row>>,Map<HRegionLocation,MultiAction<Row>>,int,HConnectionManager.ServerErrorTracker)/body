{
  for (  Map.Entry<HRegionLocation,MultiAction<Row>> e : actionsByServer.entrySet()) {
    final HRegionLocation loc=e.getKey();
    final MultiAction<Row> multi=e.getValue();
    final String regionName=loc.getRegionInfo().getEncodedName();
    incTaskCounters(regionName);
    Runnable runnable=new Runnable(){
      @Override public void run(){
        MultiResponse res;
        try {
          MultiServerCallable<Row> callable=createCallable(loc,multi);
          try {
            res=createCaller(callable).callWithoutRetries(callable);
          }
 catch (          IOException e) {
            LOG.warn("The call to the RS failed, we don't know where we stand. location=" + loc,e);
            resubmitAll(initialActions,multi,loc,numAttempt + 1,e,errorsByServer);
            return;
          }
          receiveMultiAction(initialActions,multi,loc,res,numAttempt,errorsByServer);
        }
  finally {
          decTaskCounters(regionName);
        }
      }
    }
;
    try {
      this.pool.submit(runnable);
    }
 catch (    RejectedExecutionException ree) {
      decTaskCounters(regionName);
      LOG.warn("The task was rejected by the pool. This is unexpected. " + "location=" + loc,ree);
      resubmitAll(initialActions,multi,loc,numAttempt + 1,ree,errorsByServer);
    }
  }
}
