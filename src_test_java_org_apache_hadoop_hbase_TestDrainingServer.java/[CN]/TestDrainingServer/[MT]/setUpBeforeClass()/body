{
  TEST_UTIL.startMiniCluster(5);
  TEST_UTIL.getConfiguration().setBoolean("hbase.master.enabletable.roundrobin",true);
  HTableDescriptor htd=new HTableDescriptor(TABLENAME);
  htd.addFamily(new HColumnDescriptor(FAMILY));
  TEST_UTIL.createMultiRegionsInMeta(TEST_UTIL.getConfiguration(),htd,HBaseTestingUtility.KEYS);
  FileSystem fs=FileSystem.get(TEST_UTIL.getConfiguration());
  FSTableDescriptors.createTableDescriptor(fs,FSUtils.getRootDir(TEST_UTIL.getConfiguration()),htd);
  HBaseAdmin admin=new HBaseAdmin(TEST_UTIL.getConfiguration());
  admin.disableTable(TABLENAME);
  admin.enableTable(TABLENAME);
  MiniHBaseCluster cluster=TEST_UTIL.getMiniHBaseCluster();
  for (int i=0; i < cluster.getRegionServerThreads().size(); i++) {
    HRegionServer hrs=cluster.getRegionServer(i);
    Assert.assertFalse(hrs.getOnlineRegions().isEmpty());
  }
}
