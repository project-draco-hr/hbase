{
  LoadBalancer balancer=LoadBalancerFactory.getLoadBalancer(TEST_UTIL.getConfiguration());
  HRegionInfo regionInfo=new HRegionInfo("oneregion".getBytes());
  List<ServerName> servers=new ArrayList<ServerName>();
  for (int i=0; i < 10; i++) {
    ServerName server=new ServerName("foo" + i + ":1234",-1);
    servers.add(server);
  }
  balancer.randomAssignment(regionInfo,servers);
  assertTrue(((FavoredNodeLoadBalancer)balancer).getFavoredNodes(regionInfo).size() == 3);
  List<HRegionInfo> regions=new ArrayList<HRegionInfo>(100);
  for (int i=0; i < 100; i++) {
    HRegionInfo region=new HRegionInfo(("foobar" + i).getBytes());
    regions.add(region);
  }
  balancer.roundRobinAssignment(regions,servers);
  for (int i=0; i < 100; i++) {
    assertTrue(((FavoredNodeLoadBalancer)balancer).getFavoredNodes(regions.get(i)).size() == 3);
  }
}
