{
  byte[] tableName=Bytes.toBytes(table);
  int expectedRegions=regionNum;
  byte[][] splitKeys=new byte[expectedRegions - 1][];
  for (int i=1; i < expectedRegions; i++) {
    byte splitKey=(byte)i;
    splitKeys[i - 1]=new byte[]{splitKey,splitKey,splitKey};
  }
  HTableDescriptor desc=new HTableDescriptor(TableName.valueOf(tableName));
  desc.addFamily(new HColumnDescriptor(HConstants.CATALOG_FAMILY));
  admin.createTable(desc,splitKeys);
  HTable ht=new HTable(TEST_UTIL.getConfiguration(),tableName);
  Map<HRegionInfo,ServerName> regions=ht.getRegionLocations();
  assertEquals("Tried to create " + expectedRegions + " regions "+ "but only found "+ regions.size(),expectedRegions,regions.size());
}
