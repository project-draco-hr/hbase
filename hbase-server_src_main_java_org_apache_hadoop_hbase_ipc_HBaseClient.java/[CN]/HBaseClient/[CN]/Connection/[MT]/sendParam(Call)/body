{
  if (shouldCloseConnection.get()) {
    return;
  }
  try {
    if (LOG.isDebugEnabled())     LOG.debug(getName() + " sending #" + call.id);
    RpcRequestHeader.Builder headerBuilder=RPCProtos.RpcRequestHeader.newBuilder();
    headerBuilder.setCallId(call.id);
synchronized (this.out) {
      RpcRequestHeader header=headerBuilder.build();
      int serializedHeaderSize=header.getSerializedSize();
      int requestSerializedSize=call.param.getSerializedSize();
      this.out.writeInt(serializedHeaderSize + CodedOutputStream.computeRawVarint32Size(serializedHeaderSize) + requestSerializedSize+ CodedOutputStream.computeRawVarint32Size(requestSerializedSize));
      header.writeDelimitedTo(this.out);
      call.param.writeDelimitedTo(this.out);
      this.out.flush();
    }
  }
 catch (  IOException e) {
    markClosed(e);
  }
}
