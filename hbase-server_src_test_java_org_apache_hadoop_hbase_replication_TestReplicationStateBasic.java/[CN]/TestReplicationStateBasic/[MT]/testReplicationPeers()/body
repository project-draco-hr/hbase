{
  rp.init();
  try {
    rp.removePeer("bogus");
    fail("Should have thrown an IllegalArgumentException when passed a bogus peerId");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    rp.enablePeer("bogus");
    fail("Should have thrown an IllegalArgumentException when passed a bogus peerId");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    rp.disablePeer("bogus");
    fail("Should have thrown an IllegalArgumentException when passed a bogus peerId");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    rp.getStatusOfPeer("bogus");
    fail("Should have thrown an IllegalArgumentException when passed a bogus peerId");
  }
 catch (  IllegalArgumentException e) {
  }
  assertFalse(rp.peerAdded("bogus"));
  rp.peerRemoved("bogus");
  assertNull(rp.getPeerConf("bogus"));
  assertNumberOfPeers(0);
  rp.addPeer(ID_ONE,new ReplicationPeerConfig().setClusterKey(KEY_ONE),null);
  assertNumberOfPeers(1);
  rp.addPeer(ID_TWO,new ReplicationPeerConfig().setClusterKey(KEY_TWO),null);
  assertNumberOfPeers(2);
  try {
    rp.getStatusOfPeer(ID_ONE);
    fail("There are no connected peers, should have thrown an IllegalArgumentException");
  }
 catch (  IllegalArgumentException e) {
  }
  assertEquals(KEY_ONE,ZKUtil.getZooKeeperClusterKey(rp.getPeerConf(ID_ONE).getSecond()));
  rp.removePeer(ID_ONE);
  rp.peerRemoved(ID_ONE);
  assertNumberOfPeers(1);
  rp.addPeer(ID_ONE,new ReplicationPeerConfig().setClusterKey(KEY_ONE),null);
  rp.peerAdded(ID_ONE);
  assertNumberOfPeers(2);
  assertTrue(rp.getStatusOfPeer(ID_ONE));
  rp.disablePeer(ID_ONE);
  assertConnectedPeerStatus(false,ID_ONE);
  rp.enablePeer(ID_ONE);
  assertConnectedPeerStatus(true,ID_ONE);
  rp.peerRemoved(ID_ONE);
  assertNumberOfPeers(2);
  try {
    rp.getStatusOfPeer(ID_ONE);
    fail("There are no connected peers, should have thrown an IllegalArgumentException");
  }
 catch (  IllegalArgumentException e) {
  }
}
