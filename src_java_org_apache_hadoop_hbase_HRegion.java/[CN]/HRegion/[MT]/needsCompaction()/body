{
  boolean needsCompaction=false;
  lock.obtainReadLock();
  try {
    for (Iterator<HStore> i=stores.values().iterator(); i.hasNext(); ) {
      if (i.next().getNMaps() > compactionThreshold) {
        needsCompaction=true;
        break;
      }
    }
  }
  finally {
    lock.releaseReadLock();
  }
  return needsCompaction;
}
