{
  if (!metaRegionAvailable()) {
    return true;
  }
  HRegionInterface server=master.getServerConnection().getHRegionConnection(getMetaRegion().getServer());
  LOG.info(regionInfo.getRegionNameAsString() + " open on " + serverInfo.getServerAddress().toString());
  Put p=new Put(regionInfo.getRegionName());
  p.add(CATALOG_FAMILY,SERVER_QUALIFIER,Bytes.toBytes(serverInfo.getServerAddress().toString()));
  p.add(CATALOG_FAMILY,STARTCODE_QUALIFIER,Bytes.toBytes(serverInfo.getStartCode()));
  server.put(metaRegionName,p);
  LOG.info("Updated row " + regionInfo.getRegionNameAsString() + " in region "+ Bytes.toString(metaRegionName)+ " with startcode="+ serverInfo.getStartCode()+ ", server="+ serverInfo.getServerAddress());
synchronized (master.getRegionManager()) {
    if (isMetaTable) {
      MetaRegion m=new MetaRegion(new HServerAddress(serverInfo.getServerAddress()),regionInfo);
      if (!master.getRegionManager().isInitialMetaScanComplete()) {
        if (LOG.isDebugEnabled()) {
          LOG.debug("Adding " + m.toString() + " to regions to scan");
        }
        master.getRegionManager().addMetaRegionToScan(m);
      }
 else {
        if (LOG.isDebugEnabled()) {
          LOG.debug("Adding to onlineMetaRegions: " + m.toString());
        }
        master.getRegionManager().putMetaRegionOnline(m);
        master.getRegionManager().metaScannerThread.triggerNow();
      }
    }
    if (master.getRegionManager().isOfflined(regionInfo.getRegionNameAsString())) {
      LOG.warn("We opened a region while it was asked to be closed.");
    }
 else {
      master.getRegionManager().removeRegion(regionInfo);
    }
    return true;
  }
}
