{
  org.apache.hadoop.hbase.protobuf.generated.HBaseProtos.ServerName pbsn=org.apache.hadoop.hbase.protobuf.generated.HBaseProtos.ServerName.newBuilder().setHostName(sn.getHostname()).setPort(sn.getPort()).setStartCode(sn.getStartcode()).build();
  ZooKeeperProtos.RegionTransition.Builder builder=ZooKeeperProtos.RegionTransition.newBuilder().setEventTypeCode(type.getCode()).setRegionName(HBaseZeroCopyByteString.wrap(regionName)).setServerName(pbsn);
  builder.setCreateTime(System.currentTimeMillis());
  if (payload != null)   builder.setPayload(HBaseZeroCopyByteString.wrap(payload));
  return new RegionTransition(builder.build());
}
