{
  byte[] b=k.getBytes();
  if (b == null) {
    throw new NullPointerException("buffer reference is null");
  }
  if (b.length == 0) {
    throw new IllegalArgumentException("key length must be > 0");
  }
  sha.update(b);
  byte[] digestBytes=sha.digest();
  int[] result=new int[nbHash];
  int nbBytePerInt=digestBytes.length / nbHash;
  int offset=0;
  for (int i=0; i < nbHash; i++) {
    int val=0;
    for (int j=offset; j < offset + nbBytePerInt; j++) {
      val|=(digestBytes[offset] & 0xff) << ((nbBytePerInt - 1 - (j - offset)) * 8);
    }
    result[i]=Math.abs(val) % maxValue;
    offset+=nbBytePerInt;
  }
  return result;
}
