{
  this.conf=conf;
  this.master=HMaster.constructMaster(masterClass,conf);
  conf.set(REGIONSERVER_PORT,"0");
  this.regionThreads=new CopyOnWriteArrayList<JVMClusterUtil.RegionServerThread>();
  this.regionServerClass=(Class<? extends HRegionServer>)conf.getClass(HConstants.REGION_SERVER_IMPL,regionServerClass);
  for (int i=0; i < noRegionServers; i++) {
    addRegionServer(i);
  }
}
