{
  Set<HRegionInfo> misplacedRegions=new HashSet<HRegionInfo>();
  for (  HRegionInfo region : regions.keySet()) {
    ServerName assignedServer=regions.get(region);
    RSGroupInfo info=RSGroupInfoManager.getRSGroup(RSGroupInfoManager.getRSGroupOfTable(region.getTable()));
    if (assignedServer != null && (info == null || !info.containsServer(assignedServer.getHostPort()))) {
      LOG.debug("Found misplaced region: " + region.getRegionNameAsString() + " on server: "+ assignedServer+ " found in group: "+ RSGroupInfoManager.getRSGroupOfServer(assignedServer.getHostPort())+ " outside of group: "+ (info == null ? "UNKNOWN" : info.getName()));
      misplacedRegions.add(region);
    }
  }
  return misplacedRegions;
}
