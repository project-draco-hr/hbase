{
  HRegionInfo REGIONINFO=new HRegionInfo(TableName.valueOf("t"),HConstants.EMPTY_START_ROW,HConstants.EMPTY_START_ROW);
  HRegionServer regionServer=TEST_UTIL.getHBaseCluster().getRegionServer(0);
  TableDescriptors htd=Mockito.mock(TableDescriptors.class);
  Object orizinalState=Whitebox.getInternalState(regionServer,"tableDescriptors");
  Whitebox.setInternalState(regionServer,"tableDescriptors",htd);
  Mockito.doThrow(new IOException()).when(htd).get((TableName)Mockito.any());
  try {
    ProtobufUtil.openRegion(regionServer.getRSRpcServices(),regionServer.getServerName(),REGIONINFO);
    fail("It should throw IOException ");
  }
 catch (  IOException e) {
  }
  Whitebox.setInternalState(regionServer,"tableDescriptors",orizinalState);
  assertFalse("Region should not be in RIT",regionServer.getRegionsInTransitionInRS().containsKey(REGIONINFO.getEncodedNameAsBytes()));
}
