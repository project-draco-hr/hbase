{
  if (servlet.isMultiUser()) {
    User user=auth(token);
    if (!servlet.userRequestLimit(user,1)) {
      return Response.status(509).build();
    }
    try {
      ResponseBuilder response=Response.ok(getTableListForUser(user));
      response.cacheControl(cacheControl);
      return response.build();
    }
 catch (    IOException e) {
      throw new WebApplicationException(e,Response.Status.SERVICE_UNAVAILABLE);
    }
  }
  throw new WebApplicationException(Response.Status.BAD_REQUEST);
}
