{
  MapReduceProtos.TableSnapshotRegionSplit.Builder builder=MapReduceProtos.TableSnapshotRegionSplit.newBuilder().setTable(htd.convert()).setRegion(HRegionInfo.convert(regionInfo));
  for (  String location : locations) {
    builder.addLocations(location);
  }
  MapReduceProtos.TableSnapshotRegionSplit split=builder.build();
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  split.writeTo(baos);
  baos.close();
  byte[] buf=baos.toByteArray();
  out.writeInt(buf.length);
  out.write(buf);
}
