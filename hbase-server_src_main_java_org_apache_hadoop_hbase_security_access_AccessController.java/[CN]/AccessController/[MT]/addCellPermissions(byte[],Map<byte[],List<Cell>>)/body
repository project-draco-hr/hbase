{
  for (  Map.Entry<byte[],List<Cell>> e : familyMap.entrySet()) {
    List<Cell> newCells=Lists.newArrayList();
    for (    Cell cell : e.getValue()) {
      List<Tag> tags=Lists.newArrayList(new Tag(AccessControlLists.ACL_TAG_TYPE,perms));
      if (cell.getTagsLength() > 0) {
        Iterator<Tag> tagIterator=CellUtil.tagsIterator(cell.getTagsArray(),cell.getTagsOffset(),cell.getTagsLength());
        while (tagIterator.hasNext()) {
          tags.add(tagIterator.next());
        }
      }
      KeyValue kv=KeyValueUtil.ensureKeyValue(cell);
      newCells.add(new KeyValue(kv.getRowArray(),kv.getRowOffset(),kv.getRowLength(),kv.getFamilyArray(),kv.getFamilyOffset(),kv.getFamilyLength(),kv.getQualifierArray(),kv.getQualifierOffset(),kv.getQualifierLength(),kv.getTimestamp(),KeyValue.Type.codeToType(kv.getTypeByte()),kv.getValueArray(),kv.getValueOffset(),kv.getValueLength(),tags));
    }
    e.setValue(newCells);
  }
}
