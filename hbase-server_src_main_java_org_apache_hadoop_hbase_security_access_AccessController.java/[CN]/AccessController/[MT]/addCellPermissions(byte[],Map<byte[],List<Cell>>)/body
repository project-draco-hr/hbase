{
  for (  Map.Entry<byte[],List<Cell>> e : familyMap.entrySet()) {
    List<Cell> newCells=Lists.newArrayList();
    for (    Cell cell : e.getValue()) {
      List<Tag> tags=Lists.newArrayList(new Tag(AccessControlLists.ACL_TAG_TYPE,perms));
      if (cell.getTagsLength() > 0) {
        Iterator<Tag> tagIterator=CellUtil.tagsIterator(cell.getTagsArray(),cell.getTagsOffset(),cell.getTagsLength());
        while (tagIterator.hasNext()) {
          tags.add(tagIterator.next());
        }
      }
      newCells.add(new KeyValue(cell.getRowArray(),cell.getRowOffset(),cell.getRowLength(),cell.getFamilyArray(),cell.getFamilyOffset(),cell.getFamilyLength(),cell.getQualifierArray(),cell.getQualifierOffset(),cell.getQualifierLength(),cell.getTimestamp(),KeyValue.Type.codeToType(cell.getTypeByte()),cell.getValueArray(),cell.getValueOffset(),cell.getValueLength(),tags));
    }
    e.setValue(newCells);
  }
}
