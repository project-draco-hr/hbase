{
  TableName tableName=getTableName(c.getEnvironment());
  User activeUser=getActiveUser();
  Filter filter=query.getFilter();
  boolean cellFirstStrategy=query.getACLStrategy();
  if (filter != null && filter instanceof AccessControlFilter) {
    return;
  }
  Map<ByteRange,Integer> cfVsMaxVersions=new HashMap<ByteRange,Integer>();
  HRegion region=c.getEnvironment().getRegion();
  for (  HColumnDescriptor hcd : region.getTableDesc().getFamilies()) {
    cfVsMaxVersions.put(new SimpleByteRange(hcd.getName()),hcd.getMaxVersions());
  }
  Filter newFilter=(filter != null) ? new FilterList(FilterList.Operator.MUST_PASS_ALL,Lists.newArrayList(new AccessControlFilter(authManager,activeUser,tableName,cellFirstStrategy,cfVsMaxVersions),filter)) : new AccessControlFilter(authManager,activeUser,tableName,cellFirstStrategy,cfVsMaxVersions);
  query.setFilter(newFilter);
}
