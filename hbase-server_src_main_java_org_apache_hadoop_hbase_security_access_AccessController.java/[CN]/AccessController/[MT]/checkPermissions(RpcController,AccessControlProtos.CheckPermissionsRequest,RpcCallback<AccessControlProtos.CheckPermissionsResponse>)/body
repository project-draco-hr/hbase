{
  Permission[] perms=new Permission[request.getPermissionCount()];
  for (int i=0; i < request.getPermissionCount(); i++) {
    perms[i]=ProtobufUtil.toPermission(request.getPermission(i));
  }
  AccessControlProtos.CheckPermissionsResponse response=null;
  try {
    checkPermissions(perms);
    response=AccessControlProtos.CheckPermissionsResponse.getDefaultInstance();
  }
 catch (  IOException ioe) {
    ResponseConverter.setControllerException(controller,ioe);
  }
  done.run(response);
}
