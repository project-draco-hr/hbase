{
  Configuration conf=new Configuration(TEST_UTIL.getConfiguration());
  conf.setInt(HConstants.ZOOKEEPER_CLIENT_PORT,conf.getInt(HConstants.ZOOKEEPER_CLIENT_PORT,9999) + 10);
  int initialCount=HConnectionTestingUtility.getConnectionCount();
  long start=System.currentTimeMillis();
  try {
    HBaseAdmin.checkHBaseAvailable(conf);
    assertTrue(false);
  }
 catch (  MasterNotRunningException ignored) {
  }
catch (  ZooKeeperConnectionException ignored) {
  }
catch (  ServiceException ignored) {
  }
catch (  IOException ignored) {
  }
  long end=System.currentTimeMillis();
  int finalCount=HConnectionTestingUtility.getConnectionCount();
  Assert.assertEquals(initialCount,finalCount);
  LOG.info("It took " + (end - start) + " ms to find out that"+ " HBase was not available");
}
