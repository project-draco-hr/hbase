{
  HBaseAdmin admin=this.context.getHaseIntegrationTestingUtility().getHBaseAdmin();
  List<HRegionInfo> regions=admin.getTableRegions(tableNameBytes);
  Collection<ServerName> serversList=admin.getClusterStatus().getServers();
  ServerName[] servers=serversList.toArray(new ServerName[serversList.size()]);
  LOG.info("Performing action: Move regions of table " + tableName);
  for (  HRegionInfo regionInfo : regions) {
    try {
      String destServerName=servers[RandomUtils.nextInt(servers.length)].getServerName();
      LOG.debug("Moving " + regionInfo.getRegionNameAsString() + " to "+ destServerName);
      admin.move(regionInfo.getRegionName(),Bytes.toBytes(destServerName));
    }
 catch (    Exception e) {
      LOG.debug("Error moving region",e);
    }
  }
  if (sleepTime > 0) {
    Thread.sleep(sleepTime);
  }
}
