{
  Map<String,String> m=new HashMap<String,String>();
  if (conf != null) {
    for (    String property : CONNECTION_PROPERTIES) {
      String value=conf.get(property);
      if (value != null) {
        m.put(property,value);
      }
    }
  }
  this.properties=Collections.unmodifiableMap(m);
  try {
    User currentUser=User.getCurrent();
    if (currentUser != null) {
      username=currentUser.getName();
    }
  }
 catch (  IOException ioe) {
    HConnectionManager.LOG.warn("Error obtaining current user, skipping username in HConnectionKey",ioe);
  }
}
