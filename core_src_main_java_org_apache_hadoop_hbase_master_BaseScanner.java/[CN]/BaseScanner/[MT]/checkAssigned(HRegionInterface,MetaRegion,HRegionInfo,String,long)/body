{
  String serverName=null;
  String sa=serverAddress;
  long sc=startCode;
  if (sa == null || sa.length() <= 0) {
    Get g=new Get(info.getRegionName());
    g.addFamily(HConstants.CATALOG_FAMILY);
    Result r=regionServer.get(meta.getRegionName(),g);
    if (r != null && !r.isEmpty()) {
      sa=getServerAddress(r);
      if (sa != null && sa.length() > 0) {
        sc=getStartCode(r);
      }
    }
  }
  if (sa != null && sa.length() > 0) {
    serverName=HServerInfo.getServerName(sa,sc);
  }
  HServerInfo storedInfo=null;
synchronized (this.master.getRegionManager()) {
    if (info.isOffline() || this.master.getRegionManager().regionIsInTransition(info.getRegionNameAsString()) || (serverName != null && this.master.getServerManager().isDead(serverName))) {
      return;
    }
    if (serverName != null) {
      storedInfo=this.master.getServerManager().getServerInfo(serverName);
    }
    if (storedInfo == null) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Current assignment of " + info.getRegionNameAsString() + " is not valid; "+ " serverAddress="+ sa+ ", startCode="+ sc+ " unknown.");
      }
      this.master.getRegionManager().setUnassigned(info,true);
    }
  }
}
