{
  RequestHeader.Builder headerBuilder=RequestHeader.newBuilder();
  headerBuilder.setMethodName("foo");
  RequestHeader header=headerBuilder.build();
  PriorityFunction qosFunc=regionServer.rpcServices.getPriority();
  regionServer.conf.set(Superusers.SUPERUSER_CONF_KEY,"samplesuperuser");
  Superusers.initialize(regionServer.conf);
  assertEquals(HConstants.ADMIN_QOS,qosFunc.getPriority(header,null,User.createUserForTesting(regionServer.conf,"samplesuperuser",new String[]{"somegroup"})));
  regionServer.conf.set(Superusers.SUPERUSER_CONF_KEY,"@samplesupergroup");
  Superusers.initialize(regionServer.conf);
  assertEquals(HConstants.ADMIN_QOS,qosFunc.getPriority(header,null,User.createUserForTesting(regionServer.conf,"regularuser",new String[]{"samplesupergroup"})));
}
