{
  Class klass=null;
  try {
    klass=ExternalBlockCaches.valueOf(c.get(EXTERNAL_BLOCKCACHE_CLASS_KEY,"memcache")).clazz;
  }
 catch (  IllegalArgumentException exception) {
    klass=c.getClass(EXTERNAL_BLOCKCACHE_CLASS_KEY,MemcachedBlockCache.class);
  }
  try {
    LOG.info("Creating external block cache of type: " + klass);
    return (BlockCache)ReflectionUtils.newInstance(klass,c);
  }
 catch (  Exception e) {
    LOG.warn("Error creating external block cache",e);
  }
  return null;
}
