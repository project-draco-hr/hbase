{
  TableProcedureInterface proc=null;
  boolean avail=false;
  while (!avail) {
    Long procId=queue.poll();
    proc=procId != null ? procsMap.remove(procId) : null;
    if (proc == null)     break;
switch (proc.getTableOperationType()) {
case CREATE:
case DELETE:
case EDIT:
      avail=queue.tryAcquireTableExclusiveLock(proc.getTableName(),"op=" + proc.getTableOperationType());
    break;
case READ:
  avail=queue.tryAcquireTableSharedLock(proc.getTableName(),"op=" + proc.getTableOperationType());
break;
}
if (!avail) {
addFront(proc);
LOG.debug("yield procId=" + procId);
}
}
return proc;
}
