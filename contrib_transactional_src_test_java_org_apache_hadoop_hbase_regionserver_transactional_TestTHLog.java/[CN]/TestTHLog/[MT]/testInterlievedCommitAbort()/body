{
  THLog log=new THLog(fs,dir,oldLogdir,this.conf,null);
  THLogRecoveryManager logMangaer=new THLogRecoveryManager(fs,regionInfo,conf);
  long transaction1Id=1;
  long transaction2Id=2;
  log.writeUpdateToLog(regionInfo,transaction1Id,new Put(row1).add(family,column,val1));
  log.writeUpdateToLog(regionInfo,transaction2Id,new Put(row2).add(family,column,val2));
  log.writeCommitToLog(regionInfo,transaction2Id);
  log.writeUpdateToLog(regionInfo,transaction1Id,new Put(row3).add(family,column,val3));
  log.writeAbortToLog(regionInfo,transaction1Id);
  log.close();
  Path filename=log.computeFilename(log.getFilenum());
  Map<Long,List<WALEdit>> commits=logMangaer.getCommitsFromLog(filename,-1,null);
  assertNull(commits);
}
