{
synchronized (connections) {
    for (    Connection connection : connections.values()) {
      if (connection.isAlive() && connection.getRemoteAddress().getPort() == port && connection.getRemoteAddress().getHostName().equals(hostname)) {
        if (connection.shouldCloseConnection.compareAndSet(false,true)) {
          LOG.info("The server on " + hostname + ":"+ port+ " is dead - closing the connection "+ connection.remoteId);
          connection.closeException=ioe;
          connection.close();
        }
      }
    }
  }
}
