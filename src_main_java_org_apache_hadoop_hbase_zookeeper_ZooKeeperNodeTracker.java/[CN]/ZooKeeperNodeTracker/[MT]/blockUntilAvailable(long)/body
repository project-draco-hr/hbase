{
  if (timeout < 0)   throw new IllegalArgumentException();
  boolean notimeout=timeout == 0;
  long startTime=System.currentTimeMillis();
  long remaining=timeout;
  while (!this.stopped && (notimeout || remaining > 0) && this.data == null) {
    if (notimeout) {
      wait();
      continue;
    }
    wait(remaining);
    remaining=timeout - (System.currentTimeMillis() - startTime);
  }
  return data;
}
