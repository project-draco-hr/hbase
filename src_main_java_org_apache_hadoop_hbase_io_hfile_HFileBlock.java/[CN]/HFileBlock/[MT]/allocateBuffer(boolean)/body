{
  int capacityNeeded=HEADER_SIZE + uncompressedSizeWithoutHeader + (extraBytes ? HEADER_SIZE : 0);
  ByteBuffer newBuf=ByteBuffer.allocate(capacityNeeded);
  System.arraycopy(buf.array(),buf.arrayOffset(),newBuf.array(),newBuf.arrayOffset(),HEADER_SIZE);
  buf=newBuf;
  buf.limit(HEADER_SIZE + uncompressedSizeWithoutHeader);
}
