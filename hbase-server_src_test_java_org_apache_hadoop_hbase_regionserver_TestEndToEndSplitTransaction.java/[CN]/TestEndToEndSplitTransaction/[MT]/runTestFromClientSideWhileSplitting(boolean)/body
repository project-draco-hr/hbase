{
  final String tableName="testFromClientSideWhileSplitting" + System.currentTimeMillis();
  LOG.info("Starting " + tableName);
  final TableName TABLENAME=TableName.valueOf(tableName);
  final byte[] FAMILY=Bytes.toBytes("family");
  HTable table=TEST_UTIL.createTable(TABLENAME,FAMILY);
  Stoppable stopper=new StoppableImplementation();
  RegionSplitter regionSplitter=null;
  if (onlineSchemaChange) {
    regionSplitter=new RegionSplitterWithSchemaChange(table);
  }
 else {
    regionSplitter=new RegionSplitter(table);
  }
  RegionChecker regionChecker=new RegionChecker(conf,stopper,TABLENAME);
  regionChecker.start();
  regionSplitter.start();
  regionSplitter.join();
  stopper.stop(null);
  if (regionChecker.ex != null) {
    throw regionChecker.ex;
  }
  if (regionSplitter.ex != null) {
    throw regionSplitter.ex;
  }
  regionChecker.verify();
}
