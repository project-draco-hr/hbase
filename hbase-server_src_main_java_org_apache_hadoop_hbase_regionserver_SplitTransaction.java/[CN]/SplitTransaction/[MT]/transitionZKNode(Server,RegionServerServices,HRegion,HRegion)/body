{
  if (server != null && server.getZooKeeper() != null) {
    try {
      this.znodeVersion=transitionSplittingNode(server.getZooKeeper(),parent.getRegionInfo(),a.getRegionInfo(),b.getRegionInfo(),server.getServerName(),this.znodeVersion,RS_ZK_REGION_SPLITTING,RS_ZK_REGION_SPLIT);
      int spins=0;
      do {
        if (spins % 10 == 0) {
          LOG.debug("Still waiting on the master to process the split for " + this.parent.getRegionInfo().getEncodedName());
        }
        Thread.sleep(100);
        this.znodeVersion=transitionSplittingNode(server.getZooKeeper(),parent.getRegionInfo(),a.getRegionInfo(),b.getRegionInfo(),server.getServerName(),this.znodeVersion,RS_ZK_REGION_SPLIT,RS_ZK_REGION_SPLIT);
        spins++;
      }
 while (this.znodeVersion != -1 && !server.isStopped() && !services.isStopping());
    }
 catch (    Exception e) {
      if (e instanceof InterruptedException) {
        Thread.currentThread().interrupt();
      }
      throw new IOException("Failed telling master about split",e);
    }
  }
  if (this.parent.getCoprocessorHost() != null) {
    this.parent.getCoprocessorHost().postSplit(a,b);
  }
}
