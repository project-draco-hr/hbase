{
  HServerInfo info=new HServerInfo(serverInfo);
  checkIsDead(info.getServerName(),"REPORT");
  HServerInfo storedInfo=this.onlineServers.get(info.getServerName());
  if (storedInfo == null) {
    if (!this.freshClusterStartup) {
      LOG.info("Registering new server: " + info.getServerName());
      recordNewServer(info);
      if (msgs.length > 0)       throw new PleaseHoldException("FIX! Putting off " + "message processing because not yet rwady but possible we won't be " + "ready next on next report");
    }
 else {
      LOG.warn("Received report from unknown server, a server calling " + " regionServerReport w/o having first called regionServerStartup; " + "telling it " + HMsg.Type.STOP_REGIONSERVER + ": "+ info.getServerName());
      return HMsg.STOP_REGIONSERVER_ARRAY;
    }
  }
  if (raceThatShouldNotHappenAnymore(storedInfo,info)) {
    return HMsg.STOP_REGIONSERVER_ARRAY;
  }
  for (  HMsg msg : msgs) {
    LOG.info("Received " + msg);
switch (msg.getType()) {
case REGION_SPLIT:
      this.services.getAssignmentManager().handleSplitReport(serverInfo,msg.getRegionInfo(),msg.getDaughterA(),msg.getDaughterB());
    break;
default :
  LOG.error("Unhandled msg type " + msg);
}
}
HMsg[] reply=null;
int numservers=countOfRegionServers();
if (this.clusterShutdown) {
if (numservers <= 2) {
reply=HMsg.STOP_REGIONSERVER_ARRAY;
}
}
return processRegionServerAllsWell(info,mostLoadedRegions,reply);
}
