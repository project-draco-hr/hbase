{
  HServerInfo info=new HServerInfo(serverInfo);
  checkIsDead(info.getServerName(),"REPORT");
  HServerInfo storedInfo=this.onlineServers.get(info.getServerName());
  if (storedInfo == null) {
    if (this.deadservers.contains(storedInfo)) {
      LOG.warn("Report from deadserver " + storedInfo);
      return HMsg.STOP_REGIONSERVER_ARRAY;
    }
 else {
      recordNewServer(info,true,null);
      if (msgs.length > 0)       throw new PleaseHoldException("FIX! Putting off " + "message processing because not yet rwady but possible we won't be " + "ready next on next report");
    }
  }
  if (raceThatShouldNotHappenAnymore(storedInfo,info)) {
    return HMsg.STOP_REGIONSERVER_ARRAY;
  }
  for (  HMsg msg : msgs) {
    LOG.info("Received " + msg + " from "+ serverInfo.getServerName());
switch (msg.getType()) {
case REGION_SPLIT:
      this.services.getAssignmentManager().handleSplitReport(serverInfo,msg.getRegionInfo(),msg.getDaughterA(),msg.getDaughterB());
    break;
default :
  LOG.error("Unhandled msg type " + msg);
}
}
HMsg[] reply=null;
int numservers=countOfRegionServers();
if (this.clusterShutdown) {
if (numservers <= 2) {
reply=HMsg.STOP_REGIONSERVER_ARRAY;
}
}
return processRegionServerAllsWell(info,mostLoadedRegions,reply);
}
