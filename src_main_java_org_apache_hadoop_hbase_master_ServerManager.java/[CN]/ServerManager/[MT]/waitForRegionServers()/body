{
  long interval=this.master.getConfiguration().getLong("hbase.master.wait.on.regionservers.interval",3000);
  int count=0;
  for (int oldcount=countOfRegionServers(); !this.master.isStopped(); ) {
    Thread.sleep(interval);
    count=countOfRegionServers();
    if (count == oldcount && count > 0)     break;
    if (count == 0) {
      LOG.info("Waiting on regionserver(s) to checkin");
    }
 else {
      LOG.info("Waiting on regionserver(s) count to settle; currently=" + count);
    }
    oldcount=count;
  }
  int regionCount=0;
  for (  Map.Entry<String,HServerInfo> e : this.onlineServers.entrySet()) {
    HServerLoad load=e.getValue().getLoad();
    if (load != null)     regionCount+=load.getLoad();
  }
  LOG.info("Exiting wait on regionserver(s) to checkin; count=" + count + ", stopped="+ this.master.isStopped()+ ", count of regions out on cluster="+ regionCount);
  return regionCount;
}
