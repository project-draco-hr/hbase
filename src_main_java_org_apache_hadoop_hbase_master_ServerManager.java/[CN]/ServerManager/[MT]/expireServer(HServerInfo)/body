{
  String serverName=hsi.getServerName();
  HServerInfo info=this.serversToServerInfo.get(serverName);
  if (info == null) {
    LOG.warn("No HServerInfo for " + serverName);
    return;
  }
  if (this.deadServers.contains(serverName)) {
    LOG.warn("Already processing shutdown of " + serverName);
    return;
  }
  this.serversToServerInfo.remove(serverName);
  HServerLoad load=this.serversToLoad.remove(serverName);
  if (load != null) {
synchronized (this.loadToServers) {
      Set<String> servers=this.loadToServers.get(load);
      if (servers != null) {
        servers.remove(serverName);
        if (servers.isEmpty())         this.loadToServers.remove(load);
      }
    }
  }
  LOG.debug("Added=" + serverName + " to dead servers, added shutdown processing operation");
  this.deadServers.add(serverName);
  this.master.getRegionServerOperationQueue().put(new ProcessServerShutdown(master,info));
}
