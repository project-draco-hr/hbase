{
  this.master=master;
  this.services=services;
  this.freshClusterStartup=freshClusterStartup;
  Configuration c=master.getConfiguration();
  int monitorInterval=c.getInt("hbase.master.monitor.interval",60 * 1000);
  this.metrics=new MasterMetrics(master.getServerName());
  this.serverMonitorThread=new ServerMonitor(monitorInterval,master);
  String n=Thread.currentThread().getName();
  Threads.setDaemonThreadRunning(this.serverMonitorThread,n + ".serverMonitor");
  this.logCleaner=new LogCleaner(c.getInt("hbase.master.cleaner.interval",60 * 1000),master,c,this.services.getMasterFileSystem().getFileSystem(),this.services.getMasterFileSystem().getOldLogDir());
  Threads.setDaemonThreadRunning(logCleaner,n + ".oldLogCleaner");
}
