{
  CompactionReader cr=new CompactionReader(){
    public boolean next(    WritableComparable key,    Writable val) throws IOException {
      boolean result=false;
      while (iterator.hasNext()) {
        Entry<HStoreKey,byte[]> e=iterator.next();
        HStoreKey hsk=e.getKey();
        if (familyName.equals(HStoreKey.extractFamily(hsk.getColumn()))) {
          ((HStoreKey)key).set(hsk);
          ((ImmutableBytesWritable)val).set(e.getValue());
          result=true;
          break;
        }
      }
      return result;
    }
    @SuppressWarnings("unused") public void reset() throws IOException {
    }
    @SuppressWarnings("unused") public void close() throws IOException {
    }
  }
;
  compact(compactedOut,new CompactionReader[]{cr,new MapFileCompactionReader(reader)});
}
