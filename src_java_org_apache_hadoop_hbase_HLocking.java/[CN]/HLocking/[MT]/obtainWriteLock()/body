{
synchronized (readerLock) {
synchronized (writerLock) {
      while (numReaders > 0) {
        try {
          readerLock.wait();
        }
 catch (        InterruptedException ie) {
        }
      }
      while (numWriters > 0) {
        try {
          writerLock.wait();
        }
 catch (        InterruptedException ie) {
        }
      }
      numWriters++;
      writerLock.notifyAll();
    }
  }
}
