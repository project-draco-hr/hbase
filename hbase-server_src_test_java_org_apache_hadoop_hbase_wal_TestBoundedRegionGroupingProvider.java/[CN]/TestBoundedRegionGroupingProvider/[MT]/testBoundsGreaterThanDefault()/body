{
  final int temp=conf.getInt(NUM_REGION_GROUPS,DEFAULT_NUM_REGION_GROUPS);
  try {
    conf.setInt(NUM_REGION_GROUPS,temp * 4);
    final String parallelism=Integer.toString(temp * 4);
    int errCode=WALPerformanceEvaluation.innerMain(new Configuration(conf),new String[]{"-threads",parallelism,"-verify","-noclosefs","-iterations","3000","-regions",parallelism});
    assertEquals(0,errCode);
  }
  finally {
    conf.setInt(NUM_REGION_GROUPS,temp);
  }
}
