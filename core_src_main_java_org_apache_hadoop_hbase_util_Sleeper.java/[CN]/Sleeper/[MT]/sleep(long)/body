{
  if (this.stop.get()) {
    return;
  }
  long now=System.currentTimeMillis();
  long waitTime=this.period - (now - startTime);
  if (waitTime > this.period) {
    LOG.warn("Calculated wait time > " + this.period + "; setting to this.period: "+ System.currentTimeMillis()+ ", "+ startTime);
    waitTime=this.period;
  }
  while (waitTime > 0) {
    long woke=-1;
    try {
      Thread.sleep(waitTime);
      woke=System.currentTimeMillis();
      long slept=woke - now;
      if (slept - this.period > MINIMAL_DELTA_FOR_LOGGING) {
        LOG.warn("We slept " + slept + "ms instead of "+ this.period+ "ms, this is likely due to a long "+ "garbage collecting pause and it's usually bad, "+ "see http://wiki.apache.org/hadoop/Hbase/Troubleshooting#A9");
      }
    }
 catch (    InterruptedException iex) {
      if (this.stop.get()) {
        return;
      }
    }
    woke=(woke == -1) ? System.currentTimeMillis() : woke;
    waitTime=this.period - (woke - startTime);
  }
}
