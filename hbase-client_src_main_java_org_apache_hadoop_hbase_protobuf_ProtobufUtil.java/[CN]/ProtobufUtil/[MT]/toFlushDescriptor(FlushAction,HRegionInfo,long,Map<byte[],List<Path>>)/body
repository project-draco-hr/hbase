{
  FlushDescriptor.Builder desc=FlushDescriptor.newBuilder().setAction(action).setEncodedRegionName(ByteStringer.wrap(hri.getEncodedNameAsBytes())).setFlushSequenceNumber(flushSeqId).setTableName(ByteStringer.wrap(hri.getTable().getName()));
  for (  Map.Entry<byte[],List<Path>> entry : committedFiles.entrySet()) {
    WALProtos.FlushDescriptor.StoreFlushDescriptor.Builder builder=WALProtos.FlushDescriptor.StoreFlushDescriptor.newBuilder().setFamilyName(ByteStringer.wrap(entry.getKey())).setStoreHomeDir(Bytes.toString(entry.getKey()));
    if (entry.getValue() != null) {
      for (      Path path : entry.getValue()) {
        builder.addFlushOutput(path.getName());
      }
    }
    desc.addStoreFlushes(builder);
  }
  return desc.build();
}
