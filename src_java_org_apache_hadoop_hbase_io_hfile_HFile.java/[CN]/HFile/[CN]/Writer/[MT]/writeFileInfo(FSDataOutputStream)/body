{
  if (this.lastKeyBuffer != null) {
    byte[] b=new byte[this.lastKeyLength];
    System.arraycopy(this.lastKeyBuffer,this.lastKeyOffset,b,0,this.lastKeyLength);
    appendFileInfo(this.fileinfo,FileInfo.LASTKEY,b,false);
  }
  int avgKeyLen=this.entryCount == 0 ? 0 : (int)(this.keylength / this.entryCount);
  appendFileInfo(this.fileinfo,FileInfo.AVG_KEY_LEN,Bytes.toBytes(avgKeyLen),false);
  int avgValueLen=this.entryCount == 0 ? 0 : (int)(this.keylength / this.entryCount);
  appendFileInfo(this.fileinfo,FileInfo.AVG_VALUE_LEN,Bytes.toBytes(avgValueLen),false);
  appendFileInfo(this.fileinfo,FileInfo.COMPARATOR,Bytes.toBytes(this.comparator.getClass().getName()),false);
  long pos=o.getPos();
  this.fileinfo.write(o);
  return pos;
}
