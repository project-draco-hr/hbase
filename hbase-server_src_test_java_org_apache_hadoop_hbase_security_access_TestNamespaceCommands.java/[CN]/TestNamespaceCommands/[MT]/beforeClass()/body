{
  conf=UTIL.getConfiguration();
  enableSecurity(conf);
  SUPERUSER=User.createUserForTesting(conf,"admin",new String[]{"supergroup"});
  USER_RW=User.createUserForTesting(conf,"rw_user",new String[0]);
  USER_CREATE=User.createUserForTesting(conf,"create_user",new String[0]);
  USER_NSP_WRITE=User.createUserForTesting(conf,"namespace_write",new String[0]);
  USER_NSP_ADMIN=User.createUserForTesting(conf,"namespace_admin",new String[0]);
  UTIL.startMiniCluster();
  UTIL.waitTableAvailable(AccessControlLists.ACL_TABLE_NAME.getName(),30 * 1000);
  ACCESS_CONTROLLER=(AccessController)UTIL.getMiniHBaseCluster().getMaster().getRegionServerCoprocessorHost().findCoprocessor(AccessController.class.getName());
  UTIL.getHBaseAdmin().createNamespace(NamespaceDescriptor.create(TEST_NAMESPACE).build());
  UTIL.getHBaseAdmin().createNamespace(NamespaceDescriptor.create(TEST_NAMESPACE2).build());
  grantOnNamespace(UTIL,USER_NSP_WRITE.getShortName(),TEST_NAMESPACE,Permission.Action.WRITE,Permission.Action.CREATE);
  grantOnNamespace(UTIL,USER_NSP_ADMIN.getShortName(),TEST_NAMESPACE,Permission.Action.ADMIN);
  grantOnNamespace(UTIL,USER_NSP_ADMIN.getShortName(),TEST_NAMESPACE2,Permission.Action.ADMIN);
}
