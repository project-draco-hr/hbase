{
  if (batch != null || currentLockId != -1L) {
    throw new IllegalStateException("update in progress");
  }
}
