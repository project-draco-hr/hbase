{
  if (batch == null) {
    throw new IllegalStateException("no batch update in progress");
  }
  if (batch.getLockid() != lockid) {
    throw new IllegalArgumentException("invalid lock id " + lockid);
  }
  batch=null;
}
