{
  checkClosed();
  if (batch != null) {
    commitBatch(lockid,timestamp);
    return;
  }
  if (lockid != currentLockId) {
    throw new IllegalArgumentException("invalid lockid");
  }
  try {
    try {
      this.currentServer.commit(this.currentRegion,this.clientid,lockid,timestamp);
    }
 catch (    IOException e) {
      this.currentServer=null;
      this.currentRegion=null;
      if (e instanceof RemoteException) {
        e=RemoteExceptionHandler.decodeRemoteException((RemoteException)e);
      }
      throw e;
    }
  }
  finally {
    currentLockId=-1L;
  }
}
