{
  List<byte[]> regionsToFlush=null;
synchronized (regionSequenceIdLock) {
    for (    Map.Entry<byte[],Long> e : regionsSequenceNums.entrySet()) {
      long unFlushedVal=getEarliestMemstoreSeqNum(e.getKey());
      if (unFlushedVal != HConstants.NO_SEQNUM && unFlushedVal <= e.getValue()) {
        if (regionsToFlush == null)         regionsToFlush=new ArrayList<byte[]>();
        regionsToFlush.add(e.getKey());
      }
    }
  }
  return regionsToFlush == null ? null : regionsToFlush.toArray(new byte[][]{HConstants.EMPTY_BYTE_ARRAY});
}
