{
  Method m=null;
  if (os != null) {
    Class<? extends OutputStream> wrappedStreamClass=os.getWrappedStream().getClass();
    try {
      m=wrappedStreamClass.getDeclaredMethod("getNumCurrentReplicas",new Class<?>[]{});
      m.setAccessible(true);
    }
 catch (    NoSuchMethodException e) {
      LOG.info("FileSystem's output stream doesn't support" + " getNumCurrentReplicas; --HDFS-826 not available; fsOut=" + wrappedStreamClass.getName());
    }
catch (    SecurityException e) {
      LOG.info("Doesn't have access to getNumCurrentReplicas on " + "FileSystems's output stream --HDFS-826 not available; fsOut=" + wrappedStreamClass.getName(),e);
      m=null;
    }
  }
  if (m != null) {
    if (LOG.isTraceEnabled())     LOG.trace("Using getNumCurrentReplicas--HDFS-826");
  }
  return m;
}
