{
  Long snapshot_seq=this.lastSeqWritten.remove(getSnapshotName(encodedRegionName));
  if (snapshot_seq != null) {
    Long current_memstore_earliest_seq=this.lastSeqWritten.put(encodedRegionName,snapshot_seq);
    if (current_memstore_earliest_seq != null && (current_memstore_earliest_seq.longValue() <= snapshot_seq.longValue())) {
      LOG.error("Logic Error region " + Bytes.toString(encodedRegionName) + "acquired edits out of order current memstore seq="+ current_memstore_earliest_seq+ " snapshot seq="+ snapshot_seq);
      Runtime.getRuntime().halt(1);
    }
  }
  this.cacheFlushLock.unlock();
}
