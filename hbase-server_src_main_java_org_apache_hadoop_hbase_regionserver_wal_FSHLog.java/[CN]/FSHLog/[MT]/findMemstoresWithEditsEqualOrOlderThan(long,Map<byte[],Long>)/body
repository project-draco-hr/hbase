{
  List<byte[]> regions=null;
  for (  Map.Entry<byte[],Long> e : regionsToSeqNums.entrySet()) {
    if (e.getValue().longValue() <= walSeqNum) {
      if (regions == null)       regions=new ArrayList<byte[]>();
      regions.add(e.getKey());
    }
  }
  return regions == null ? null : regions.toArray(new byte[][]{HConstants.EMPTY_BYTE_ARRAY});
}
