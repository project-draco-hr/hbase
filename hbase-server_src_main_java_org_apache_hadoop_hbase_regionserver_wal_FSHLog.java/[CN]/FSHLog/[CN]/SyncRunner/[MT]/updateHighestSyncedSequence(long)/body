{
  long currentHighestSyncedSequence;
  do {
    currentHighestSyncedSequence=highestSyncedSequence.get();
    if (currentHighestSyncedSequence >= sequence) {
      sequence=currentHighestSyncedSequence;
      break;
    }
  }
 while (!highestSyncedSequence.compareAndSet(currentHighestSyncedSequence,sequence));
  return sequence;
}
