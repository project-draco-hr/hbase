{
  HConnection last=null;
  for (int i=0; i <= (HConnectionManager.MAX_CACHED_HBASE_INSTANCES * 2); i++) {
    Configuration configuration=HBaseConfiguration.create();
    configuration.set("somekey",String.valueOf(_randy.nextInt()));
    System.out.println("Hash Code: " + configuration.hashCode());
    HConnection connection=HConnectionManager.getConnection(configuration);
    if (last != null) {
      if (last == connection) {
        System.out.println("!! Got same connection for once !!");
      }
    }
    configuration.set("someotherkey",String.valueOf(_randy.nextInt()));
    last=connection;
    Log.info("Cache Size: " + getHConnectionManagerCacheSize() + ", Valid Keys: "+ getValidKeyCount());
    Thread.sleep(100);
  }
  Assert.assertEquals(HConnectionManager.MAX_CACHED_HBASE_INSTANCES,getHConnectionManagerCacheSize());
  Assert.assertEquals(HConnectionManager.MAX_CACHED_HBASE_INSTANCES,getValidKeyCount());
}
