{
  ByteBuffer kvBuffer=createKVBuffer();
  kvBuffer.putInt(current.keyLength);
  kvBuffer.putInt(current.valueLength);
  kvBuffer.put(current.keyBuffer,0,current.keyLength);
  ByteBufferUtils.copyFromBufferToBuffer(kvBuffer,currentBuffer,current.valueOffset,current.valueLength);
  if (current.tagsLength > 0) {
    kvBuffer.put((byte)(current.tagsLength >> 8 & 0xff));
    kvBuffer.put((byte)(current.tagsLength & 0xff));
    if (current.tagsOffset != -1) {
      ByteBufferUtils.copyFromBufferToBuffer(kvBuffer,currentBuffer,current.tagsOffset,current.tagsLength);
    }
 else {
      kvBuffer.put(current.tagsBuffer,0,current.tagsLength);
    }
  }
  kvBuffer.rewind();
  return kvBuffer;
}
