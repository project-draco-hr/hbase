{
  long curTime=System.currentTimeMillis();
  if (curTime - lastActivity.get() >= pingInterval) {
    lastActivity.set(curTime);
synchronized (out) {
      out.writeInt(PING_CALL_ID);
      out.flush();
    }
  }
}
