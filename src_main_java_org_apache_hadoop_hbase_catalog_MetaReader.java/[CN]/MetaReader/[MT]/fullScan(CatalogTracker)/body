{
  HRegionInterface metaServer=catalogTracker.waitForMetaServerConnectionDefault();
  Map<HRegionInfo,HServerAddress> allRegions=new TreeMap<HRegionInfo,HServerAddress>();
  Scan scan=new Scan();
  scan.addFamily(HConstants.CATALOG_FAMILY);
  long scannerid=metaServer.openScanner(HRegionInfo.FIRST_META_REGIONINFO.getRegionName(),scan);
  try {
    Result data;
    while ((data=metaServer.next(scannerid)) != null) {
      if (!data.isEmpty()) {
        Pair<HRegionInfo,HServerAddress> region=metaRowToRegionPair(data);
        allRegions.put(region.getFirst(),region.getSecond());
      }
    }
  }
  finally {
    metaServer.close(scannerid);
  }
  return allRegions;
}
