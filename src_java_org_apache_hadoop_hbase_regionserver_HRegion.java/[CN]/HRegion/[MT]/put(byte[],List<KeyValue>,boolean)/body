{
  if (edits == null || edits.isEmpty()) {
    return;
  }
  boolean flush=false;
  this.updatesLock.readLock().lock();
  try {
    if (writeToWAL) {
      long now=System.currentTimeMillis();
      this.log.append(regionInfo.getRegionName(),regionInfo.getTableDesc().getName(),edits,(regionInfo.isMetaRegion() || regionInfo.isRootRegion()),now);
    }
    long size=0;
    Store store=getStore(family);
    for (    KeyValue kv : edits) {
      size=this.memcacheSize.addAndGet(store.add(kv));
    }
    flush=isFlushSize(size);
  }
  finally {
    this.updatesLock.readLock().unlock();
  }
  if (flush) {
    requestFlush();
  }
}
