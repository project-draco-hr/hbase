{
  if (this.closed.get()) {
    return false;
  }
synchronized (writestate) {
    if (!writestate.flushing && writestate.writesEnabled) {
      this.writestate.flushing=true;
    }
 else {
      if (LOG.isDebugEnabled()) {
        LOG.debug("NOT flushing memstore for region " + this + ", flushing="+ writestate.flushing+ ", writesEnabled="+ writestate.writesEnabled);
      }
      return false;
    }
  }
  try {
    splitsAndClosesLock.readLock().lock();
    try {
      return internalFlushcache();
    }
  finally {
      splitsAndClosesLock.readLock().unlock();
    }
  }
  finally {
synchronized (writestate) {
      writestate.flushing=false;
      this.writestate.flushRequested=false;
      writestate.notifyAll();
    }
  }
}
