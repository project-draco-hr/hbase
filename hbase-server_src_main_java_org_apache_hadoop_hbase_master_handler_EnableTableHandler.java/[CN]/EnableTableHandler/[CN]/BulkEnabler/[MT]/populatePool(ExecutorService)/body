{
  boolean roundRobinAssignment=this.server.getConfiguration().getBoolean("hbase.master.enabletable.roundrobin",false);
  if (retainAssignment || !roundRobinAssignment) {
    for (    HRegionInfo region : regions) {
      if (assignmentManager.getRegionStates().isRegionInTransition(region)) {
        continue;
      }
      final HRegionInfo hri=region;
      pool.execute(Trace.wrap(new Runnable(){
        public void run(){
          if (retainAssignment) {
            assignmentManager.assign(hri,true,false,false);
          }
 else {
            assignmentManager.assign(hri,true);
          }
        }
      }
));
    }
  }
 else {
    try {
      assignmentManager.assign(regions);
    }
 catch (    InterruptedException e) {
      LOG.warn("Assignment was interrupted");
      Thread.currentThread().interrupt();
    }
  }
}
