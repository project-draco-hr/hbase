{
  long startTime=EnvironmentEdgeManager.currentTimeMillis();
  long remaining=timeout;
  List<HRegionInfo> regions=null;
  int lastNumberOfRegions=0;
  while (!server.isStopped() && remaining > 0) {
    Thread.sleep(waitingTimeForEvents);
    regions=assignmentManager.getRegionStates().getRegionsOfTable(tableName);
    if (isDone(regions))     break;
    if (regions.size() > lastNumberOfRegions) {
      lastNumberOfRegions=regions.size();
      timeout+=waitingTimeForEvents;
    }
    remaining=timeout - (EnvironmentEdgeManager.currentTimeMillis() - startTime);
  }
  return isDone(regions);
}
