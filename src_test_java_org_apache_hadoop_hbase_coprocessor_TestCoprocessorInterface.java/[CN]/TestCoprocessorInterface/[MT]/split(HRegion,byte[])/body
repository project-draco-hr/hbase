{
  HRegion[] regions=new HRegion[2];
  SplitTransaction st=new SplitTransaction(r,splitRow);
  int i=0;
  if (!st.prepare()) {
    assertTrue(false);
  }
  try {
    Server mockServer=Mockito.mock(Server.class);
    when(mockServer.getConfiguration()).thenReturn(TEST_UTIL.getConfiguration());
    PairOfSameType<HRegion> daughters=st.execute(mockServer,null);
    for (    HRegion each_daughter : daughters) {
      regions[i]=each_daughter;
      i++;
    }
  }
 catch (  IOException ioe) {
    LOG.info("Split transaction of " + r.getRegionNameAsString() + " failed:"+ ioe.getMessage());
    assertTrue(false);
  }
catch (  RuntimeException e) {
    LOG.info("Failed rollback of failed split of " + r.getRegionNameAsString() + e.getMessage());
  }
  assertTrue(i == 2);
  return regions;
}
