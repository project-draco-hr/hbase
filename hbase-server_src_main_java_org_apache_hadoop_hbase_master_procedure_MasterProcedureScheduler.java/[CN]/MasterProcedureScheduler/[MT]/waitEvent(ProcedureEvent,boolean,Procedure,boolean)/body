{
synchronized (event) {
    if (event.isReady()) {
      if (lockEvent) {
        event.setReady(false);
      }
      return false;
    }
    if (!suspendQueue) {
      suspendProcedure(event,procedure);
    }
 else     if (isTableProcedure(procedure)) {
      waitTableEvent(event,procedure);
    }
 else     if (isServerProcedure(procedure)) {
      waitServerEvent(event,procedure);
    }
 else {
      throw new UnsupportedOperationException("RQs for non-table/non-server procedures are not implemented yet");
    }
  }
  return true;
}
