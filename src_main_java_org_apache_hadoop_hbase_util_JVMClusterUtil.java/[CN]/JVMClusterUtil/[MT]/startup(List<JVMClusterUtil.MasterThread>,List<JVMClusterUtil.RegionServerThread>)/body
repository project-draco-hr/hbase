{
  if (masters != null) {
    for (    JVMClusterUtil.MasterThread t : masters) {
      t.start();
    }
  }
  if (regionservers != null) {
    for (    JVMClusterUtil.RegionServerThread t : regionservers) {
      HRegionServer hrs=t.getRegionServer();
      ShutdownHook.install(hrs.getConfiguration(),FileSystem.get(hrs.getConfiguration()),hrs,t);
      t.start();
    }
  }
  if (masters == null || masters.isEmpty()) {
    return null;
  }
  while (true) {
    for (    JVMClusterUtil.MasterThread t : masters) {
      if (t.master.isActiveMaster()) {
        return t.master.getServerName().toString();
      }
    }
    try {
      Thread.sleep(1000);
    }
 catch (    InterruptedException e) {
    }
  }
}
