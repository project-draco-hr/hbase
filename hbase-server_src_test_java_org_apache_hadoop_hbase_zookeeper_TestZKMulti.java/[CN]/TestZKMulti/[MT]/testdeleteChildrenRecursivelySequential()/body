{
  String parentZNode="/testRootSeq";
  createZNodeTree(parentZNode);
  boolean useMulti=zkw.getConfiguration().getBoolean("hbase.zookeeper.useMulti",false);
  zkw.getConfiguration().setBoolean("hbase.zookeeper.useMulti",false);
  try {
    ZKUtil.deleteChildrenRecursivelyMultiOrSequential(zkw,true,parentZNode);
    assertTrue("Wrongly deleted parent znode!",ZKUtil.checkExists(zkw,parentZNode) > -1);
    List<String> children=zkw.getRecoverableZooKeeper().getChildren(parentZNode,false);
    assertTrue("Failed to delete child znodes!",0 == children.size());
  }
  finally {
    zkw.getConfiguration().setBoolean("hbase.zookeeper.useMulti",useMulti);
  }
}
