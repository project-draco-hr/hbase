{
  int position=buf.position();
  byte[] chunk;
  try {
    buf.position(offset);
    chunk=new byte[length];
    buf.get(chunk,0,length);
  }
  finally {
    buf.position(position);
  }
  return chunk;
}
