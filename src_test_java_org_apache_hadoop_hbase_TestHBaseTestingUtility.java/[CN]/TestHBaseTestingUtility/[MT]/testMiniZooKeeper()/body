{
  MiniZooKeeperCluster cluster1=this.hbt.startMiniZKCluster();
  try {
    assertEquals(0,cluster1.getZooKeeperCandidateNum());
    assertTrue((cluster1.killCurrentZooKeeper() == -1));
  }
  finally {
    cluster1.shutdown();
  }
  this.hbt.shutdownMiniZKCluster();
  MiniZooKeeperCluster cluster2=this.hbt.startMiniZKCluster(5);
  try {
    assertEquals(4,cluster2.getZooKeeperCandidateNum());
    assertTrue((cluster2.killCurrentZooKeeper() > 0));
    assertTrue((cluster2.killCurrentZooKeeper() > 0));
    assertEquals(2,cluster2.getZooKeeperCandidateNum());
  }
  finally {
    cluster2.shutdown();
  }
}
