{
  if (t != null && t != Thread.currentThread())   throw new IllegalStateException();
  t=Thread.currentThread();
  if (!isDone())   throw new IllegalStateException("" + sequence + " "+ Thread.currentThread());
  this.doneSequence=NOT_DONE;
  this.ringBufferSequence=sequence;
  this.span=span;
  return this;
}
