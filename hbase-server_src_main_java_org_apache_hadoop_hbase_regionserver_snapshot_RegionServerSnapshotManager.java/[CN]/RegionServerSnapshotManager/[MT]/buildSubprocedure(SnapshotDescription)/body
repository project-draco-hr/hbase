{
  if (rss.isStopping() || rss.isStopped()) {
    throw new IllegalStateException("Can't start snapshot on RS: " + rss.getServerName() + ", because stopping/stopped!");
  }
  List<HRegion> involvedRegions;
  try {
    involvedRegions=getRegionsToSnapshot(snapshot);
  }
 catch (  IOException e1) {
    throw new IllegalStateException("Failed to figure out if we should handle a snapshot - " + "something has gone awry with the online regions.",e1);
  }
  LOG.debug("Launching subprocedure for snapshot " + snapshot.getName() + " from table "+ snapshot.getTable());
  ForeignExceptionDispatcher exnDispatcher=new ForeignExceptionDispatcher();
switch (snapshot.getType()) {
default :
    throw new UnsupportedOperationException("Unrecognized snapshot type:" + snapshot.getType());
}
}
