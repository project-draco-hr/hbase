{
  if (!isMasterRunning()) {
    throw new MasterNotRunningException();
  }
  if (cpHost != null) {
    cpHost.preCreateTable(hTableDescriptor,splitKeys);
  }
  HRegionInfo[] newRegions=getHRegionInfos(hTableDescriptor,splitKeys);
  storeTableDescriptor(hTableDescriptor);
  int timeout=conf.getInt("hbase.client.catalog.timeout",10000);
  try {
    if (catalogTracker.waitForMeta(timeout) == null) {
      throw new NotAllMetaRegionsOnlineException();
    }
  }
 catch (  InterruptedException e) {
    LOG.warn("Interrupted waiting for meta availability",e);
    throw new IOException(e);
  }
  createTable(hTableDescriptor,newRegions,sync);
}
