{
  boolean oldValue=this.balanceSwitch;
  boolean newValue=b;
  try {
    if (this.cpHost != null) {
      newValue=this.cpHost.preBalanceSwitch(newValue);
    }
    this.balanceSwitch=newValue;
    LOG.info("Balance=" + newValue);
    if (this.cpHost != null) {
      this.cpHost.postBalanceSwitch(oldValue,newValue);
    }
  }
 catch (  IOException ioe) {
    LOG.warn("Error flipping balance switch",ioe);
  }
  return oldValue;
}
