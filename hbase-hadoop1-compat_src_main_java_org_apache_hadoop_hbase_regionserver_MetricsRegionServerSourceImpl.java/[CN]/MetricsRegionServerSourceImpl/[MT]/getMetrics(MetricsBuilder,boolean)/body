{
  MetricsRecordBuilder mrb=metricsBuilder.addRecord(metricsName).setContext(metricsContext);
  if (rsWrap != null) {
    mrb.addGauge(REGION_COUNT,REGION_COUNT_DESC,rsWrap.getNumOnlineRegions()).addGauge(STORE_COUNT,STORE_COUNT_DESC,rsWrap.getNumStores()).addGauge(STOREFILE_COUNT,STOREFILE_COUNT_DESC,rsWrap.getNumStoreFiles()).addGauge(MEMSTORE_SIZE,MEMSTORE_SIZE_DESC,rsWrap.getMemstoreSize()).addGauge(STOREFILE_SIZE,STOREFILE_SIZE_DESC,rsWrap.getStoreFileSize()).addGauge(RS_START_TIME_NAME,RS_START_TIME_DESC,rsWrap.getStartCode()).addCounter(TOTAL_REQUEST_COUNT,TOTAL_REQUEST_COUNT_DESC,rsWrap.getTotalRequestCount()).addCounter(READ_REQUEST_COUNT,READ_REQUEST_COUNT_DESC,rsWrap.getReadRequestsCount()).addCounter(WRITE_REQUEST_COUNT,WRITE_REQUEST_COUNT_DESC,rsWrap.getWriteRequestsCount()).addCounter(CHECK_MUTATE_FAILED_COUNT,CHECK_MUTATE_FAILED_COUNT_DESC,rsWrap.getCheckAndMutateChecksFailed()).addCounter(CHECK_MUTATE_PASSED_COUNT,CHECK_MUTATE_PASSED_COUNT_DESC,rsWrap.getCheckAndMutateChecksPassed()).addGauge(STOREFILE_INDEX_SIZE,STOREFILE_INDEX_SIZE_DESC,rsWrap.getStoreFileIndexSize()).addGauge(STATIC_INDEX_SIZE,STATIC_INDEX_SIZE_DESC,rsWrap.getTotalStaticIndexSize()).addGauge(STATIC_BLOOM_SIZE,STATIC_BLOOM_SIZE_DESC,rsWrap.getTotalStaticBloomSize()).addGauge(NUMBER_OF_MUTATIONS_WITHOUT_WAL,NUMBER_OF_MUTATIONS_WITHOUT_WAL_DESC,rsWrap.getNumMutationsWithoutWAL()).addGauge(DATA_SIZE_WITHOUT_WAL,DATA_SIZE_WITHOUT_WAL_DESC,rsWrap.getDataInMemoryWithoutWAL()).addGauge(PERCENT_FILES_LOCAL,PERCENT_FILES_LOCAL_DESC,rsWrap.getPercentFileLocal()).addGauge(COMPACTION_QUEUE_LENGTH,COMPACTION_QUEUE_LENGTH_DESC,rsWrap.getCompactionQueueSize()).addGauge(FLUSH_QUEUE_LENGTH,FLUSH_QUEUE_LENGTH_DESC,rsWrap.getFlushQueueSize()).addGauge(BLOCK_CACHE_FREE_SIZE,BLOCK_CACHE_FREE_DESC,rsWrap.getBlockCacheFreeSize()).addGauge(BLOCK_CACHE_COUNT,BLOCK_CACHE_COUNT_DESC,rsWrap.getBlockCacheCount()).addGauge(BLOCK_CACHE_SIZE,BLOCK_CACHE_SIZE_DESC,rsWrap.getBlockCacheSize()).addCounter(BLOCK_CACHE_HIT_COUNT,BLOCK_CACHE_HIT_COUNT_DESC,rsWrap.getBlockCacheHitCount()).addCounter(BLOCK_CACHE_MISS_COUNT,BLOCK_COUNT_MISS_COUNT_DESC,rsWrap.getBlockCacheMissCount()).addCounter(BLOCK_CACHE_EVICTION_COUNT,BLOCK_CACHE_EVICTION_COUNT_DESC,rsWrap.getBlockCacheEvictedCount()).addGauge(BLOCK_CACHE_HIT_PERCENT,BLOCK_CACHE_HIT_PERCENT_DESC,rsWrap.getBlockCacheHitPercent()).addGauge(BLOCK_CACHE_EXPRESS_HIT_PERCENT,BLOCK_CACHE_EXPRESS_HIT_PERCENT_DESC,rsWrap.getBlockCacheHitCachingPercent()).addCounter(UPDATES_BLOCKED_TIME,UPDATES_BLOCKED_DESC,rsWrap.getUpdatesBlockedTime()).tag(ZOOKEEPER_QUORUM_NAME,ZOOKEEPER_QUORUM_DESC,rsWrap.getZookeeperQuorum()).tag(SERVER_NAME_NAME,SERVER_NAME_DESC,rsWrap.getServerName()).tag(CLUSTER_ID_NAME,CLUSTER_ID_DESC,rsWrap.getClusterId());
  }
  metricsRegistry.snapshot(mrb,all);
}
