{
  CatalogTracker catalogTracker=Mockito.mock(CatalogTracker.class);
  HTableDescriptor tableDescriptor=Mockito.mock(HTableDescriptor.class);
  ForeignExceptionDispatcher monitor=Mockito.mock(ForeignExceptionDispatcher.class);
  HConnection hconnection=HConnectionTestingUtility.getMockedConnection(conf);
  Mockito.when(catalogTracker.getConnection()).thenReturn(hconnection);
  SnapshotDescription sd=SnapshotDescription.newBuilder().setName("snapshot").setTable(sourceTableName).build();
  return new RestoreSnapshotHelper(conf,fs,catalogTracker,sd,snapshotDir,htdClone,HTableDescriptor.getTableDir(rootDir,htdClone.getName()),monitor);
}
