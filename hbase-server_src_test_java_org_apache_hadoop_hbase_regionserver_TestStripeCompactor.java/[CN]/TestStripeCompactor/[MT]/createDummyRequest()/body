{
  StoreFile sf=mock(StoreFile.class);
  StoreFile.Reader r=mock(StoreFile.Reader.class);
  when(r.length()).thenReturn(1L);
  when(r.getBloomFilterType()).thenReturn(BloomType.NONE);
  when(r.getHFileReader()).thenReturn(mock(HFile.Reader.class));
  when(r.getStoreFileScanner(anyBoolean(),anyBoolean(),anyBoolean(),anyLong())).thenReturn(mock(StoreFileScanner.class));
  when(sf.getReader()).thenReturn(r);
  when(sf.createReader()).thenReturn(r);
  when(sf.createReader(anyBoolean())).thenReturn(r);
  return new CompactionRequest(Arrays.asList(sf));
}
