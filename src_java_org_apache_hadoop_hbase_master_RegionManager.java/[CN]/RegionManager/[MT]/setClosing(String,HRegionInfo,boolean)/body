{
synchronized (regionsInTransition) {
    RegionState s=regionsInTransition.get(regionInfo.getRegionName());
    if (s != null) {
      if (!s.isClosing()) {
        throw new IllegalStateException("Cannot transition to closing from any other state. Region: " + Bytes.toString(regionInfo.getRegionName()));
      }
      return;
    }
    s=new RegionState(regionInfo);
    regionsInTransition.put(regionInfo.getRegionName(),s);
    s.setClosing(serverName,setOffline);
  }
}
