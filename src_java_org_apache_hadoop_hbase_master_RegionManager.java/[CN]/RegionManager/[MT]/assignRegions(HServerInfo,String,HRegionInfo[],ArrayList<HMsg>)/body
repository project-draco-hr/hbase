{
  HServerLoad thisServersLoad=info.getLoad();
synchronized (unassignedRegions) {
    Set<HRegionInfo> regionsToAssign=regionsAwaitingAssignment();
    if (regionsToAssign.size() == 0) {
      double avgLoad=master.serverManager.getAverageLoad();
      if (avgLoad > 2.0 && thisServersLoad.getNumberOfRegions() > avgLoad) {
        if (LOG.isDebugEnabled()) {
          LOG.debug("Server " + serverName + " is overloaded. Server load: "+ thisServersLoad.getNumberOfRegions()+ " avg: "+ avgLoad);
        }
        unassignSomeRegions(thisServersLoad,avgLoad,mostLoadedRegions,returnMsgs);
      }
    }
 else {
      if (master.serverManager.numServers() == 1) {
        assignRegionsToOneServer(regionsToAssign,serverName,returnMsgs);
      }
 else {
        assignRegionsToMultipleServers(thisServersLoad,regionsToAssign,serverName,returnMsgs);
      }
    }
  }
}
