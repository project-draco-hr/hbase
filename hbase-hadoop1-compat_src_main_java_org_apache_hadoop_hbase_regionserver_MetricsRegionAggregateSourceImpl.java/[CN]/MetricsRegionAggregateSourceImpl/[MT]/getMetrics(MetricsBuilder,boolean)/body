{
  MetricsRecordBuilder mrb=metricsBuilder.addRecord(metricsName).setContext(metricsContext);
  if (regionSources != null) {
    lock.readLock().lock();
    try {
      for (      MetricsRegionSourceImpl regionMetricSource : regionSources) {
        regionMetricSource.snapshot(mrb,all);
      }
    }
  finally {
      lock.readLock().unlock();
    }
  }
  metricsRegistry.snapshot(mrb,all);
}
