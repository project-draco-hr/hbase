{
  List<RegionPlan> plans=new LinkedList<RegionPlan>();
  for (  Entry<ServerName,List<HRegionInfo>> entry : clusterState.entrySet()) {
    ServerName newServer=entry.getKey();
    for (    HRegionInfo region : entry.getValue()) {
      ServerName initialServer=initialRegionMapping.get(region);
      if (!newServer.equals(initialServer)) {
        LOG.trace("Moving Region " + region.getEncodedName() + " from server "+ initialServer.getHostname()+ " to "+ newServer.getHostname());
        RegionPlan rp=new RegionPlan(region,initialServer,newServer);
        plans.add(rp);
      }
    }
  }
  return plans;
}
