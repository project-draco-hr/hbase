{
  double max=0;
  double cost=0;
  if (this.services == null)   return cost;
  for (  Entry<ServerName,List<HRegionInfo>> entry : clusterState.entrySet()) {
    ServerName sn=entry.getKey();
    for (    HRegionInfo region : entry.getValue()) {
      max+=1;
      if (initialRegionMapping.equals(sn)) {
        continue;
      }
      List<ServerName> dataOnServers=regionFinder.getTopBlockLocations(region);
      if (dataOnServers == null) {
        continue;
      }
      int index=dataOnServers.indexOf(sn);
      if (index < 0) {
        cost+=1;
      }
 else {
        cost+=(double)index / (double)dataOnServers.size();
      }
    }
  }
  return scale(0,max,cost);
}
