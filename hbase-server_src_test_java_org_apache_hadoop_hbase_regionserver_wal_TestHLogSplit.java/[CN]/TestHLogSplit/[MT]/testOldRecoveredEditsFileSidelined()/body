{
  FileSystem fs=FileSystem.get(TEST_UTIL.getConfiguration());
  byte[] encoded=HRegionInfo.FIRST_META_REGIONINFO.getEncodedNameAsBytes();
  Path tdir=new Path(hbaseDir,Bytes.toString(HConstants.META_TABLE_NAME));
  Path regiondir=new Path(tdir,HRegionInfo.FIRST_META_REGIONINFO.getEncodedName());
  fs.mkdirs(regiondir);
  long now=System.currentTimeMillis();
  HLog.Entry entry=new HLog.Entry(new HLogKey(encoded,HConstants.META_TABLE_NAME,1,now,HConstants.DEFAULT_CLUSTER_ID),new WALEdit());
  Path parent=HLogUtil.getRegionDirRecoveredEditsDir(regiondir);
  assertEquals(parent.getName(),HLog.RECOVERED_EDITS_DIR);
  fs.createNewFile(parent);
  Path p=HLogSplitter.getRegionSplitEditsPath(fs,entry,hbaseDir,true);
  String parentOfParent=p.getParent().getParent().getName();
  assertEquals(parentOfParent,HRegionInfo.FIRST_META_REGIONINFO.getEncodedName());
  HLogFactory.createWriter(fs,p,conf).close();
}
