{
  RegionServerWriter ret=writers.get(loc);
  if (ret != null) {
    return ret;
  }
  TableName tableName=getTableFromLocationStr(loc);
  if (tableName != null) {
    LOG.warn("Invalid location string:" + loc + " found.");
  }
  HConnection hconn=getConnectionByTableName(tableName);
synchronized (writers) {
    ret=writers.get(loc);
    if (ret == null) {
      ret=new RegionServerWriter(conf,tableName,hconn);
      writers.put(loc,ret);
    }
  }
  return ret;
}
