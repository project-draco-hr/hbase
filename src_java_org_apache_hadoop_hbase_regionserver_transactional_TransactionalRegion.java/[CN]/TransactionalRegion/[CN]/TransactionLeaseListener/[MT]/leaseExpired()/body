{
  LOG.info("Transaction " + this.transactionName + " lease expired");
  TransactionState s=null;
synchronized (transactionsById) {
    s=transactionsById.remove(transactionName);
  }
  if (s == null) {
    LOG.warn("Unknown transaction expired " + this.transactionName);
    return;
  }
switch (s.getStatus()) {
case PENDING:
    s.setStatus(Status.ABORTED);
  break;
case COMMIT_PENDING:
LOG.info("Transaction " + s.getTransactionId() + " expired in COMMIT_PENDING state");
LOG.info("Checking transaction status in transaction log");
resolveTransactionFromLog();
break;
default :
LOG.warn("Unexpected status on expired lease");
}
}
