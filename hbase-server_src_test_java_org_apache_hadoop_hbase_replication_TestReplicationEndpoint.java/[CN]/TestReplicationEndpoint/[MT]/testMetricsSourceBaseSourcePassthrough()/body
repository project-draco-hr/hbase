{
  String id="id";
  DynamicMetricsRegistry mockRegistry=mock(DynamicMetricsRegistry.class);
  MetricsReplicationSourceImpl singleRms=mock(MetricsReplicationSourceImpl.class);
  when(singleRms.getMetricsRegistry()).thenReturn(mockRegistry);
  MetricsReplicationSourceImpl globalRms=mock(MetricsReplicationSourceImpl.class);
  when(globalRms.getMetricsRegistry()).thenReturn(mockRegistry);
  MetricsReplicationSourceSource singleSourceSource=new MetricsReplicationSourceSourceImpl(singleRms,id);
  MetricsReplicationSourceSource globalSourceSource=new MetricsReplicationGlobalSourceSource(globalRms);
  MetricsSource source=new MetricsSource(id,singleSourceSource,globalSourceSource);
  String gaugeName="gauge";
  String singleGaugeName="source.id." + gaugeName;
  long delta=1;
  String counterName="counter";
  String singleCounterName="source.id." + counterName;
  long count=2;
  source.decGauge(gaugeName,delta);
  source.getMetricsContext();
  source.getMetricsDescription();
  source.getMetricsJmxContext();
  source.getMetricsName();
  source.incCounters(counterName,count);
  source.incGauge(gaugeName,delta);
  source.init();
  source.removeMetric(gaugeName);
  source.setGauge(gaugeName,delta);
  source.updateHistogram(counterName,count);
  verify(singleRms).decGauge(singleGaugeName,delta);
  verify(globalRms).decGauge(gaugeName,delta);
  verify(globalRms).getMetricsContext();
  verify(globalRms).getMetricsJmxContext();
  verify(globalRms).getMetricsName();
  verify(singleRms).incCounters(singleCounterName,count);
  verify(globalRms).incCounters(counterName,count);
  verify(singleRms).incGauge(singleGaugeName,delta);
  verify(globalRms).incGauge(gaugeName,delta);
  verify(globalRms).init();
  verify(singleRms).removeMetric(singleGaugeName);
  verify(globalRms).removeMetric(gaugeName);
  verify(singleRms).setGauge(singleGaugeName,delta);
  verify(globalRms).setGauge(gaugeName,delta);
  verify(singleRms).updateHistogram(singleCounterName,count);
  verify(globalRms).updateHistogram(counterName,count);
}
