{
  secondaryRegion.close();
  walSecondary=spy(walSecondary);
  secondaryRegion=HRegion.openHRegion(secondaryHri,htd,walSecondary,CONF,rss,null);
  verify(walSecondary,times(0)).append((HTableDescriptor)any(),(HRegionInfo)any(),(WALKey)any(),(WALEdit)any(),(AtomicLong)any(),anyBoolean(),(List<Cell>)any());
  putDataByReplay(secondaryRegion,0,10,cq,families);
  secondaryRegion.replayWALFlushStartMarker(FlushDescriptor.newBuilder().setFlushSequenceNumber(10).setTableName(ByteString.copyFrom(primaryRegion.getTableDesc().getTableName().getName())).setAction(FlushAction.START_FLUSH).setEncodedRegionName(ByteString.copyFrom(primaryRegion.getRegionInfo().getEncodedNameAsBytes())).setRegionName(ByteString.copyFrom(primaryRegion.getRegionInfo().getRegionName())).build());
  verify(walSecondary,times(0)).append((HTableDescriptor)any(),(HRegionInfo)any(),(WALKey)any(),(WALEdit)any(),(AtomicLong)any(),anyBoolean(),(List<Cell>)any());
  secondaryRegion.close();
  verify(walSecondary,times(0)).append((HTableDescriptor)any(),(HRegionInfo)any(),(WALKey)any(),(WALEdit)any(),(AtomicLong)any(),anyBoolean(),(List<Cell>)any());
}
