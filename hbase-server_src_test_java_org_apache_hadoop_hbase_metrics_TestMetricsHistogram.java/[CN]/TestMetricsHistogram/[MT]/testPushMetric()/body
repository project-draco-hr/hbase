{
  final MetricsHistogram h=new MetricsHistogram("testHistogram",null);
  genRandomData(h);
  MetricsRecord mr=mock(MetricsRecord.class);
  h.pushMetric(mr);
  verify(mr).setMetric("testHistogram_num_ops",10000L);
  verify(mr).setMetric(eq("testHistogram_min"),anyLong());
  verify(mr).setMetric(eq("testHistogram_max"),anyLong());
  verify(mr).setMetric(eq("testHistogram_mean"),anyFloat());
  verify(mr).setMetric(eq("testHistogram_std_dev"),anyFloat());
  verify(mr).setMetric(eq("testHistogram_median"),anyFloat());
  verify(mr).setMetric(eq("testHistogram_75th_percentile"),anyFloat());
  verify(mr).setMetric(eq("testHistogram_95th_percentile"),anyFloat());
  verify(mr).setMetric(eq("testHistogram_99th_percentile"),anyFloat());
}
