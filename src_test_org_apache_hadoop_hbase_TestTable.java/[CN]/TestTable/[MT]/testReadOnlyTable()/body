{
  HBaseAdmin admin=new HBaseAdmin(conf);
  HTableDescriptor desc=new HTableDescriptor(getName());
  byte[] colName=Bytes.toBytes("test:");
  desc.addFamily(new HColumnDescriptor(colName));
  desc.setReadOnly(true);
  admin.createTable(desc);
  HTable table=new HTable(conf,getName());
  try {
    byte[] value=Bytes.toBytes("somedata");
    BatchUpdate update=new BatchUpdate();
    update.put(colName,value);
    table.commit(update);
    fail("BatchUpdate on read only table succeeded");
  }
 catch (  Exception e) {
  }
}
