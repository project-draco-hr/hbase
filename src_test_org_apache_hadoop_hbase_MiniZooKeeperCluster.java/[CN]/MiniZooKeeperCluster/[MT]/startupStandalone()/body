{
  ServerStats.registerAsConcrete();
  File dir=new File(baseDir,"zookeeper-standalone");
  recreateDir(dir);
  ZooKeeperServer server=new ZooKeeperServer(dir,dir,TICK_TIME);
  standaloneServerFactory=new NIOServerCnxn.Factory(CLIENT_PORT_START);
  standaloneServerFactory.startup(server);
  ZooKeeperWrapper.setQuorumServers("localhost:" + CLIENT_PORT_START);
  if (!waitForServerUp(CLIENT_PORT_START,CONNECTION_TIMEOUT)) {
    throw new IOException("Waiting for startup of standalone server");
  }
}
