{
  File dir=new File(baseDir,"zookeeper-standalone");
  recreateDir(dir);
  ZooKeeperServer server=new ZooKeeperServer(dir,dir,TICK_TIME);
  while (true) {
    try {
      standaloneServerFactory=new NIOServerCnxn.Factory(clientPortStart);
    }
 catch (    BindException e) {
      LOG.info("Faild binding ZK Server to client port: " + clientPortStart);
      clientPortStart++;
      continue;
    }
    break;
  }
  standaloneServerFactory.startup(server);
  quorumServers="localhost:" + clientPortStart;
  ZooKeeperWrapper.setQuorumServers(quorumServers);
  if (!waitForServerUp(clientPortStart,CONNECTION_TIMEOUT)) {
    throw new IOException("Waiting for startup of standalone server");
  }
}
