{
  slm=new SplitLogManager(zkw,conf,stopper,master,DUMMY_MASTER,null);
  slm.finishInitialization();
  TaskBatch batch=new TaskBatch();
  String tasknode=submitTaskAndWait(batch,"foo/1");
  final ServerName worker1=new ServerName("worker1,1,1");
  SplitLogTask slt=new SplitLogTask.Owned(worker1);
  ZKUtil.setData(zkw,tasknode,slt.toByteArray());
  if (tot_mgr_heartbeat.get() == 0)   waitForCounter(tot_mgr_heartbeat,0,1,1000);
  Assert.assertEquals(0,tot_mgr_resubmit.get());
  Mockito.when(sm.isServerOnline(worker1)).thenReturn(false);
  Thread.sleep(1300);
  Assert.assertEquals(1,tot_mgr_resubmit.get());
}
