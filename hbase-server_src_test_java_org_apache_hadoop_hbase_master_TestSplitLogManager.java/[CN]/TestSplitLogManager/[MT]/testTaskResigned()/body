{
  LOG.info("TestTaskResigned - resubmit task node once in RESIGNED state");
  assertEquals(tot_mgr_resubmit.get(),0);
  slm=new SplitLogManager(zkw,conf,stopper,DUMMY_MASTER,null);
  slm.finishInitialization();
  assertEquals(tot_mgr_resubmit.get(),0);
  TaskBatch batch=new TaskBatch();
  String tasknode=submitTaskAndWait(batch,"foo/1");
  assertEquals(tot_mgr_resubmit.get(),0);
  final ServerName worker1=new ServerName("worker1,1,1");
  assertEquals(tot_mgr_resubmit.get(),0);
  SplitLogTask slt=new SplitLogTask.Resigned(worker1);
  assertEquals(tot_mgr_resubmit.get(),0);
  ZKUtil.setData(zkw,tasknode,slt.toByteArray());
  int version=ZKUtil.checkExists(zkw,tasknode);
  if (tot_mgr_resubmit.get() == 0)   waitForCounter(tot_mgr_resubmit,0,1,1000);
  assertEquals(tot_mgr_resubmit.get(),1);
  int version1=ZKUtil.checkExists(zkw,tasknode);
  assertTrue("version1=" + version1 + ", version="+ version,version1 > version);
  byte[] taskstate=ZKUtil.getData(zkw,tasknode);
  slt=SplitLogTask.parseFrom(taskstate);
  assertTrue(slt.isUnassigned(DUMMY_MASTER));
}
