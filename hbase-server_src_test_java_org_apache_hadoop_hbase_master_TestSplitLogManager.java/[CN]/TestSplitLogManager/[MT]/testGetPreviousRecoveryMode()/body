{
  LOG.info("testGetPreviousRecoveryMode");
  SplitLogCounters.resetCounters();
  Configuration testConf=HBaseConfiguration.create(TEST_UTIL.getConfiguration());
  testConf.setBoolean(HConstants.DISTRIBUTED_LOG_REPLAY_KEY,true);
  zkw.getRecoverableZooKeeper().create(ZKSplitLog.getEncodedNodeName(zkw,"testRecovery"),new SplitLogTask.Unassigned(ServerName.valueOf("mgr,1,1"),RecoveryMode.LOG_SPLITTING).toByteArray(),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  slm=new SplitLogManager(zkw,testConf,stopper,master,DUMMY_MASTER);
  assertTrue(slm.getRecoveryMode() == RecoveryMode.LOG_SPLITTING);
  zkw.getRecoverableZooKeeper().delete(ZKSplitLog.getEncodedNodeName(zkw,"testRecovery"),-1);
  slm.setRecoveryMode(false);
  assertTrue(slm.getRecoveryMode() == RecoveryMode.LOG_REPLAY);
}
