{
  while (true) {
    Chunk c=curChunk.get();
    if (c != null) {
      return c;
    }
    c=(chunkPool != null) ? chunkPool.getChunk() : new Chunk(chunkSize);
    if (curChunk.compareAndSet(null,c)) {
      c.init();
      this.chunkQueue.add(c);
      return c;
    }
 else     if (chunkPool != null) {
      chunkPool.putbackChunk(c);
    }
  }
}
