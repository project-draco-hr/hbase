{
  if (event.getType().equals(EventType.NodeDeleted)) {
    LOG.info(server + " znode expired");
    HServerInfo info=serversToServerInfo.remove(server);
    boolean rootServer=false;
    if (info != null) {
      HServerAddress root=master.getRootRegionLocation();
      if (root != null && root.equals(info.getServerAddress())) {
        master.regionManager.unsetRootRegion();
        rootServer=true;
      }
      String serverName=HServerInfo.getServerName(info);
      HServerLoad load=serversToLoad.remove(serverName);
      if (load != null) {
synchronized (loadToServers) {
          Set<String> servers=loadToServers.get(load);
          if (servers != null) {
            servers.remove(serverName);
            loadToServers.put(load,servers);
          }
        }
      }
      deadServers.add(server);
      try {
        master.toDoQueue.put(new ProcessServerShutdown(master,info,rootServer));
      }
 catch (      InterruptedException e) {
        LOG.error("insert into toDoQueue was interrupted",e);
      }
    }
synchronized (serversToServerInfo) {
      serversToServerInfo.notifyAll();
    }
  }
}
