{
synchronized (this.serversToServerInfo) {
    try {
      if (removeServerInfo(serverInfo.getServerName(),serverInfo.getServerAddress())) {
        LOG.info("Region server " + serverInfo.getServerName() + ": MSG_REPORT_EXITING");
        if (!this.master.isClosed()) {
          for (int i=1; i < msgs.length; i++) {
            LOG.info("Processing " + msgs[i] + " from "+ serverInfo.getServerName());
            HRegionInfo info=msgs[i].getRegionInfo();
            if (!info.isMetaRegion()) {
synchronized (this.master.getRegionManager()) {
                if (!this.master.getRegionManager().isOfflined(info.getRegionNameAsString())) {
                  this.master.getRegionManager().setUnassigned(info,true);
                }
 else {
                  this.master.getRegionManager().removeRegion(info);
                }
              }
            }
          }
        }
      }
    }
  finally {
      this.serversToServerInfo.notifyAll();
    }
  }
}
