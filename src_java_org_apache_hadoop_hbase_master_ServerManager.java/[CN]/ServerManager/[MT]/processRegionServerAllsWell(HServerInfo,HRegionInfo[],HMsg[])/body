{
  this.serverAddressToServerInfo.put(serverInfo.getServerAddress(),serverInfo);
  this.serversToServerInfo.put(serverInfo.getServerName(),serverInfo);
  HServerLoad load=this.serversToLoad.get(serverInfo.getServerName());
  if (load != null) {
    this.master.getMetrics().incrementRequests(load.getNumberOfRequests());
    if (!load.equals(serverInfo.getLoad())) {
      updateLoadToServers(serverInfo.getServerName(),load);
    }
  }
  load=serverInfo.getLoad();
  this.serversToLoad.put(serverInfo.getServerName(),load);
synchronized (loadToServers) {
    Set<String> servers=this.loadToServers.get(load);
    if (servers == null) {
      servers=new HashSet<String>();
    }
    servers.add(serverInfo.getServerName());
    this.loadToServers.put(load,servers);
  }
  return processMsgs(serverInfo,mostLoadedRegions,msgs);
}
