{
synchronized (serversToServerInfo) {
    try {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Region server " + serverName + ": MSG_REPORT_EXITING -- cancelling lease");
      }
      if (cancelLease(serverName)) {
        LOG.info("Region server " + serverName + ": MSG_REPORT_EXITING -- lease cancelled");
        if (!master.closed.get()) {
          for (int i=1; i < msgs.length; i++) {
            HRegionInfo info=msgs[i].getRegionInfo();
            if (info.isRootRegion()) {
              master.regionManager.unassignRootRegion();
            }
 else             if (info.isMetaTable()) {
              master.regionManager.offlineMetaRegion(info.getStartKey());
            }
            master.regionManager.setUnassigned(info);
          }
        }
      }
    }
  finally {
      serversToServerInfo.notifyAll();
    }
  }
}
