{
  this.conf.setInt("hbase.master.info.port",60011);
  this.conf.setInt("hbase.regionserver.info.port",60031);
  MiniHBaseCluster miniHbase=new MiniHBaseCluster(this.conf,1);
  HBaseAdmin a=new HBaseAdmin(conf);
  a.createTable(new HTableDescriptor(getName()));
  assertTrue(a.tableExists(new Text(getName())));
  try {
    int port=miniHbase.getMaster().infoServer.getPort();
    assertHasExpectedContent(new URL("http://localhost:" + port + "/index.html"),"Master");
    port=miniHbase.getRegionThreads().get(0).getRegionServer().infoServer.getPort();
    assertHasExpectedContent(new URL("http://localhost:" + port + "/index.html"),"Region Server");
  }
  finally {
    miniHbase.shutdown();
  }
}
