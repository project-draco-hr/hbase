{
  if (!metaRegionAvailable()) {
    return true;
  }
  final RegionHistorian historian=RegionHistorian.getInstance();
  HRegionInterface server=master.connection.getHRegionConnection(getMetaRegion().getServer());
  LOG.info(regionInfo.getRegionNameAsString() + " open on " + serverInfo.getServerAddress().toString());
  LOG.info("updating row " + regionInfo.getRegionNameAsString() + " in region "+ Bytes.toString(metaRegionName)+ " with startcode "+ serverInfo.getStartCode()+ " and server "+ serverInfo.getServerAddress());
  Put p=new Put(regionInfo.getRegionName());
  p.add(CATALOG_FAMILY,SERVER_QUALIFIER,Bytes.toBytes(serverInfo.getServerAddress().toString()));
  p.add(CATALOG_FAMILY,STARTCODE_QUALIFIER,Bytes.toBytes(serverInfo.getStartCode()));
  server.put(metaRegionName,p);
  if (!historian.isOnline()) {
    historian.online(this.master.getConfiguration());
  }
  historian.addRegionOpen(regionInfo,serverInfo.getServerAddress());
synchronized (master.regionManager) {
    if (isMetaTable) {
      MetaRegion m=new MetaRegion(new HServerAddress(serverInfo.getServerAddress()),regionInfo);
      if (!master.regionManager.isInitialMetaScanComplete()) {
        if (LOG.isDebugEnabled()) {
          LOG.debug("Adding " + m.toString() + " to regions to scan");
        }
        master.regionManager.addMetaRegionToScan(m);
      }
 else {
        if (LOG.isDebugEnabled()) {
          LOG.debug("Adding to onlineMetaRegions: " + m.toString());
        }
        master.regionManager.putMetaRegionOnline(m);
        master.regionManager.metaScannerThread.interrupt();
      }
    }
    master.regionManager.removeRegion(regionInfo);
    return true;
  }
}
