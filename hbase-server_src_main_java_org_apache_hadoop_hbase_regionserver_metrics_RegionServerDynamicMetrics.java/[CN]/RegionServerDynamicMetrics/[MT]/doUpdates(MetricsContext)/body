{
  for (  Entry<String,AtomicLong> entry : RegionMetricsStorage.getNumericMetrics().entrySet()) {
    this.setNumericMetric(entry.getKey(),entry.getValue().getAndSet(0));
  }
  for (  Entry<String,AtomicLong> entry : RegionMetricsStorage.getNumericPersistentMetrics().entrySet()) {
    this.setNumericMetric(entry.getKey(),entry.getValue().get());
  }
  for (  Entry<String,Pair<AtomicLong,AtomicInteger>> entry : RegionMetricsStorage.getTimeVaryingMetrics().entrySet()) {
    Pair<AtomicLong,AtomicInteger> value=entry.getValue();
    this.incrTimeVaryingMetric(entry.getKey(),value.getFirst().getAndSet(0),value.getSecond().getAndSet(0));
  }
synchronized (registry) {
    for (    String metricName : registry.getKeyList()) {
      MetricsBase value=registry.get(metricName);
      value.pushMetric(metricsRecord);
    }
  }
  metricsRecord.update();
}
