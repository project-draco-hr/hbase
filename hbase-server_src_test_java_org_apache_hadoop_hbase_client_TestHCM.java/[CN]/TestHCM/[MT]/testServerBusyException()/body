{
  HTableDescriptor hdt=TEST_UTIL.createTableDescriptor("HCM-testServerBusy");
  hdt.addCoprocessor(SleepCoprocessor.class.getName());
  Configuration c=new Configuration(TEST_UTIL.getConfiguration());
  TEST_UTIL.createTable(hdt,new byte[][]{FAM_NAM},c);
  TestGetThread tg1=new TestGetThread(TEST_UTIL.getConnection().getTable(hdt.getTableName()));
  TestGetThread tg2=new TestGetThread(TEST_UTIL.getConnection().getTable(hdt.getTableName()));
  TestGetThread tg3=new TestGetThread(TEST_UTIL.getConnection().getTable(hdt.getTableName()));
  TestGetThread tg4=new TestGetThread(TEST_UTIL.getConnection().getTable(hdt.getTableName()));
  TestGetThread tg5=new TestGetThread(TEST_UTIL.getConnection().getTable(hdt.getTableName()));
  tg1.start();
  tg2.start();
  tg3.start();
  tg4.start();
  tg5.start();
  tg1.join();
  tg2.join();
  tg3.join();
  tg4.join();
  tg5.join();
  assertEquals(2,tg1.getServerBusyException + tg2.getServerBusyException + tg3.getServerBusyException+ tg4.getServerBusyException+ tg5.getServerBusyException);
  TestPutThread tp1=new TestPutThread(TEST_UTIL.getConnection().getTable(hdt.getTableName()));
  TestPutThread tp2=new TestPutThread(TEST_UTIL.getConnection().getTable(hdt.getTableName()));
  TestPutThread tp3=new TestPutThread(TEST_UTIL.getConnection().getTable(hdt.getTableName()));
  TestPutThread tp4=new TestPutThread(TEST_UTIL.getConnection().getTable(hdt.getTableName()));
  TestPutThread tp5=new TestPutThread(TEST_UTIL.getConnection().getTable(hdt.getTableName()));
  tp1.start();
  tp2.start();
  tp3.start();
  tp4.start();
  tp5.start();
  tp1.join();
  tp2.join();
  tp3.join();
  tp4.join();
  tp5.join();
  assertEquals(2,tp1.getServerBusyException + tp2.getServerBusyException + tp3.getServerBusyException+ tp4.getServerBusyException+ tp5.getServerBusyException);
}
