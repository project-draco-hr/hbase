{
  final String CONFIG_KEY="hbase.regionserver.thread.compaction.throttle";
  long anyValue=10;
  Configuration conf=HBaseConfiguration.create();
  conf.setLong(CONFIG_KEY,anyValue);
  init(getName() + "-xml",conf);
  assertTrue(store.throttleCompaction(anyValue + 1));
  assertFalse(store.throttleCompaction(anyValue));
  --anyValue;
  HTableDescriptor htd=new HTableDescriptor(TableName.valueOf(table));
  HColumnDescriptor hcd=new HColumnDescriptor(family);
  htd.setConfiguration(CONFIG_KEY,Long.toString(anyValue));
  init(getName() + "-htd",conf,htd,hcd);
  assertTrue(store.throttleCompaction(anyValue + 1));
  assertFalse(store.throttleCompaction(anyValue));
  --anyValue;
  hcd.setConfiguration(CONFIG_KEY,Long.toString(anyValue));
  init(getName() + "-hcd",conf,htd,hcd);
  assertTrue(store.throttleCompaction(anyValue + 1));
  assertFalse(store.throttleCompaction(anyValue));
}
