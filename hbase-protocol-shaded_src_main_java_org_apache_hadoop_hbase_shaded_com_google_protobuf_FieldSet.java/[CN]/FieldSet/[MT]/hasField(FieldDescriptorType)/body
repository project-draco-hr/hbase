{
  if (descriptor.isRepeated()) {
    throw new IllegalArgumentException("hasField() can only be called on non-repeated fields.");
  }
  return fields.get(descriptor) != null;
}
