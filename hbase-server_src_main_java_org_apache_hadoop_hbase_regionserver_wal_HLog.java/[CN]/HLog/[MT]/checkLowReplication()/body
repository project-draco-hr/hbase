{
  try {
    int numCurrentReplicas=getLogReplication();
    if (numCurrentReplicas != 0 && numCurrentReplicas < this.minTolerableReplication) {
      if (this.lowReplicationRollEnabled) {
        if (this.consecutiveLogRolls < this.lowReplicationRollLimit) {
          LOG.warn("HDFS pipeline error detected. " + "Found " + numCurrentReplicas + " replicas but expecting no less than "+ this.minTolerableReplication+ " replicas. "+ " Requesting close of hlog.");
          requestLogRoll();
          this.consecutiveLogRolls++;
        }
 else {
          LOG.warn("Too many consecutive RollWriter requests, it's a sign of " + "the total number of live datanodes is lower than the tolerable replicas.");
          this.consecutiveLogRolls=0;
          this.lowReplicationRollEnabled=false;
        }
      }
    }
 else     if (numCurrentReplicas >= this.minTolerableReplication) {
      if (!this.lowReplicationRollEnabled) {
        if (this.numEntries.get() <= 1) {
          return;
        }
        this.lowReplicationRollEnabled=true;
        LOG.info("LowReplication-Roller was enabled.");
      }
    }
  }
 catch (  Exception e) {
    LOG.warn("Unable to invoke DFSOutputStream.getNumCurrentReplicas" + e + " still proceeding ahead...");
  }
}
