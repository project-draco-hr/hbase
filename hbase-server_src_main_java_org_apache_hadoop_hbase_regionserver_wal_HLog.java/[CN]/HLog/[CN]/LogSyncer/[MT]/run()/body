{
  try {
    while (!this.isInterrupted() && !closeLogSyncer.get()) {
      try {
        if (unflushedEntries.get() <= syncedTillHere) {
synchronized (closeLogSyncer) {
            closeLogSyncer.wait(this.optionalFlushInterval);
          }
        }
        sync();
      }
 catch (      IOException e) {
        LOG.error("Error while syncing, requesting close of hlog ",e);
        requestLogRoll();
      }
    }
  }
 catch (  InterruptedException e) {
    LOG.debug(getName() + " interrupted while waiting for sync requests");
  }
 finally {
    LOG.info(getName() + " exiting");
  }
}
