{
  try {
    if (maxWaitForSeqId < 0) {
      this.seqNumAssignedLatch.await();
    }
 else {
      if (!this.seqNumAssignedLatch.await(maxWaitForSeqId,TimeUnit.MILLISECONDS)) {
        throw new IOException("Timed out waiting for seq number to be assigned");
      }
    }
  }
 catch (  InterruptedException ie) {
    LOG.warn("Thread interrupted waiting for next log sequence number");
    InterruptedIOException iie=new InterruptedIOException();
    iie.initCause(ie);
    throw iie;
  }
  return this.logSeqNum;
}
