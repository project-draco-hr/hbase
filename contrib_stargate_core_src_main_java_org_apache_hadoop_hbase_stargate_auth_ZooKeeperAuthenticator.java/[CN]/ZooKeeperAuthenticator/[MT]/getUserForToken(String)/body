{
  ZooKeeper zk=wrapper.getZooKeeper();
  try {
    byte[] data=zk.getData(usersZNode + "/" + token,null,null);
    if (data == null) {
      return null;
    }
    JSONObject o=new JSONObject(Bytes.toString(data));
    if (!o.has("name")) {
      throw new IOException("invalid record, missing 'name'");
    }
    String name=o.getString("name");
    boolean admin=false;
    if (o.has("admin")) {
      admin=o.getBoolean("admin");
    }
    boolean disabled=false;
    if (o.has("disabled")) {
      disabled=o.getBoolean("disabled");
    }
    return new User(name,token,admin,disabled);
  }
 catch (  KeeperException.NoNodeException e) {
    return null;
  }
catch (  Exception e) {
    throw new IOException(e);
  }
}
