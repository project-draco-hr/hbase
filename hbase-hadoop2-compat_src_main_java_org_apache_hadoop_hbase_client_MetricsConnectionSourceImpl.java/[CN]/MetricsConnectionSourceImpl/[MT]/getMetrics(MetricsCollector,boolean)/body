{
  MetricsRecordBuilder mrb=metricsCollector.addRecord(metricsName);
  if (wrapper != null) {
    mrb.addGauge(Interns.info(META_LOOKUP_POOL_LARGEST_SIZE_NAME,META_LOOKUP_POOL_LARGEST_SIZE_DESC),wrapper.getMetaLookupPoolLargestPoolSize()).addGauge(Interns.info(META_LOOKUP_POOL_ACTIVE_THREAD_NAME,META_LOOKUP_POOL_ACTIVE_THREAD_DESC),wrapper.getMetaLookupPoolActiveCount()).tag(Interns.info(BATCH_POOL_ID_NAME,BATCH_POOL_ID_DESC),wrapper.getBatchPoolId()).addGauge(Interns.info(BATCH_POOL_ACTIVE_THREAD_NAME,BATCH_POOL_ACTIVE_THREAD_DESC),wrapper.getBatchPoolActiveCount()).addGauge(Interns.info(BATCH_POOL_LARGEST_SIZE_NAME,BATCH_POOL_LARGEST_SIZE_DESC),wrapper.getBatchPoolLargestPoolSize()).tag(Interns.info(CONNECTION_ID_NAME,CONNECTION_ID_DESC),wrapper.getId()).tag(Interns.info(USER_NAME_NAME,USER_NAME_DESC),wrapper.getUserName()).tag(Interns.info(CLUSTER_ID_NAME,CLUSTER_ID_DESC),wrapper.getClusterId()).tag(Interns.info(ZOOKEEPER_QUORUM_NAME,ZOOKEEPER_QUORUM_DESC),wrapper.getZookeeperQuorum()).tag(Interns.info(ZOOKEEPER_ZNODE_NAME,ZOOKEEPER_ZNODE_DESC),wrapper.getZookeeperBaseNode());
  }
  metricsRegistry.snapshot(mrb,all);
}
