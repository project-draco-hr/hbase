{
  final TableName tableName=TableName.valueOf("testTableExistsIfTheSpecifiedTableRegionIsSplitParent");
  Table t=createTableAndWait(tableName,Bytes.toBytes("cf"));
  List<HRegion> regions=null;
  try {
    regions=cluster.getRegions(tableName);
    int regionServerIndex=cluster.getServerWith(regions.get(0).getRegionName());
    HRegionServer regionServer=cluster.getRegionServer(regionServerIndex);
    insertData(tableName,admin,t);
    admin.setBalancerRunning(false,true);
    cluster.getMaster().setCatalogJanitorEnabled(false);
    boolean tableExists=MetaTableAccessor.tableExists(regionServer.getShortCircuitConnection(),tableName);
    assertEquals("The specified table should present.",true,tableExists);
    final HRegion region=findSplittableRegion(regions);
    assertTrue("not able to find a splittable region",region != null);
    SplitTransaction st=new SplitTransaction(region,Bytes.toBytes("row2"));
    try {
      st.prepare();
      st.createDaughters(regionServer,regionServer);
    }
 catch (    IOException e) {
    }
    tableExists=MetaTableAccessor.tableExists(regionServer.getShortCircuitConnection(),tableName);
    assertEquals("The specified table should present.",true,tableExists);
  }
  finally {
    admin.setBalancerRunning(true,false);
    cluster.getMaster().setCatalogJanitorEnabled(true);
    t.close();
  }
}
