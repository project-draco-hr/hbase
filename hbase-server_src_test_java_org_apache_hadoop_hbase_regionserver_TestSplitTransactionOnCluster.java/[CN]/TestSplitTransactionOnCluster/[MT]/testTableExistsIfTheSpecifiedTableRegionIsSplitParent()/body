{
  ZooKeeperWatcher zkw=HBaseTestingUtility.getZooKeeperWatcher(TESTING_UTIL);
  final byte[] tableName=Bytes.toBytes("testTableExistsIfTheSpecifiedTableRegionIsSplitParent");
  HTable t=createTableAndWait(tableName,Bytes.toBytes("cf"));
  List<HRegion> regions=null;
  try {
    regions=cluster.getRegions(tableName);
    int regionServerIndex=cluster.getServerWith(regions.get(0).getRegionName());
    HRegionServer regionServer=cluster.getRegionServer(regionServerIndex);
    insertData(tableName,admin,t);
    admin.setBalancerRunning(false,true);
    cluster.getMaster().setCatalogJanitorEnabled(false);
    boolean tableExists=MetaReader.tableExists(regionServer.getCatalogTracker(),Bytes.toString(tableName));
    assertEquals("The specified table should present.",true,tableExists);
    final HRegion region=findSplittableRegion(regions);
    assertTrue("not able to find a splittable region",region != null);
    SplitTransaction st=new SplitTransaction(region,Bytes.toBytes("row2"));
    try {
      st.prepare();
      st.createDaughters(regionServer,regionServer);
    }
 catch (    IOException e) {
    }
    tableExists=MetaReader.tableExists(regionServer.getCatalogTracker(),Bytes.toString(tableName));
    assertEquals("The specified table should present.",true,tableExists);
  }
  finally {
    if (regions != null) {
      String node=ZKAssign.getNodeName(zkw,regions.get(0).getRegionInfo().getEncodedName());
      ZKUtil.deleteNodeFailSilent(zkw,node);
    }
    admin.setBalancerRunning(true,false);
    cluster.getMaster().setCatalogJanitorEnabled(true);
    t.close();
  }
}
