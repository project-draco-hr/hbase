{
  BatchUpdate batchUpdate=new BatchUpdate(region.getRegionName());
  batchUpdate.put(HConstants.COL_REGIONINFO,Writables.getBytes(region.getRegionInfo()));
  batchUpdate.put(HConstants.COL_SERVER,Bytes.toBytes(serverAddress.toString()));
  batchUpdate.put(HConstants.COL_STARTCODE,Bytes.toBytes(startCode));
  t.commit(batchUpdate);
  byte[] bytes=t.get(region.getRegionName(),HConstants.COL_REGIONINFO).getValue();
  HRegionInfo hri=Writables.getHRegionInfo(bytes);
  assertEquals(region.getRegionId(),hri.getRegionId());
  if (LOG.isDebugEnabled()) {
    LOG.info("Added region " + region.getRegionName() + " to table "+ t.getTableName());
  }
}
