{
  int numServers=0, totalLoad=0;
  for (  Map.Entry<ServerName,Set<HRegionInfo>> e : serverHoldings.entrySet()) {
    Set<HRegionInfo> regions=e.getValue();
    ServerName serverName=e.getKey();
    int regionCount=regions.size();
    if (regionCount > 0 || serverManager.isServerOnline(serverName)) {
      totalLoad+=regionCount;
      numServers++;
    }
  }
  return numServers == 0 ? 0.0 : (double)totalLoad / (double)numServers;
}
