{
  if (limit - position < requiredSize) {
    doFlush();
  }
}
