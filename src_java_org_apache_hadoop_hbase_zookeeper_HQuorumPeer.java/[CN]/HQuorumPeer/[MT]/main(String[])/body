{
  QuorumPeerConfig config=new QuorumPeerConfig();
  try {
    Properties properties=parseZooKeeperConfig();
    config.parseProperties(properties);
  }
 catch (  Exception e) {
    e.printStackTrace();
    System.exit(-1);
  }
  if (config.isDistributed()) {
    QuorumPeerMain qp=new QuorumPeerMain();
    qp.runFromConfig(config);
  }
 else {
    ZooKeeperServerMain zk=new ZooKeeperServerMain();
    ServerConfig serverConfig=new ServerConfig();
    serverConfig.readFrom(config);
    zk.runFromConfig(serverConfig);
  }
}
