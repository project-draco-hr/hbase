{
  minCapacity=(minCapacity + (GROW_ALIGN - 1)) & -GROW_ALIGN;
  if (buf == null) {
    buf=new byte[minCapacity];
  }
 else   if (minCapacity > buf.length) {
    int newCapacity=buf.length << 1;
    if (minCapacity > newCapacity || newCapacity > DOUBLE_GROW_LIMIT) {
      newCapacity=minCapacity;
    }
    buf=Arrays.copyOf(buf,newCapacity);
  }
}
