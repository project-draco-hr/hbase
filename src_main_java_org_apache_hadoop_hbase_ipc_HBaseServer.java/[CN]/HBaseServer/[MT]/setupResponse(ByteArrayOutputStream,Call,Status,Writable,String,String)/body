{
  response.reset();
  DataOutputStream out=new DataOutputStream(response);
  if (status == Status.SUCCESS) {
    try {
      rv.write(out);
      call.setResponse(rv,status,null,null);
    }
 catch (    Throwable t) {
      LOG.warn("Error serializing call response for call " + call,t);
      call.setResponse(null,status.ERROR,t.getClass().getName(),StringUtils.stringifyException(t));
    }
  }
 else {
    call.setResponse(rv,status,errorClass,error);
  }
}
