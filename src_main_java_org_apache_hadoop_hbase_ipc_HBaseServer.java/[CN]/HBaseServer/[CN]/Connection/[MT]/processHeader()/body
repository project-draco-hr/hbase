{
  header=ConnectionHeader.parseFrom(new ByteArrayInputStream(data.array()));
  try {
    String protocolClassName=header.getProtocol();
    protocol=getProtocolClass(protocolClassName,conf);
  }
 catch (  ClassNotFoundException cnfe) {
    throw new IOException("Unknown protocol: " + header.getProtocol());
  }
  user=User.createUser(header);
}
