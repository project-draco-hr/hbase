{
  HConnection connection=Mockito.mock(HConnection.class);
  ConnectException connectException=new ConnectException("Connection refused");
  final HRegionInterface implementation=Mockito.mock(HRegionInterface.class);
  Mockito.when(implementation.get((byte[])Mockito.any(),(Get)Mockito.any())).thenThrow(connectException);
  Mockito.when(connection.getHRegionConnection((HServerAddress)Matchers.anyObject(),Matchers.anyBoolean())).thenReturn(implementation);
  Assert.assertNotNull(connection.getHRegionConnection(new HServerAddress(),false));
  final CatalogTracker ct=constructAndStartCatalogTracker(connection);
  try {
    RootLocationEditor.setRootLocation(this.watcher,new ServerName("example.com",1234,System.currentTimeMillis()));
    Assert.assertFalse(ct.verifyMetaRegionLocation(100));
  }
  finally {
    RootLocationEditor.deleteRootLocation(this.watcher);
  }
}
