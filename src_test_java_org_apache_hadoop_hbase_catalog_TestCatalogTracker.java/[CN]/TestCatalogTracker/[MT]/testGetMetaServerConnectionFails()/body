{
  final HRegionInterface implementation=Mockito.mock(HRegionInterface.class);
  HConnection connection=mockConnection(implementation);
  try {
    Mockito.when(implementation.get((byte[])Mockito.any(),(Get)Mockito.any())).thenThrow(new ConnectException("Connection refused"));
    final CatalogTracker ct=constructAndStartCatalogTracker(connection);
    try {
      RootRegionTracker.setRootLocation(this.watcher,SN);
      long timeout=UTIL.getConfiguration().getLong("hbase.catalog.verification.timeout",1000);
      Assert.assertFalse(ct.verifyMetaRegionLocation(timeout));
    }
  finally {
      RootRegionTracker.deleteRootLocation(this.watcher);
    }
  }
  finally {
    HConnectionManager.deleteConnection(UTIL.getConfiguration(),true);
  }
}
