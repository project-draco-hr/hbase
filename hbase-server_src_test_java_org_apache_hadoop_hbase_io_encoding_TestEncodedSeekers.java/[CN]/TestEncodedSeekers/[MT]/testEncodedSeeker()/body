{
  System.err.println("Testing encoded seekers for encoding " + encoding);
  LruBlockCache cache=(LruBlockCache)new CacheConfig(testUtil.getConfiguration()).getBlockCache();
  cache.clearCache();
  HRegion region=testUtil.createTestRegion(TABLE_NAME,new HColumnDescriptor(CF_NAME).setMaxVersions(MAX_VERSIONS).setDataBlockEncoding(encoding).setEncodeOnDisk(encodeOnDisk).setBlocksize(BLOCK_SIZE));
  doPuts(region);
  doGets(region);
  region.compactStores();
  doGets(region);
  Map<DataBlockEncoding,Integer> encodingCounts=cache.getEncodingCountsForTest();
  System.err.println("encodingCounts=" + encodingCounts);
  assertEquals(1,encodingCounts.size());
  DataBlockEncoding encodingInCache=encodingCounts.keySet().iterator().next();
  assertEquals(encoding,encodingInCache);
  assertTrue(encodingCounts.get(encodingInCache) > 0);
}
