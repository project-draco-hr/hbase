{
  Configuration conf=UTIL.getConfiguration();
  AccessControlLists.addTablePermission(conf,TEST_TABLE,"albert",new TablePermission(TEST_TABLE,null,TablePermission.Action.READ));
  AccessControlLists.addTablePermission(conf,TEST_TABLE,"betty",new TablePermission(TEST_TABLE,null,TablePermission.Action.READ,TablePermission.Action.WRITE));
  AccessControlLists.addTablePermission(conf,TEST_TABLE,"clark",new TablePermission(TEST_TABLE,TEST_FAMILY,TablePermission.Action.READ));
  AccessControlLists.addTablePermission(conf,TEST_TABLE,"dwight",new TablePermission(TEST_TABLE,TEST_FAMILY,TEST_QUALIFIER,TablePermission.Action.WRITE));
  ListMultimap<String,TablePermission> preperms=AccessControlLists.getTablePermissions(conf,TEST_TABLE);
  HTable table=new HTable(conf,TEST_TABLE);
  table.put(new Put(Bytes.toBytes("row1")).add(TEST_FAMILY,TEST_QUALIFIER,Bytes.toBytes("v1")));
  table.put(new Put(Bytes.toBytes("row2")).add(TEST_FAMILY,TEST_QUALIFIER,Bytes.toBytes("v2")));
  HBaseAdmin admin=UTIL.getHBaseAdmin();
  admin.split(TEST_TABLE);
  Thread.sleep(10000);
  ListMultimap<String,TablePermission> postperms=AccessControlLists.getTablePermissions(conf,TEST_TABLE);
  checkMultimapEqual(preperms,postperms);
}
