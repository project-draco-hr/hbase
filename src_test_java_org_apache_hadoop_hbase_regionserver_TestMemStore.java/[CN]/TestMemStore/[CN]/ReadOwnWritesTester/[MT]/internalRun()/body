{
  for (long i=0; i < NUM_TRIES && caughtException.get() == null; i++) {
    ReadWriteConsistencyControl.WriteEntry w=rwcc.beginMemstoreInsert();
    byte[] v=Bytes.toBytes(i);
    KeyValue kv=new KeyValue(row,f,q1,i,v);
    kv.setMemstoreTS(w.getWriteNumber());
    memstore.add(kv);
    rwcc.completeMemstoreInsert(w);
    ReadWriteConsistencyControl.resetThreadReadPoint(rwcc);
    KeyValueScanner s=this.memstore.getScanners().get(0);
    s.seek(kv);
    KeyValue ret=s.next();
    assertNotNull("Didnt find own write at all",ret);
    assertEquals("Didnt read own writes",kv.getTimestamp(),ret.getTimestamp());
  }
}
