{
  long startTime=0;
  if (LOG.isTraceEnabled()) {
    startTime=EnvironmentEdgeManager.currentTimeMillis();
  }
  PayloadCarryingRpcController pcrc=(PayloadCarryingRpcController)controller;
  CellScanner cells=null;
  if (pcrc != null) {
    cells=pcrc.cellScanner();
    pcrc.setCellScanner(null);
  }
  Pair<Message,CellScanner> val;
  try {
    val=call(md,param,cells,returnType,ticket,isa,rpcTimeout,pcrc != null ? pcrc.getPriority() : HConstants.NORMAL_QOS);
    if (pcrc != null) {
      if (val.getSecond() != null)       pcrc.setCellScanner(val.getSecond());
    }
 else     if (val.getSecond() != null) {
      throw new ServiceException("Client dropping data on the floor!");
    }
    if (LOG.isTraceEnabled()) {
      long callTime=EnvironmentEdgeManager.currentTimeMillis() - startTime;
      LOG.trace("Call: " + md.getName() + ", callTime: "+ callTime+ "ms");
    }
    return val.getFirst();
  }
 catch (  Throwable e) {
    throw new ServiceException(e);
  }
}
