{
  while (calls.isEmpty() && !shouldCloseConnection.get() && running.get()) {
    wait(minIdleTimeBeforeClose);
  }
  if (!calls.isEmpty() && !shouldCloseConnection.get() && running.get()) {
    return true;
  }
 else   if (shouldCloseConnection.get()) {
    return false;
  }
 else   if (calls.isEmpty()) {
    markClosed(new IOException("idle connection closed or stopped"));
    return false;
  }
 else {
    markClosed((IOException)new IOException().initCause(new InterruptedException()));
    return false;
  }
}
