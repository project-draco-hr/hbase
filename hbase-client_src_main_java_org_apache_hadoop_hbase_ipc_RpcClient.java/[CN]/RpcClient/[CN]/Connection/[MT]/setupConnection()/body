{
  short ioFailures=0;
  short timeoutFailures=0;
  while (true) {
    try {
      this.socket=socketFactory.createSocket();
      this.socket.setTcpNoDelay(tcpNoDelay);
      this.socket.setKeepAlive(tcpKeepAlive);
      if (localAddr != null) {
        this.socket.bind(localAddr);
      }
      NetUtils.connect(this.socket,remoteId.getAddress(),getSocketTimeout(conf));
      if (remoteId.rpcTimeout > 0) {
        pingInterval=remoteId.rpcTimeout;
      }
      this.socket.setSoTimeout(pingInterval);
      return;
    }
 catch (    SocketTimeoutException toe) {
      handleConnectionFailure(timeoutFailures++,maxRetries,toe);
    }
catch (    IOException ie) {
      handleConnectionFailure(ioFailures++,maxRetries,ie);
    }
  }
}
