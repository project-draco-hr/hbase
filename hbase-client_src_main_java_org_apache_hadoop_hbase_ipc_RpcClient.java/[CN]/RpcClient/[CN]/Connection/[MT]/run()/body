{
  if (LOG.isTraceEnabled()) {
    LOG.trace(getName() + ": starting, connections " + connections.size());
  }
  try {
    while (waitForWork()) {
      readResponse();
    }
  }
 catch (  InterruptedException t) {
    if (LOG.isTraceEnabled()) {
      LOG.trace(getName() + ": interrupted while waiting for call responses");
    }
    markClosed(ExceptionUtil.asInterrupt(t));
  }
catch (  Throwable t) {
    if (LOG.isDebugEnabled()) {
      LOG.debug(getName() + ": unexpected throwable while waiting for call responses",t);
    }
    markClosed(new IOException("Unexpected throwable while waiting call responses",t));
  }
  close();
  if (LOG.isTraceEnabled()) {
    LOG.trace(getName() + ": stopped, connections " + connections.size());
  }
}
