{
  long roughBlockSize=(long)Math.ceil(maxSize / numBlocks);
  int numEntries=(int)Math.ceil((1.2) * maxSize / roughBlockSize);
  long totalOverhead=LruBlockCache.CACHE_FIXED_OVERHEAD + ClassSize.CONCURRENT_HASHMAP + (numEntries * ClassSize.CONCURRENT_HASHMAP_ENTRY)+ (LruBlockCache.DEFAULT_CONCURRENCY_LEVEL * ClassSize.CONCURRENT_HASHMAP_SEGMENT);
  long negateBlockSize=(long)Math.ceil(totalOverhead / numEntries);
  negateBlockSize+=CachedBlock.PER_BLOCK_OVERHEAD;
  return ClassSize.align((long)Math.floor((roughBlockSize - negateBlockSize) * 0.99f));
}
