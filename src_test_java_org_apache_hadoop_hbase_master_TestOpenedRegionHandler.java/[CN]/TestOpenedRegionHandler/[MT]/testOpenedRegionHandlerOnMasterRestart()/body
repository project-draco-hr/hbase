{
  String tableName="testOpenedRegionHandlerOnMasterRestart";
  MiniHBaseCluster cluster=createRegions(tableName);
  abortMaster(cluster);
  HRegionServer regionServer=cluster.getRegionServer(0);
  HRegion region=getRegionBeingServed(cluster,regionServer);
  zkw=HBaseTestingUtility.createAndForceNodeToOpenedState(TEST_UTIL,region,regionServer);
  log("Starting up a new master");
  cluster.startMaster().getMaster();
  log("Waiting for master to be ready");
  cluster.waitForActiveAndReadyMaster();
  log("Master is ready");
  log("Waiting for no more RIT");
  ZKAssign.blockUntilNoRIT(zkw);
}
