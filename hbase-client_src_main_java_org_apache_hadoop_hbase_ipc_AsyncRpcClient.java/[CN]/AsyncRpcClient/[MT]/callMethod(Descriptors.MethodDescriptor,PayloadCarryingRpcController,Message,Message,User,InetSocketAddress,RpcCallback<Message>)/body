{
  final AsyncRpcChannel connection;
  try {
    connection=createRpcChannel(md.getService().getName(),addr,ticket);
    connection.callMethod(md,pcrc,param,returnType).addListener(new GenericFutureListener<Future<Message>>(){
      @Override public void operationComplete(      Future<Message> future) throws Exception {
        if (!future.isSuccess()) {
          Throwable cause=future.cause();
          if (cause instanceof IOException) {
            pcrc.setFailed((IOException)cause);
          }
 else {
            pcrc.setFailed(new IOException(cause));
          }
        }
 else {
          try {
            done.run(future.get());
          }
 catch (          ExecutionException e) {
            Throwable cause=e.getCause();
            if (cause instanceof IOException) {
              pcrc.setFailed((IOException)cause);
            }
 else {
              pcrc.setFailed(new IOException(cause));
            }
          }
catch (          InterruptedException e) {
            pcrc.setFailed(new IOException(e));
          }
        }
      }
    }
);
  }
 catch (  StoppedRpcClientException|FailedServerException e) {
    pcrc.setFailed(e);
  }
}
