{
  int connectionHashCode=connection.hashCode();
synchronized (connections) {
    AsyncRpcChannel connectionInPool=this.connections.get(connectionHashCode);
    if (connectionInPool.equals(connection)) {
      this.connections.remove(connectionHashCode);
    }
 else     if (LOG.isDebugEnabled()) {
      LOG.debug(String.format("%s already removed, expected instance %08x, actual %08x",connection.toString(),System.identityHashCode(connection),System.identityHashCode(connectionInPool)));
    }
  }
}
