{
  HTableDescriptor[] tables=this.admin.listTables();
switch (ContentType.getContentType(request.getHeader(ACCEPT))) {
case XML:
    setResponseHeader(response,tables.length > 0 ? 200 : 204,ContentType.XML.toString());
  XMLOutputter outputter=getXMLOutputter(response.getWriter());
outputter.startTag("tables");
for (int i=0; i < tables.length; i++) {
doElement(outputter,"table",Bytes.toString(tables[i].getName()));
}
outputter.endTag();
outputter.endDocument();
outputter.getWriter().close();
break;
case PLAIN:
setResponseHeader(response,tables.length > 0 ? 200 : 204,ContentType.PLAIN.toString());
PrintWriter out=response.getWriter();
for (int i=0; i < tables.length; i++) {
out.println(Bytes.toString(tables[i].getName()));
}
out.close();
break;
default :
doNotAcceptable(response);
}
}
