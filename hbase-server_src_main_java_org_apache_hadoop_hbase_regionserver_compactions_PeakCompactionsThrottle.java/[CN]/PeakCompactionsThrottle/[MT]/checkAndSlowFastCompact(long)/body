{
  if (!isPeakHour()) {
    return;
  }
  if (maxSpeedInPeak <= 0) {
    return;
  }
  end=System.currentTimeMillis();
  long minTimeAllowed=numOfBytes * 1000 / maxSpeedInPeak;
  long elapsed=end - start;
  if (elapsed < minTimeAllowed) {
    try {
      Thread.sleep(minTimeAllowed - elapsed);
      sleepNumber++;
      sleepTimeTotal+=(minTimeAllowed - elapsed);
    }
 catch (    InterruptedException ie) {
      IOException iie=new InterruptedIOException();
      iie.initCause(ie);
      throw iie;
    }
  }
  resetStartTime();
}
