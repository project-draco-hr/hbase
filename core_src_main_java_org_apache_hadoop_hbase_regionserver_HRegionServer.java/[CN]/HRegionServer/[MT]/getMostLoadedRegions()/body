{
  ArrayList<HRegionInfo> regions=new ArrayList<HRegionInfo>();
synchronized (onlineRegions) {
    for (    HRegion r : onlineRegions.values()) {
      if (r.isClosed() || r.isClosing()) {
        continue;
      }
      if (regions.size() < numRegionsToReport) {
        regions.add(r.getRegionInfo());
      }
 else {
        break;
      }
    }
  }
  return regions.toArray(new HRegionInfo[regions.size()]);
}
