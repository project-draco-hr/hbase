{
  CellSet.Builder builder=CellSet.newBuilder();
  for (  RowModel row : getRows()) {
    CellSet.Row.Builder rowBuilder=CellSet.Row.newBuilder();
    rowBuilder.setKey(ZeroCopyLiteralByteString.wrap(row.getKey()));
    for (    CellModel cell : row.getCells()) {
      Cell.Builder cellBuilder=Cell.newBuilder();
      cellBuilder.setColumn(ZeroCopyLiteralByteString.wrap(cell.getColumn()));
      cellBuilder.setData(ZeroCopyLiteralByteString.wrap(cell.getValue()));
      if (cell.hasUserTimestamp()) {
        cellBuilder.setTimestamp(cell.getTimestamp());
      }
      rowBuilder.addValues(cellBuilder);
    }
    builder.addRows(rowBuilder);
  }
  return builder.build().toByteArray();
}
