{
  WALKey.Builder builder=WALKey.newBuilder();
  if (compressionContext == null) {
    builder.setEncodedRegionName(ByteString.copyFrom(this.encodedRegionName));
    builder.setTableName(ByteString.copyFrom(this.tablename.getName()));
  }
 else {
    builder.setEncodedRegionName(compressor.compress(this.encodedRegionName,compressionContext.regionDict));
    builder.setTableName(compressor.compress(this.tablename.getName(),compressionContext.tableDict));
  }
  builder.setLogSequenceNumber(this.logSeqNum);
  builder.setWriteTime(writeTime);
  HBaseProtos.UUID.Builder uuidBuilder=HBaseProtos.UUID.newBuilder();
  for (  UUID clusterId : clusterIds) {
    uuidBuilder.setLeastSigBits(clusterId.getLeastSignificantBits());
    uuidBuilder.setMostSigBits(clusterId.getMostSignificantBits());
    builder.addClusterIds(uuidBuilder.build());
  }
  if (scopes != null) {
    for (    Map.Entry<byte[],Integer> e : scopes.entrySet()) {
      ByteString family=(compressionContext == null) ? ByteString.copyFrom(e.getKey()) : compressor.compress(e.getKey(),compressionContext.familyDict);
      builder.addScopes(FamilyScope.newBuilder().setFamily(family).setScopeType(ScopeType.valueOf(e.getValue())));
    }
  }
  return builder;
}
