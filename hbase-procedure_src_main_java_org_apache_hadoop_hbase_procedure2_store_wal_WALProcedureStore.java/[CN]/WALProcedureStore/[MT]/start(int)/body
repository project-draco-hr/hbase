{
  if (running.getAndSet(true)) {
    return;
  }
  slots=new ByteSlot[numSlots];
  slotsCache=new ArrayBlockingQueue(numSlots,true);
  while (slotsCache.remainingCapacity() > 0) {
    slotsCache.offer(new ByteSlot());
  }
  syncWaitMsec=conf.getInt(SYNC_WAIT_MSEC_CONF_KEY,DEFAULT_SYNC_WAIT_MSEC);
  syncThread=new Thread("WALProcedureStoreSyncThread"){
    @Override public void run(){
      while (running.get()) {
        try {
          syncLoop();
        }
 catch (        IOException e) {
          LOG.error("got an exception from the sync-loop",e);
          sendAbortProcessSignal();
        }
      }
    }
  }
;
  syncThread.start();
}
