{
  if (!setRunning(false)) {
    return;
  }
  LOG.info("Stopping the WAL Procedure Store");
  if (lock.tryLock()) {
    try {
      waitCond.signalAll();
    }
  finally {
      lock.unlock();
    }
  }
  if (!abort) {
    try {
      syncThread.join();
    }
 catch (    InterruptedException e) {
      Thread.currentThread().interrupt();
    }
  }
  closeStream();
  for (  ProcedureWALFile log : logs) {
    log.close();
  }
  logs.clear();
}
