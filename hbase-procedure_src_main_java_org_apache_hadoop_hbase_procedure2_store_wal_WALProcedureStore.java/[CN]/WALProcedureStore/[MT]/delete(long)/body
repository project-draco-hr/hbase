{
  if (LOG.isTraceEnabled()) {
    LOG.trace("Delete " + procId);
  }
  ByteSlot slot=acquireSlot();
  long logId=-1;
  try {
    ProcedureWALFormat.writeDelete(slot,procId);
    logId=pushData(slot);
  }
 catch (  IOException e) {
    LOG.fatal("Unable to serialize the procedure: " + procId,e);
    throw new RuntimeException(e);
  }
 finally {
    releaseSlot(slot);
  }
  boolean removeOldLogs=false;
synchronized (storeTracker) {
    storeTracker.delete(procId);
    if (logId == flushLogId) {
      if (storeTracker.isEmpty() || storeTracker.isUpdated()) {
        removeOldLogs=checkAndTryRoll();
      }
 else {
        checkAndTryRoll();
      }
    }
  }
  if (removeOldLogs) {
    setInactiveLogsMaxId(logId);
  }
}
