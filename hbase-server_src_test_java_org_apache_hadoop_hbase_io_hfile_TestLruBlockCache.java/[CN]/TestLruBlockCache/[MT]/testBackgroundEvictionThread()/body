{
  long maxSize=100000;
  long blockSize=calculateBlockSizeDefault(maxSize,9);
  LruBlockCache cache=new LruBlockCache(maxSize,blockSize);
  CachedItem[] blocks=generateFixedBlocks(10,blockSize,"block");
  EvictionThread evictionThread=cache.getEvictionThread();
  assertTrue(evictionThread != null);
  while (!evictionThread.isEnteringRun()) {
    Thread.sleep(1);
  }
  for (  CachedItem block : blocks) {
    cache.cacheBlock(block.cacheKey,block);
  }
  int n=0;
  while (cache.getEvictionCount() == 0) {
    Thread.sleep(200);
    assertTrue(n++ < 20);
  }
  System.out.println("Background Evictions run: " + cache.getEvictionCount());
  assertEquals(cache.getEvictionCount(),1);
}
