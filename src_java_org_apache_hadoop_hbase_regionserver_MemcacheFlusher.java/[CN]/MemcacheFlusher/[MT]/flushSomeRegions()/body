{
  for (SortedMap<Long,HRegion> m=this.server.getCopyOfOnlineRegionsSortedBySize(); server.getGlobalMemcacheSize() >= globalMemcacheLimitLowMark; ) {
    if (m.size() <= 0) {
      LOG.info("No online regions to flush though we've been asked flush " + "some; globalMemcacheSize=" + this.server.getGlobalMemcacheSize() + ", globalMemcacheLimitLowMark="+ this.globalMemcacheLimitLowMark);
      break;
    }
    HRegion biggestMemcacheRegion=m.remove(m.firstKey());
    if (!flushRegion(biggestMemcacheRegion,true)) {
      break;
    }
  }
}
