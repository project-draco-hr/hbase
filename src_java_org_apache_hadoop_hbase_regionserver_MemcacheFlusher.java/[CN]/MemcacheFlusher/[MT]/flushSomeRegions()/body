{
  SortedMap<Long,HRegion> m=this.server.getCopyOfOnlineRegionsSortedBySize();
  if (m.size() <= 0) {
    LOG.info("No online regions to flush though we've been asked flush some.");
    return;
  }
  while (server.getGlobalMemcacheSize() >= globalMemcacheLimitLowMark) {
    HRegion biggestMemcacheRegion=m.remove(m.firstKey());
    if (!flushRegion(biggestMemcacheRegion,true)) {
      break;
    }
  }
}
