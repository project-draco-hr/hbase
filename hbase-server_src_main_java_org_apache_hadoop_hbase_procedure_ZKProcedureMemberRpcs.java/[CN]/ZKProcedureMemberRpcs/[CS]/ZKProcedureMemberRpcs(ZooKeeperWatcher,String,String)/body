{
  this.zkController=new ZKProcedureUtil(watcher,procType,memberName){
    @Override public void nodeCreated(    String path){
      if (path.startsWith(this.baseZNode)) {
        LOG.info("Received created event:" + path);
        if (path.equals(this.acquiredZnode)) {
          waitForNewProcedures();
          return;
        }
 else         if (path.equals(this.abortZnode)) {
          watchForAbortedProcedures();
          return;
        }
        String parent=ZKUtil.getParent(path);
        if (parent.equals(this.reachedZnode)) {
          receivedReachedGlobalBarrier(path);
          return;
        }
 else         if (parent.equals(this.abortZnode)) {
          abort(path);
          return;
        }
 else         if (parent.equals(this.acquiredZnode)) {
          startNewSubprocedure(path);
        }
 else {
          LOG.debug("Ignoring created notification for node:" + path);
        }
      }
    }
    @Override public void nodeChildrenChanged(    String path){
      LOG.info("Received children changed event:" + path);
      if (path.equals(this.acquiredZnode)) {
        LOG.info("Received start event.");
        waitForNewProcedures();
      }
 else       if (path.equals(this.abortZnode)) {
        LOG.info("Received abort event.");
        watchForAbortedProcedures();
      }
    }
  }
;
  this.memberName=memberName;
}
