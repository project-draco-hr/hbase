{
  this.regionsInTransition.remove(regionInfo.getEncodedName());
synchronized (this.regions) {
    ServerName oldSn=this.regions.get(regionInfo);
    if (oldSn != null)     LOG.warn("Overwriting " + regionInfo.getEncodedName() + " on "+ oldSn+ " with "+ sn);
    if (isServerOnline(sn)) {
      this.regions.put(regionInfo,sn);
      addToServers(sn,regionInfo);
      this.regions.notifyAll();
    }
 else {
      LOG.info("The server is not in online servers, ServerName=" + sn.getServerName() + ", region="+ regionInfo.getEncodedName());
    }
  }
  clearRegionPlan(regionInfo);
  addToServersInUpdatingTimer(sn);
}
