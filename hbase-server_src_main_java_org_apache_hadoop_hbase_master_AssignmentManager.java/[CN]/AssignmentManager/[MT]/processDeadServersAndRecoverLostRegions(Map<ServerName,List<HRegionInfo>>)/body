{
  if (deadServers != null) {
    for (    Map.Entry<ServerName,List<HRegionInfo>> server : deadServers.entrySet()) {
      ServerName serverName=server.getKey();
      regionStates.setLastRegionServerOfRegions(serverName,server.getValue());
      if (!serverManager.isServerDead(serverName)) {
        serverManager.expireServer(serverName);
      }
    }
  }
  List<String> nodes=ZKUtil.listChildrenAndWatchForNewChildren(this.watcher,this.watcher.assignmentZNode);
  if (!nodes.isEmpty()) {
    for (    String encodedRegionName : nodes) {
      processRegionInTransition(encodedRegionName,null);
    }
  }
  failoverCleanupDone();
}
