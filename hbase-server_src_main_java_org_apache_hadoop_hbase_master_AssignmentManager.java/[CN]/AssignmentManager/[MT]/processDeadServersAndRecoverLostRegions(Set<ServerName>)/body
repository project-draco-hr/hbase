{
  if (deadServers != null && !deadServers.isEmpty()) {
    for (    ServerName serverName : deadServers) {
      if (!serverManager.isServerDead(serverName)) {
        serverManager.expireServer(serverName);
      }
    }
  }
  List<String> nodes=useZKForAssignment ? ZKUtil.listChildrenAndWatchForNewChildren(watcher,watcher.assignmentZNode) : ZKUtil.listChildrenNoWatch(watcher,watcher.assignmentZNode);
  if (nodes != null && !nodes.isEmpty()) {
    for (    String encodedRegionName : nodes) {
      processRegionInTransition(encodedRegionName,null);
    }
  }
 else   if (!useZKForAssignment) {
    Map<String,RegionState> rits=regionStates.getRegionsInTransition();
    for (    RegionState regionState : rits.values()) {
      if (!serverManager.isServerOnline(regionState.getServerName())) {
        continue;
      }
      State state=regionState.getState();
      LOG.info("Processing " + regionState);
switch (state) {
case PENDING_OPEN:
        retrySendRegionOpen(regionState);
      break;
case PENDING_CLOSE:
    retrySendRegionClose(regionState);
  break;
default :
}
}
}
}
