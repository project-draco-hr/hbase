{
  MetricsHBaseServer mrpc=new MetricsHBaseServer("HMaster",new MetricsHBaseServerWrapperStub());
  MetricsHBaseServerSource serverSource=mrpc.getMetricsSource();
  for (int i=0; i < 12; i++) {
    mrpc.authenticationFailure();
  }
  for (int i=0; i < 13; i++) {
    mrpc.authenticationSuccess();
  }
  HELPER.assertCounter("authenticationFailures",12,serverSource);
  HELPER.assertCounter("authenticationSuccesses",13,serverSource);
  for (int i=0; i < 14; i++) {
    mrpc.authorizationSuccess();
  }
  for (int i=0; i < 15; i++) {
    mrpc.authorizationFailure();
  }
  HELPER.assertCounter("authorizationSuccesses",14,serverSource);
  HELPER.assertCounter("authorizationFailures",15,serverSource);
  mrpc.dequeuedCall(100);
  mrpc.processedCall(101);
  HELPER.assertCounter("queueCallTime_NumOps",1,serverSource);
  HELPER.assertCounter("processCallTime_NumOps",1,serverSource);
  mrpc.sentBytes(103);
  mrpc.sentBytes(103);
  mrpc.sentBytes(103);
  mrpc.receivedBytes(104);
  mrpc.receivedBytes(104);
  HELPER.assertCounter("sentBytes",309,serverSource);
  HELPER.assertCounter("receivedBytes",208,serverSource);
}
