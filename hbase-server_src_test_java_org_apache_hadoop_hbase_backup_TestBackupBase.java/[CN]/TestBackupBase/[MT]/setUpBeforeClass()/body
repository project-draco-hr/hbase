{
  TEST_UTIL=new HBaseTestingUtility();
  TEST_UTIL.getConfiguration().set("hbase.procedure.regionserver.classes",LogRollRegionServerProcedureManager.class.getName());
  TEST_UTIL.getConfiguration().set("hbase.procedure.master.classes",LogRollMasterProcedureManager.class.getName());
  TEST_UTIL.getConfiguration().set(HConstants.ZOOKEEPER_ZNODE_PARENT,"/1");
  TEST_UTIL.startMiniZKCluster();
  MiniZooKeeperCluster miniZK=TEST_UTIL.getZkCluster();
  conf1=TEST_UTIL.getConfiguration();
  conf2=HBaseConfiguration.create(conf1);
  conf2.set(HConstants.ZOOKEEPER_ZNODE_PARENT,"/2");
  TEST_UTIL2=new HBaseTestingUtility(conf2);
  TEST_UTIL2.setZkCluster(miniZK);
  TEST_UTIL.startMiniCluster();
  TEST_UTIL2.startMiniCluster();
  conf1=TEST_UTIL.getConfiguration();
  TEST_UTIL.startMiniMapReduceCluster();
  BACKUP_ROOT_DIR=TEST_UTIL.getConfiguration().get("fs.defaultFS") + "/backupUT";
  LOG.info("ROOTDIR " + BACKUP_ROOT_DIR);
  BACKUP_REMOTE_ROOT_DIR=TEST_UTIL2.getConfiguration().get("fs.defaultFS") + "/backupUT";
  LOG.info("REMOTE ROOTDIR " + BACKUP_REMOTE_ROOT_DIR);
  BackupClient.setConf(conf1);
  RestoreClient.setConf(conf1);
  createTables();
}
