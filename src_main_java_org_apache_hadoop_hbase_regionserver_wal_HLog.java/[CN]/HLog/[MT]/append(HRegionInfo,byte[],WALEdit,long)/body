{
  if (edits.isEmpty())   return;
  if (this.closed) {
    throw new IOException("Cannot append; log is closed");
  }
synchronized (this.updateLock) {
    long seqNum=obtainSeqNum();
    byte[] hriKey=info.getEncodedNameAsBytes();
    this.lastSeqWritten.putIfAbsent(hriKey,seqNum);
    HLogKey logKey=makeKey(hriKey,tableName,seqNum,now);
    doWrite(info,logKey,edits);
    this.numEntries.incrementAndGet();
    this.unflushedEntries.incrementAndGet();
  }
  if (info.isMetaRegion() || !info.getTableDesc().isDeferredLogFlush()) {
    this.sync();
  }
}
