{
  if (!this.enabled) {
    return;
  }
  if (!this.listeners.isEmpty()) {
    for (    WALObserver i : this.listeners) {
      i.visitLogEntryBeforeWrite(info,logKey,logEdit);
    }
  }
  try {
    long now=System.currentTimeMillis();
    this.writer.append(new HLog.Entry(logKey,logEdit));
    long took=System.currentTimeMillis() - now;
    writeTime+=took;
    writeOps++;
    if (took > 1000) {
      LOG.warn(Thread.currentThread().getName() + " took " + took+ "ms appending an edit to hlog; editcount="+ this.numEntries.get());
    }
  }
 catch (  IOException e) {
    LOG.fatal("Could not append. Requesting close of hlog",e);
    requestLogRoll();
    throw e;
  }
}
