{
  conf.setInt("hbase.regionserver.handler.count",2);
  conf.setInt("hbase.regionserver.metahandler.count",2);
  conf.setInt("hbase.htable.threads.max",POOL_SIZE);
  conf.setInt("hbase.hconnection.threads.max",2 * POOL_SIZE);
  conf.setInt("hbase.hconnection.threads.core",POOL_SIZE);
  conf.setInt("hbase.hbck.close.timeout",2 * REGION_ONLINE_TIMEOUT);
  conf.setInt(HConstants.HBASE_RPC_TIMEOUT_KEY,2 * REGION_ONLINE_TIMEOUT);
  TEST_UTIL.startMiniCluster(3);
  tableExecutorService=new ThreadPoolExecutor(1,POOL_SIZE,60,TimeUnit.SECONDS,new SynchronousQueue<Runnable>(),Threads.newDaemonThreadFactory("testhbck"));
  hbfsckExecutorService=new ScheduledThreadPoolExecutor(POOL_SIZE);
  AssignmentManager assignmentManager=TEST_UTIL.getHBaseCluster().getMaster().getAssignmentManager();
  regionStates=assignmentManager.getRegionStates();
  connection=(ClusterConnection)TEST_UTIL.getConnection();
  admin=connection.getAdmin();
  admin.setBalancerRunning(false,true);
}
