{
  CatalogTracker ct=Mockito.mock(CatalogTracker.class);
  HRegionInterface ri=Mockito.mock(HRegionInterface.class);
  Result r=Mocking.getMetaTableRowResult(REGIONINFO,SERVERNAME_A);
  Mockito.when(ri.openScanner((byte[])Mockito.any(),(Scan)Mockito.any())).thenReturn(System.currentTimeMillis());
  Mockito.when(ri.next(Mockito.anyLong(),Mockito.anyInt())).thenReturn(new Result[]{r},(Result[])null);
  Mockito.when(ri.get((byte[])Mockito.any(),(Get)Mockito.any())).thenReturn(r);
  HConnection connection=HConnectionTestingUtility.getMockedConnectionAndDecorate(HTU.getConfiguration(),ri,SERVERNAME_B,REGIONINFO);
  Mockito.when(ct.getConnection()).thenReturn(connection);
  ExecutorService executor=startupMasterExecutor("mockedAMExecutor");
  AssignmentManagerWithExtrasForTesting am=new AssignmentManagerWithExtrasForTesting(server,manager,ct,executor);
  return am;
}
