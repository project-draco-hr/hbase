{
  if (isSecurityEnabled()) {
    try {
      Class c=Class.forName("org.apache.hadoop.security.SecurityUtil");
      Class[] types=new Class[]{Configuration.class,String.class,String.class,String.class};
      Object[] args=new Object[]{conf,fileConfKey,principalConfKey,localhost};
      Methods.call(c,null,"login",types,args);
    }
 catch (    ClassNotFoundException cnfe) {
      throw new RuntimeException("Unable to login using " + "org.apache.hadoop.security.SecurityUtil.login(). SecurityUtil class " + "was not found!  Is this a version of secure Hadoop?",cnfe);
    }
catch (    IOException ioe) {
      throw ioe;
    }
catch (    RuntimeException re) {
      throw re;
    }
catch (    Exception e) {
      throw new UndeclaredThrowableException(e,"Unhandled exception in User.login()");
    }
  }
}
