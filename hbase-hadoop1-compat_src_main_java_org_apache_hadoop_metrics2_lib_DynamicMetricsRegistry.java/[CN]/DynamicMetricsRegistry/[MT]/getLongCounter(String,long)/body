{
  MetricMutable counter=metricsMap.get(counterName);
  if (counter == null) {
    MetricMutableCounterLong newCounter=mf.newCounter(counterName,"",potentialStartingValue);
    counter=metricsMap.putIfAbsent(counterName,newCounter);
    if (counter == null) {
      return newCounter;
    }
  }
  if (!(counter instanceof MetricMutableCounterLong)) {
    throw new MetricsException("Metric already exists in registry for metric name: " + name + "and not of type MetricMutableCounterLong");
  }
  return (MetricMutableCounterLong)counter;
}
