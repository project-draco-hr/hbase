{
  OutputStream stm=log.getOutputStream();
  Method getPipeline=null;
  for (  Method m : stm.getClass().getDeclaredMethods()) {
    if (m.getName().endsWith("getPipeline")) {
      getPipeline=m;
      getPipeline.setAccessible(true);
      break;
    }
  }
  assertTrue("Need DFSOutputStream.getPipeline() for this test",null != getPipeline);
  Object repl=getPipeline.invoke(stm,new Object[]{});
  return (DatanodeInfo[])repl;
}
