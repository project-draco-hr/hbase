{
  TestRpcServer rpcServer=new TestRpcServer();
  try (RpcClient client=createRpcClientRTEDuringConnectionSetup(CONF)){
    rpcServer.start();
    setupAsyncConnection(rpcServer,client);
    fail("Expected an exception to have been thrown!");
  }
 catch (  ExecutionException e) {
    assertTrue(StringUtils.stringifyException(e).contains("Injected fault"));
  }
 finally {
    rpcServer.stop();
  }
}
