{
  if ((off | len | (off + len)| (b.length - (off + len))) < 0) {
    throw new IndexOutOfBoundsException();
  }
  int n=(int)Math.min(Integer.MAX_VALUE,Math.min(len,(end - pos)));
  if (n == 0)   return -1;
  int ret=0;
  if (this.pread) {
    ret=in.read(pos,b,off,n);
  }
 else {
synchronized (in) {
      in.seek(pos);
      ret=in.read(b,off,n);
    }
  }
  if (ret < 0) {
    end=pos;
    return -1;
  }
  pos+=ret;
  return ret;
}
